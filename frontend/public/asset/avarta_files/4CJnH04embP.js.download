if (self.CavalryLogger) { CavalryLogger.start_js(["CsSh4"]); }

__d("P2PCreditCardForm.react",["FBPaymentsCreditCardForm_DEPRECATED.react","P2PAPI","P2PAPIUtils","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={binError:"",isFormValid:!1,previousBINNumber:"",validateBINRequestID:""},c.handleValidation=function(a,b){var d=b.creditCardNumber;!c.props.editMode&&c.props.productType==="p2p"&&d&&c.validateBIN(d);c.setState({isFormValid:a});c.props.onValidation({isValid:a&&c.state.validateBINRequestID===""&&!c.state.binError,formData:b})},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.UNSAFE_componentWillReceiveProps=function(a){a=a.asyncRequestState;a=a?a[this.state.validateBINRequestID]:null;a&&(this.setState({validateBINRequestID:""}),a.error?this.handleValidateBINNumberError(a.error):this.handleValidateBINNumberSuccess())};d.handleValidateBINNumberSuccess=function(){this.props.onValidation({isValid:this.state.isFormValid}),this.setState({binError:""})};d.handleValidateBINNumberError=function(a){a=a.message;this.props.onValidation({isValid:!1});this.setState({binError:a})};d.validateBIN=function(a){var c;a=a.replace(/ /g,"");a=a.substr(0,6);a!==this.state.previousBINNumber&&a.length>=6?(c=b("P2PAPIUtils").genRequestID(),this.setState({validateBINRequestID:c}),this.props.onValidation({isValid:!1}),b("P2PAPI").validateBINNumber({binNumber:a,requestID:c})):a.length<6&&this.setState({binError:"",validateBINRequestID:""});this.setState({previousBINNumber:a})};d.render=function(){return b("React").jsx(b("FBPaymentsCreditCardForm_DEPRECATED.react"),babelHelpers["extends"]({},this.props,{autoTab:!0,allowCredit:this.props.productType==="messenger_commerce",isBinErrorLoading:this.state.validateBINRequestID!=="",binError:this.state.binError,onValidation:this.handleValidation,postalRegex:this.props.postalRegex}))};return c}(b("React").Component);a.defaultProps={asyncRequestState:{},productType:"p2p"};e.exports=a}),null);
__d("P2PEditCreditCardDialog.react",["fbt","Link.react","MessengerEnvironment","P2PAPI","P2PAPIUtils","P2PButton.react","P2PCreditCard","P2PCreditCardForm.react","P2PDialog.react","P2PDialogBody.react","P2PDialogFooter.react","P2PDialogTitle.react","P2PLinkConstants","P2PLoadingMask.react","P2PText.react","React","cxMargin","prop-types"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h="fbP2PEditCreditCardDialog_learnMoreSentenceID";a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={formData:{},isValid:!1,loading:!1,requestID:"",saveErrors:null},d.clearSaveErrors=function(){d.setState({saveErrors:null})},d.onSaveClick=function(a){a={};var c=b("P2PAPIUtils").genRequestID();a.credential_id=d.props.creditCard.getCredentialId();d.clearSaveErrors();d.setState({loading:!0,requestID:c});b("P2PAPI").updateCreditCard(babelHelpers["extends"]({requestID:c},a,d.state.formData))},d.handleOnSaveSuccess=function(a){d.props.onSuccess(a)},d.onCancelClick=function(a){d.props.onCancel()},d.handleOnSaveError=function(a){d.setState({loading:!1,saveErrors:a})},d.isSaveDisabled=function(){return!d.state.isValid||d.state.loading},d.isCancelDisabled=function(){return d.state.loading},d.handleValidation=function(a,b){d.setState({isValid:a,formData:b})},d.getPrefilledFormData=function(){var a={};a.creditCardNumber=d.props.creditCard.getCreditCardNumberMask();a.exp=d.props.creditCard.getExpFormattedShort();a.zip=d.props.creditCard.getZipCode();return a},d.handleErrorDialogOKClick=function(){d.clearSaveErrors()},d.onToggle=function(a){a||d.props.onCancel()},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.UNSAFE_componentWillReceiveProps=function(a){a=a.asyncRequestState?a.asyncRequestState[this.state.requestID]:null;a&&(this.setState({requestID:""}),a.error?this.handleOnSaveError(a.error):this.handleOnSaveSuccess(a))};d.render=function(){var a,c=this.props.text;c||(c=g._("Please update the expiration date for your card ending in {card numbers}.",[g._param("card numbers",this.props.creditCard.getCreditCardNumber())]));this.props.showCancelButton&&(a=b("React").jsx(b("P2PButton.react"),{use:"default",size:"medium",label:g._("Cancel"),disabled:this.isCancelDisabled(),onClick:this.onCancelClick}));return b("React").jsxs(b("P2PDialog.react"),{behaviors:this.props.behaviors,layerHideOnBlur:!1,onToggle:this.onToggle,repositionOnUpdate:!0,shown:!0,width:this.props.width,children:[b("React").jsx(b("P2PDialogTitle.react"),{children:g._("Update Debit Card")}),b("React").jsxs(b("P2PDialogBody.react"),{children:[b("React").jsx(b("P2PText.react"),{className:"_3-96",type:"primary",children:c}),b("React").jsx(b("P2PCreditCardForm.react"),{onValidation:this.handleValidation,saveErrors:this.state.saveErrors,editMode:!0,prefilledFormData:this.getPrefilledFormData(),cscMaxLength:this.props.creditCard.getMaxCSCLength()}),b("React").jsx(b("P2PText.react"),{className:"_3-8y",id:h,type:"secondary",children:g._("Your payment info is stored securely. {Learn more about p2p link}",[g._param("Learn more about p2p link",b("React").jsx(b("Link.react"),{"aria-describedby":h,href:b("P2PLinkConstants").addDebitCardHelpURI,target:"_blank",children:g._("Learn more.")}))])})]}),b("React").jsxs(b("P2PDialogFooter.react"),{children:[a,b("React").jsx(b("P2PButton.react"),{use:"confirm",size:"medium",label:this.props.saveButtonText,disabled:this.isSaveDisabled(),onClick:this.onSaveClick})]}),b("React").jsx(b("P2PLoadingMask.react"),{visible:this.state.loading})]})};return c}(b("React").Component);a.propTypes={asyncRequestState:(c=b("prop-types")).object.isRequired,creditCard:c.instanceOf(b("P2PCreditCard")).isRequired,onCancel:c.func.isRequired,onSuccess:c.func.isRequired,saveButtonText:c.node,showCancelButton:c.bool};a.defaultProps={saveButtonText:g._("Save"),showCancelButton:!0,width:b("MessengerEnvironment").messengerui?350:300};e.exports=a}),null);
__d("P2PConfirmationDialog.react",["cx","fbt","LayerFadeOnHide","LeftRight.react","MessengerEnvironment","P2PButton.react","P2PDialog.react","P2PDialogBody.react","P2PDialogFooter.react","P2PDialogTitle.react","P2PText.react","React","emptyFunction","prop-types"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.getBackButton=function(){return!d.props.allowBack?null:b("React").jsx(b("P2PButton.react"),{label:h._("Back"),onClick:d.props.onBackClick,use:"default"})},d.getSecondaryButton=function(){return!d.props.showSecondaryButton?null:b("React").jsx(b("P2PButton.react"),{label:d.props.secondaryButtonLabel,onClick:d.props.onSecondaryClick,use:d.props.secondaryButtonUse})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){var a=b("MessengerEnvironment").messengerui,c=[b("React").jsx("div",{className:"_465t",children:this.props.image},"confirmation_icon"),b("React").jsx(b("P2PText.react"),{className:"_465u"+(this.props.centered?" _465v":""),type:"primary",children:this.props.children},"confirmation_text")];a&&(c=b("React").jsx(b("LeftRight.react"),{direction:"left",children:c}));return b("React").jsx(b("P2PDialog.react"),{behaviors:babelHelpers["extends"]({LayerFadeOnShow:!1,LayerFadeOnHide:b("LayerFadeOnHide")},this.props.behaviors),className:"_465w"+(a?" _465x":""),layerHideOnBlur:!1,onToggle:this.props.onToggle,ref:"dialog",repositionOnUpdate:!0,shown:!0,width:this.props.width,children:b("React").jsxs("div",{className:"_465y",children:[b("React").jsx(b("P2PDialogTitle.react"),{className:"_465z",showCloseButton:this.props.showCloseButton,children:this.props.title}),b("React").jsx(b("P2PDialogBody.react"),{children:c}),b("React").jsxs(b("P2PDialogFooter.react"),{children:[this.getBackButton(),this.getSecondaryButton(),b("React").jsx(b("P2PButton.react"),{label:this.props.buttonLabel,onClick:this.props.onOKClick,use:this.props.buttonUse})]})]})})};return c}(b("React").Component);a.propTypes={allowBack:(c=b("prop-types")).bool,buttonLabel:c.node.isRequired,buttonUse:c.string.isRequired,centered:c.bool,image:c.object.isRequired,onBackClick:c.func,onOKClick:c.func,onSecondaryClick:c.func,onToggle:c.func,secondaryButtonLabel:c.node,secondaryButtonUse:c.string,showCloseButton:c.bool,showSecondaryButton:c.bool,title:c.node.isRequired};a.defaultProps={buttonLabel:h._("OK"),buttonUse:"default",centered:!1,onBackClick:d=b("emptyFunction"),onOKClick:d,onSecondaryClick:d,onToggle:d,showCloseButton:!1,showSecondaryButton:!1,width:b("MessengerEnvironment").messengerui?350:300};e.exports=a}),null);
__d("P2PErrorDialog.react",["fbt","ix","Image.react","MessengerEnvironment","P2PConfirmationDialog.react","P2PText.react","React","emptyFunction","prop-types"],(function(a,b,c,d,e,f,g,h){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.renderErrorContent=function(){var a=d.props.error;if(a.message.__html)return b("React").jsx(b("P2PText.react"),{dangerouslySetInnerHTML:a.message,type:"primary"});else return b("React").jsx(b("P2PText.react"),{type:"primary",children:a.message})},d.getImage=function(){if(b("MessengerEnvironment").messengerui)return b("React").jsx(b("Image.react"),{height:62,width:62,src:h("94363")});else return b("React").jsx(b("Image.react"),{height:55,width:55,src:h("94362")})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){var a=this.getImage();return b("React").jsx(b("P2PConfirmationDialog.react"),{allowBack:this.props.allowBack,behaviors:babelHelpers["extends"]({},this.props.behaviors),centered:this.props.centered,image:a,onBackClick:this.props.onBackClick,onOKClick:this.props.onOKClick,title:this.props.title,width:this.props.width,children:this.renderErrorContent()})};return c}(b("React").Component);a.propTypes={allowBack:(c=b("prop-types")).bool,onBackClick:c.func,onOKClick:c.func,error:c.object,title:c.string};a.defaultProps={allowBack:!1,onBackClick:b("emptyFunction"),onOKClick:b("emptyFunction"),error:null,title:g._("Problem")};e.exports=a}),null);
__d("P2PAddCreditCardDialog.react",["fbt","Link.react","MessengerEnvironment","Middot.react","P2PAPI","P2PAPIUtils","P2PButton.react","P2PCreditCardForm.react","P2PCreditCardStore","P2PDialog.react","P2PDialogBody.react","P2PDialogFooter.react","P2PDialogTitle.react","P2PLinkConstants","P2PLoadingMask.react","P2PLogger","P2PPaymentConfig","P2PText.react","React","cxMargin","emptyFunction"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h="fbP2PAddCreditCardDialog_learnMoreSentenceID";a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),h=0;h<e;h++)f[h]=arguments[h];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={isValid:!1,formData:{},loading:!1,requestID:"",saveErrors:null,asyncRequestState:{}},d.onCreditCardStoreChange=function(){var a=b("P2PCreditCardStore").getAsyncRequestState(),c=a[d.state.requestID];d.setState({asyncRequestState:a});c&&(d.setState({requestID:""}),c.error?d.handleOnSaveError(c.error):d.handleOnSaveSuccess(c))},d.onSaveClick=function(){__p&&__p();var a=d.props.p2pPaymentConfig;if(!a){d.setState({loading:!1,saveErrors:{general:{message:g._("Cannot identify country.")}}});return}var c=b("P2PAPIUtils").genRequestID();d.setState(function(b){return{loading:!0,requestID:c,saveErrors:null,formData:babelHelpers["extends"]({},b.formData,(b={},b.country=a.countryCode,b))}},function(){b("P2PAPI").addCreditCard(babelHelpers["extends"]({requestID:c,product_type:d.props.productType},d.state.formData))});d.log("UI_Actn_Confirm_Card_Details")},d.handleValidation=function(a){d.setState(a)},d.onToggle=function(a){a||(d.props.onCancel(),d.log("UI_Actn_Cancel_Add_Card"))},d.onCancelClicked=function(){d.onToggle(!1)},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){this.log("UI_Actn_Initiate_Add_Card"),this.creditCardStoreSub=b("P2PCreditCardStore").addListener("change",this.onCreditCardStoreChange)};d.componentWillUnmount=function(){this.creditCardStoreSub&&(this.creditCardStoreSub.remove(),this.creditCardStoreSub=null)};d.log=function(a,c){b("P2PLogger").log(a,babelHelpers["extends"]({www_event_flow:this.props.eventFlow,object_id:this.props.loggingObjectID},this.props.loggingData,c))};d.handleOnSaveSuccess=function(a){this.props.onSuccess(a),this.log("UI_Actn_Add_Card_Success")};d.handleOnSaveError=function(a){this.setState({loading:!1,saveErrors:a}),this.log("UI_Actn_Add_Card_Fail",{message:a&&a.general?a.general.message:""})};d.isSaveButtonDisabled=function(){return this.state.loading||!this.state.isValid};d.renderAddCardForm=function(){var a=this.props.p2pPaymentConfig;if(!a)return null;var c,d=this.props.title;this.props.showCancelButton&&(c=b("React").jsx(b("P2PButton.react"),{use:"default",size:"medium",label:this.props.cancelButtonText,disabled:this.state.loading,onClick:this.onCancelClicked}));return b("React").jsxs("div",{children:[b("React").jsx(b("P2PDialogTitle.react"),{children:d}),b("React").jsxs(b("P2PDialogBody.react"),{children:[b("React").jsx(b("P2PText.react"),{type:"primary",className:"_3-96",children:this.props.text}),b("React").jsx(b("P2PCreditCardForm.react"),{asyncRequestState:this.state.asyncRequestState,compactMode:!0,onValidation:this.handleValidation,postalRegex:a.postalRegex,productType:this.props.productType,saveErrors:this.state.saveErrors,showIcons:!1,showLabels:!0,showPlaceholderOnFocus:!0,showSecondaryIcons:!0,useGutters:!0}),b("React").jsxs(b("P2PText.react"),{className:"_3-8y",id:h,type:"secondary",children:[g._("Your payment info is stored securely."),b("React").jsxs("div",{children:[b("React").jsx(b("Link.react"),{"aria-describedby":h,href:b("P2PLinkConstants").addDebitCardHelpURI,target:"_blank",children:g._("Learn More")}),b("React").jsx(b("Middot.react"),{}),b("React").jsx(b("Link.react"),{"aria-describedby":h,href:b("P2PLinkConstants").paymentsTermsURI,target:"_blank",children:g._("Terms")})]})]})]}),b("React").jsxs(b("P2PDialogFooter.react"),{leftContent:this.props.leftContent,children:[c,b("React").jsx(b("P2PButton.react"),{use:"confirm",size:"medium",label:this.props.saveButtonText,disabled:this.isSaveButtonDisabled(),onClick:this.onSaveClick})]})]})};d.render=function(){return!this.props.p2pPaymentConfig?null:b("React").jsxs(b("P2PDialog.react"),{behaviors:this.props.behaviors,layerHideOnBlur:!1,ref:"dialog",onToggle:this.onToggle,repositionOnUpdate:!0,shown:!0,width:this.props.width,children:[this.renderAddCardForm(),b("React").jsx(b("P2PLoadingMask.react"),{visible:this.state.loading})]})};return c}(b("React").Component);a.defaultProps={cancelButtonText:g._("Cancel"),loggingData:{},onCancel:b("emptyFunction"),onSuccess:b("emptyFunction"),p2pPaymentConfig:b("P2PPaymentConfig").config,productType:"p2p",saveButtonText:g._("Save"),showCancelButton:!0,text:g._("Please enter a Visa or MasterCard debit card. Credit cards can't be used."),title:g._("Add Debit Card"),width:b("MessengerEnvironment").messengerui?480:430};e.exports=a}),null);
__d("P2PConfirmAmountDialog.react",["fbt","MessengerEnvironment","P2PButton.react","P2PDialog.react","P2PDialogBody.react","P2PDialogFooter.react","P2PDialogTitle.react","P2PLoadingMask.react","P2PText.react","React","emptyFunction","prop-types"],(function(a,b,c,d,e,f,g){__p&&__p();var h=b("MessengerEnvironment").messengerui;a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={loading:!1},c.handleCancelClick=function(){c.props.onCancel()},c.handleConfirmClick=function(){c.setState({loading:!0}),c.props.onConfirm()},c.getFormattedAmount=function(){return c.props.currencySymbol+""+c.props.amount},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){var a=h?350:300;return b("React").jsxs(b("P2PDialog.react"),{behaviors:this.props.behaviors,layerHideOnBlur:!1,shown:!0,width:a,children:[b("React").jsx(b("P2PDialogTitle.react"),{showCloseButton:!1,children:g._("Confirm Payment")}),b("React").jsx(b("P2PDialogBody.react"),{children:b("React").jsx(b("P2PText.react"),{type:"primary",children:g._("Do you want to pay {recipient name} {amount}?",[g._param("recipient name",this.props.receiverName),g._param("amount",this.getFormattedAmount())])})}),b("React").jsxs(b("P2PDialogFooter.react"),{children:[b("React").jsx(b("P2PButton.react"),{label:g._("Cancel"),onClick:this.handleCancelClick,use:"default"}),b("React").jsx(b("P2PButton.react"),{label:g._("Pay"),onClick:this.handleConfirmClick,use:"confirm"})]}),b("React").jsx(b("P2PLoadingMask.react"),{visible:this.state.loading})]})};return c}(b("React").Component);a.propTypes={amount:(c=b("prop-types")).string,currencySymbol:c.string,onCancel:c.func,onConfirm:c.func,receiverName:c.string};a.defaultProps={amount:"",currencySymbol:"",onCancel:b("emptyFunction"),onConfirm:b("emptyFunction"),receiverName:c.string};e.exports=a}),null);
__d("P2PGroupSendContactListItem.react",["cx","fbt","ix","Image.react","Link.react","MessengerContactImageReact.bs","React"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=b("MessengerContactImageReact.bs").jsComponent,k=32;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.$1=function(a){return!a?null:b("React").jsx("div",{className:"_1jwz",children:b("React").jsx(b("Image.react"),{src:i("86852")})})};d.$2=function(a){return!this.props.isDisabled?null:b("React").jsx("div",{className:"_1jw-",children:h._("Isn't able to receive money right now")})};d.render=function(){var a,c=this.props,d=c.isSelected,e=c.participant;return(a=b("React")).jsxs(b("Link.react"),{"aria-checked":d,className:"_1jw_",onClick:c.onClick,role:"checkbox",children:[a.jsx(j,{className:"_1jx2",isMessengerUser:e.is_messenger_user,size:k,src:e.image_src}),a.jsxs("div",{className:"_1jx4",children:[a.jsxs("div",{className:"_1jx5",children:[a.jsx("div",{className:"_1jx6",children:e.name}),this.$2(e)]}),this.$1(d)]})]})};return c}(b("React").PureComponent);e.exports=a}),null);
__d("P2PGroupSendDialog.react",["cx","fbt","Image.react","MessengerContextualDialog.react","MessengerEnvironment","P2PActions","P2PLogger","P2PText.react","React","ScrollableArea.react","XUIContextualDialog.react","immutable","prop-types"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();c=b("React").createClass({displayName:"P2PGroupSendDialog",propTypes:{amount:(a=b("prop-types")).string,currency:a.string,flyoutAlignment:a.oneOf(["left","center","right"]),fromChatTab:a.bool,onToggle:a.func.isRequired,openRequestTab:a.bool,p2pEligibilities:a.object,participants:a.instanceOf(b("immutable").List),referrer:a.string,threadID:a.string.isRequired,threadFBID:a.string.isRequired},componentDidMount:function(){this.props.amount?this.log("UI_Actn_Initiate_Group_Send_Trigger",{raw_amount:this.props.amount,currency:this.props.currency}):this.log("UI_Actn_Initiate_Group_Send")},log:function(a,c){b("P2PLogger").log(a,babelHelpers["extends"]({www_event_flow:"UI_Flow_P2P_Group_Send"},c))},_handleToggle:function(a){this.props.onToggle(a),this.log("UI_Actn_Group_Send_Cancelled")},_handleBlur:function(){this._handleToggle(!1)},isP2PIneligible:function(a){var b=this.props.p2pEligibilities;return b?b[a.userID]===!1:!0},renderParticipantRow:function(a){var c=b("MessengerEnvironment").messengerui;c=c?32:40;var d=this.isP2PIneligible(a),e;d&&(e=b("React").jsx(b("P2PText.react"),{className:"_4cof",type:"primary",children:h._("Isn't able to receive money right now")}));return b("React").jsxs("li",{className:"_4cog"+(d?" _4coh":""),onClick:this.handleGroupThreadClicked.bind(this,a),children:[b("React").jsx("div",{className:"_4coi",children:b("React").jsx(b("Image.react"),{className:"_4coj",height:c,src:a.big_image_src||a.image_src,width:c})}),b("React").jsxs("div",{className:"_4cok",children:[b("React").jsx(b("P2PText.react"),{className:"_4col",type:"primary",children:a.name}),e]})]},a.id)},renderGroupList:function(){return b("React").jsx(b("ScrollableArea.react"),{height:178,children:b("React").jsx("ul",{children:this.props.participants?this.props.participants.map(this.renderParticipantRow):null})})},handleGroupThreadClicked:function(a){if(this.isP2PIneligible(a))return;this.props.onToggle(!1);b("P2PActions").chatSendViewOpened({amount:this.props.amount,openRequestTab:this.props.openRequestTab,referrer:this.props.referrer,threadID:this.props.threadID,groupSendRecipientUserIDs:[a.userID],groupThreadFBID:this.props.threadFBID,fromChatTab:this.props.fromChatTab});this.log("UI_Actn_Group_Send_Recipient_Picked",{raw_amount:this.props.amount,currency:this.props.currency,object_id:a.userID})},render:function(){var a=b("MessengerEnvironment").messengerui,c=a?b("MessengerContextualDialog.react"):b("XUIContextualDialog.react"),d=a?302:280;return b("React").jsx(c,{alignment:this.props.flyoutAlignment?this.props.flyoutAlignment:a?"right":"left",context:this.props.context,onBlur:this._handleBlur,onToggle:this._handleToggle,shown:!0,width:d,position:"above",children:b("React").jsxs("div",{className:"_4com"+(a?" _4con":""),children:[b("React").jsx(b("P2PText.react"),{className:"_4coo",type:"primary",weight:"bold",children:h._("Select a person")}),this.renderGroupList()]})})}});e.exports=c}),null);
__d("P2PGroupSendParticipantsPickerDialog.react",["cx","fbt","LeftRight.react","MessengerContextualDialog.react","MessengerDialogButton.react","MessengerEnvironment","P2PActions","P2PGroupSendContactListItem.react","P2PLogger","P2PText.react","React","ScrollableArea.react","XUIContextualDialog.react","immutable"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=5,j=5;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c){__p&&__p();var d;d=a.call(this,c)||this;d.isMessengerDotCom=b("MessengerEnvironment").messengerui;d.$8=function(){d.$9(!1)};d.$10=function(){var a=d.$5().map(function(a){return a.fbid});d.props.onToggle(!1);if(a.length===0)return;b("P2PActions").chatSendViewOpened({amount:d.props.amount,openRequestTab:d.props.openRequestTab,referrer:d.props.referrer,threadID:d.props.threadID,groupSendRecipientUserIDs:a,groupThreadFBID:d.props.threadFBID,fromChatTab:d.props.fromChatTab});d.$3("UI_Actn_Group_Send_Recipient_Picked",{raw_amount:d.props.amount,currency:d.props.currency,object_ids:a})};d.$9=function(a){d.props.onToggle(a),d.$3("UI_Actn_Group_Send_Cancelled")};d.$13=function(a){var c=a.fbid;return b("React").jsx(b("P2PGroupSendContactListItem.react"),{isDisabled:!d.$7(c),isSelected:d.$6(c),onClick:function(){return d.$11(c)},participant:a},a.id)};var e=c.participants.sort(d.$1),f=e.size>j;c=d.$2(e,c.p2pEligibilities);d.state={isParticipantChecked:f||c.size>0,participants:e.toArray(),isParticipantSelected:c};return d}var d=c.prototype;d.componentDidMount=function(){this.props.amount?this.$3("UI_Actn_Initiate_Group_Send_Trigger",{raw_amount:this.props.amount,currency:this.props.currency}):this.$3("UI_Actn_Initiate_Group_Send")};d.UNSAFE_componentWillReceiveProps=function(a){if(!this.state.isParticipantChecked){a=this.$2(a.participants,a.p2pEligibilities);this.setState({isParticipantChecked:a.size>0,isParticipantSelected:a})}};d.$4=function(){return this.state.isMessengerDotCom?b("MessengerContextualDialog.react"):b("XUIContextualDialog.react")};d.$5=function(){var a=this;return this.state.participants.filter(function(b){return a.$6(b.fbid)})};d.$7=function(a,b){if(!a)return!1;b=b||this.props.p2pEligibilities||{};return!!b[a]};d.$6=function(a){return!a?!1:!!this.state.isParticipantSelected.get(a)};d.$3=function(a,c){b("P2PLogger").log(a,babelHelpers["extends"]({www_event_flow:"UI_Flow_P2P_Group_Send"},c))};d.$11=function(a){if(!a||!this.$7(a))return;var b=this.state.isParticipantSelected,c=this.$6(a);this.setState({isParticipantSelected:b.set(a,!c)})};d.$1=function(a,b){return a.name.localeCompare(b.name)};d.$2=function(a,c){var d=this;if(a.size>j)return b("immutable").Map();var e=b("immutable").Map().withMutations(function(b){a.forEach(function(a){a=a.fbid;a&&d.$7(a,c)&&b.set(a,!0)})});return e};d.$12=function(){return this.state.participants.length<=i?b("React").jsx("ul",{className:"_3jwq",children:this.state.participants.map(this.$13)}):b("React").jsx(b("ScrollableArea.react"),{height:278,children:b("React").jsx("ul",{children:this.state.participants.map(this.$13)})})};d.$14=function(){var a=this.$5();return b("React").jsxs(b("LeftRight.react"),{className:"_4coo",children:[b("React").jsx(b("P2PText.react"),{tabIndex:0,type:"primary",weight:"bold",children:h._("Select People")}),b("React").jsx(b("MessengerDialogButton.react"),{className:"_3jwt",disabled:a.length===0,label:h._("Continue"),onClick:this.$10,type:"primary"})]})};d.render=function(){var a=this.$4(),c=this.isMessengerDotCom?"right":"left",d=this.isMessengerDotCom?302:280;return b("React").jsxs(a,{alignment:this.props.flyoutAlignment||c,className:"_4com"+(this.isMessengerDotCom?" _4con":""),context:this.props.context,position:"above",shown:!0,type:"default",width:d,onBlur:this.$8,onToggle:this.$9,children:[this.$14(),this.$12()]})};return c}(b("React").PureComponent);e.exports=a}),null);
__d("P2PMemoPhotoUploadPreview.react",["cx","BackgroundImage.react","MessengerEnvironment","P2PLoadingMask.react","React","XUICloseButton.react","prop-types"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.renderAttachedPhotoPreviewContent=function(){var a=d.props.attachedPhoto;if(!a||!a.url)return null;var c=b("MessengerEnvironment").messengerui?286:260;return b("React").jsx(b("BackgroundImage.react"),{backgroundSize:"cover",height:120,src:a.url,width:c})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){var a=this.props.attachedPhoto;return!this.props.photoUploading&&!a?null:b("React").jsxs("div",{className:"_y37",children:[this.renderAttachedPhotoPreviewContent(),b("React").jsx(b("P2PLoadingMask.react"),{visible:this.props.photoUploading}),b("React").jsx(b("XUICloseButton.react"),{className:"_y38",onClick:this.props.onRemoveButtonClick,shade:"light",size:"medium"})]})};return c}(b("React").Component);a.propTypes={attachedPhoto:b("prop-types").object,photoUploading:b("prop-types").bool,onRemoveButtonClick:b("prop-types").func};e.exports=a}),null);
__d("P2PMemoPhotoUploadSelector.react",["cx","fbt","FileInput","FileInputUploader","React","ReactDOM","prop-types"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i="/ajax/payments/p2p/memo_photo_upload/",j=1,k=29;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.fileInput=null,d.$1=null,d.handleFileInputChange=function(){if(d.fileInput&&d.fileInput.getValue()){var a=new(b("FileInputUploader"))(d.fileInput.getInput()).setAllowCrossPageTransition(!0).setURI(i);a.subscribe(["success","failure"],function(a,b){d.props.onPhotoUploadComplete(b.response)});a.setData({profile_id:j,source:k}).send();d.props.onPhotoUploadStart()}},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){var a=b("ReactDOM").findDOMNode(this.refs.PhotoInputContainer),c=b("ReactDOM").findDOMNode(this.refs.PhotoInputControl),d=b("ReactDOM").findDOMNode(this.refs.PhotoInput);this.fileInput=new(b("FileInput"))(a,c,d);this.$1=this.fileInput.subscribe("change",this.handleFileInputChange)};d.componentWillUnmount=function(){this.$1&&this.$1.unsubscribe()};d.render=function(){var a=h._("Add Photo");return b("React").jsx("div",{"aria-label":a,className:"_m _3h1u"+(this.props.photoUploading||this.props.attachedPhoto?" _3h1v":""),ref:"PhotoInputContainer",children:b("React").jsx("i",{className:"_3h1w",ref:"PhotoInputControl",children:b("React").jsx("input",{accept:"image/*",className:"_n",name:"file",ref:"PhotoInput",title:a,type:"file"})})})};return c}(b("React").Component);a.propTypes={attachedPhoto:(c=b("prop-types")).object,isUploading:c.bool,onPhotoUploadComplete:c.func.isRequired,onPhotoUploadStart:c.func.isRequired};e.exports=a}),null);
__d("P2PMemoField.react",["cx","fbt","ix","Image.react","MessengerEnvironment","P2PGKValues","P2PMemoPhotoUploadPreview.react","P2PMemoPhotoUploadSelector.react","React","prop-types"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={attachedPhoto:null,defaultValue:"",disabled:!1,focused:!1,isRequesting:!1,photoUploading:!1},d.handleChangeText=function(a){d.props.onTextChange(a.target.value)},d.handleImageClick=function(){d.refs.input.focus()},d.handleFocus=function(){d.setState({focused:!0})},d.handleBlur=function(){d.setState({focused:!1})},d.handlePhotoUploadStart=function(){d.setState({photoUploading:!0}),d.props.onPhotoUploadingChange(!0)},d.handlePhotoUploadComplete=function(a){a=a.payload||null;d.setState({attachedPhoto:a,photoUploading:!1});d.props.onPhotoChange(a?[a.fbid]:[]);d.props.onPhotoUploadingChange(!1)},d.handlePhotoRemove=function(){d.setState({attachedPhoto:null,photoUploading:!1}),d.props.onPhotoChange([]),d.props.onPhotoUploadingChange(!1)},d.getImageSrc=function(){var a=b("MessengerEnvironment").messengerui;if(d.state.focused)if(a)return i("94382");else return i("94384");else if(a)return i("94383");else return i("94385")},d.getPlaceholder=function(){return d.props.isRequesting?h._("What is this request for?"):h._("What is this payment for?")},d.shouldRenderPhotoMemo=function(){return b("P2PGKValues").P2PWWWMemoPhotoEnabled&&!d.props.isRequesting},d.renderPhotoUploadSelector=function(){return!d.shouldRenderPhotoMemo()?null:b("React").jsx("div",{className:"_1-j-",children:b("React").jsx(b("P2PMemoPhotoUploadSelector.react"),{attachedPhoto:d.state.attachedPhoto,photoUploading:d.state.photoUploading,onPhotoUploadComplete:d.handlePhotoUploadComplete,onPhotoUploadStart:d.handlePhotoUploadStart})})},d.renderPhotoUploadPreview=function(){return!d.shouldRenderPhotoMemo()?null:b("React").jsx(b("P2PMemoPhotoUploadPreview.react"),{attachedPhoto:d.state.attachedPhoto,photoUploading:d.state.photoUploading,onRemoveButtonClick:d.handlePhotoRemove})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){var a;return(a=b("React")).jsxs("div",{className:"_2z8p",children:[a.jsxs("div",{className:"_1-j_",children:[a.jsx(b("Image.react"),{className:"_2z8q",height:12,onClick:this.handleImageClick,src:this.getImageSrc(),width:12}),a.jsx("input",{className:"_2z8r",defaultValue:this.props.defaultValue,disabled:this.props.disabled,maxLength:36,onChange:this.handleChangeText,onBlur:this.handleBlur,onFocus:this.handleFocus,placeholder:this.getPlaceholder(),ref:"input"}),this.renderPhotoUploadSelector()]}),this.renderPhotoUploadPreview()]})};return c}(b("React").Component);a.propTypes={defaultValue:(c=b("prop-types")).string,disabled:c.bool,isRequesting:c.bool,onTextChange:c.func.isRequired,onPhotoChange:c.func.isRequired,onPhotoUploadingChange:c.func.isRequired};e.exports=a}),null);
__d("P2PMemoText.react",["cx","fbt","P2PText.react","React","prop-types"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return b("React").jsx("div",{className:"_4myt",children:b("React").jsx(b("P2PText.react"),{display:"inline",type:"primary",weight:"bold",children:h._("For: {Memo description}",[h._param("Memo description",b("React").jsx(b("P2PText.react"),{display:"inline",type:"secondary",weight:"normal",children:this.props.memoText}))])})})};return c}(b("React").Component);a.propTypes={memoText:b("prop-types").string.isRequired};e.exports=a}),null);
__d("P2PPasswordProtectionNUXDialog.react",["cx","fbt","Link.react","MessengerEnvironment","P2PAPI","P2PButton.react","P2PDialog.react","P2PDialogBody.react","P2PDialogFooter.react","P2PDialogTitle.react","P2PErrorDialog.react","P2PLinkConstants","P2PLoadingMask.react","P2PLogger","P2PText.react","React","emptyFunction","prop-types"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={saveErrorObject:null,loading:!1},d.log=function(a,c){b("P2PLogger").log(a,babelHelpers["extends"]({www_event_flow:"UI_Flow_P2P_Settings"},c))},d.onSaveClick=function(){d.setState({loading:!0,saveErrorObject:null}),d.setPasswordProtection(2),d.log("UI_Actn_Opt_In_Password_Protection_NUX")},d.setPasswordProtection=function(a){var c={};c.status=a;b("P2PAPI").setPasswordProtectionSetting({formData:c,success:d.handleOnSaveSuccess,error:d.handleOnSaveError})},d.handleOnSaveSuccess=function(){d.setState({loading:!1}),d.props.onComplete()},d.handleOnSaveError=function(a){d.setState({loading:!1,saveErrorObject:a})},d.isSaveButtonDisabled=function(){return d.state.loading},d.isCancelButtonDisabled=function(){return d.state.loading},d.onCancelClick=function(){d.setState({loading:!0,saveErrorObject:null}),d.setPasswordProtection(1),d.log("UI_Actn_Opt_Out_Password_Protection_NUX")},d.handleErrorBackClick=function(){d.setState({saveErrorObject:null})},d.handleErrorOKClick=function(){d.setState({saveErrorObject:null}),d.props.onComplete()},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.UNSAFE_componentWillMount=function(){this.log("UI_Actn_Initiate_Password_Protection_NUX")};d.render=function(){return this.state.saveErrorObject?b("React").jsx(b("P2PErrorDialog.react"),{allowBack:!0,title:h._("Problem Saving"),onBackClick:this.handleErrorBackClick,onOKClick:this.handleErrorOKClick,error:this.state.saveErrorObject}):b("React").jsxs(b("P2PDialog.react"),{className:b("MessengerEnvironment").messengerui?"_-el":"",behaviors:{LayerFadeOnShow:!1},layerHideOnBlur:!1,shown:!0,width:this.props.width,children:[b("React").jsx(b("P2PDialogTitle.react"),{showCloseButton:!1,children:h._("Use Password?")}),b("React").jsx(b("P2PDialogBody.react"),{children:b("React").jsx(b("P2PText.react"),{className:"_5sor",type:"primary",children:h._("For additional security, you can enter your Facebook password to send money. You can always update this in {link}.",[h._param("link",b("React").jsx(b("Link.react"),{href:b("P2PLinkConstants").settingsWWWURI,target:"_blank",children:h._("Settings")}))])})}),b("React").jsxs(b("P2PDialogFooter.react"),{children:[b("React").jsx(b("P2PButton.react"),{className:"_5sov",disabled:this.isCancelButtonDisabled(),label:h._("Not Now"),onClick:this.onCancelClick,size:"medium",use:"default"}),b("React").jsx(b("P2PButton.react"),{className:"_5sox",disabled:this.isSaveButtonDisabled(),label:h._("Use Password"),onClick:this.onSaveClick,size:"medium",use:"confirm"})]}),b("React").jsx(b("P2PLoadingMask.react"),{visible:this.state.loading})]})};return c}(b("React").Component);a.propTypes={onComplete:b("prop-types").func};a.defaultProps={onComplete:b("emptyFunction"),width:b("MessengerEnvironment").messengerui?320:300};e.exports=a}),null);
__d("intlAmountInputUtils",["NumberFormatConfig"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(a){a===void 0&&(a=!0),this.trailingDecimalSeparator=!1,this.trailingZeros=[!1,!1],this.allowDecimals=a}var c=a.prototype;c.parseAmount=function(a){__p&&__p();a=a.split(b("NumberFormatConfig").decimalSeparator);var c=a[0];a=a[1];this.trailingZeros=[!1,!1];a&&(a=a.substr(0,2),this.trailingZeros[0]=a[0]==="0",this.trailingZeros[1]=a[1]==="0");a===""?this.trailingDecimalSeparator=!0:this.trailingDecimalSeparator=!1;if(c&&!a)return parseFloat(c);else if(!c&&a)return parseFloat("0."+a);else if(c&&a)return parseFloat(c+"."+a);else return NaN};c.formatAmount=function(a){__p&&__p();if(Number.isNaN(a))return"";a=a.toString();a=a.split(".");var c=a[0];a=a[1];var d="";for(var e=c.length-1;e>=0;e--){d+=c[e];var f=c.length-e;f!==c.length&&f%(b("NumberFormatConfig").minDigitsForThousandsSeparator-1)===0&&(d+=b("NumberFormatConfig").numberDelimiter)}d=d.split("").reverse().join("");f=d;a?(f+=b("NumberFormatConfig").decimalSeparator+a,this.trailingZeros[1]&&(f+="0")):this.trailingZeros[0]?(f+=b("NumberFormatConfig").decimalSeparator+"0",this.trailingZeros[1]&&(f+="0")):this.trailingDecimalSeparator&&(f+=b("NumberFormatConfig").decimalSeparator);return f};c.formatAsDisplayAmount=function(a){var c=a.split(b("NumberFormatConfig").decimalSeparator)[1];if(c){if(c.length===1)return a+"0"}else if(c==="")return a.slice(0,a.length-1);return a};c.sanitizeAmount=function(a){var c;this.allowDecimals?c=new RegExp("[^\\d\\"+b("NumberFormatConfig").decimalSeparator+"]+","g"):c=new RegExp("[^\\d]+","g");return a.replace(c,"")};return a}();e.exports=new a()}),null);
__d("P2PSendMoneyAmountInput.react",["cx","fbt","Middot.react","NumberFormatConfig","React","XUIError.react","XUIGrayText.react","emptyFunction","intlAmountInputUtils","prop-types"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=200,j=32,k=1,l=Object.freeze({LEFT:37,RIGHT:39,DELETE:8,ZERO:48,NINE:57,NUMPADZERO:96,NUMPADNINE:105}),m=h._("Please enter a smaller amount"),n,o;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c){__p&&__p();var d;d=a.call(this,c)||this;d.$1=!1;d.focus=function(){var a,b=d.state.value;d.$1&&d.refs.textInput&&(a=d.refs.textInput,a.focus(),b?b=b.length:b=0,a.setSelectionRange(b,b))};d.handleCaretMoveOnMouseUp=function(a){a=d.refs.textInput;if(!a)return;if(typeof a.selectionStart==="number"&&typeof a.selectionEnd==="number"){var c=a.selectionStart,e=a.selectionEnd;d.state.value[c-1]===b("NumberFormatConfig").numberDelimiter&&c--;d.state.value[e-1]===b("NumberFormatConfig").numberDelimiter&&e--;a.setSelectionRange(c,e)}};d.handleCaretMoveOnKeyDown=function(a){__p&&__p();o=!1;var c=d.refs.textInput;if(!c)return;if(typeof c.selectionStart==="number"&&typeof c.selectionEnd==="number"){var e=c.selectionStart,f=c.selectionEnd;if(a.keyCode===l.LEFT)d.state.value[e-2]===b("NumberFormatConfig").numberDelimiter&&(a.preventDefault(),e===f?c.setSelectionRange(e-2,e-2):c.setSelectionRange(e-2,f));else if(a.keyCode===l.RIGHT)d.state.value[e]===b("NumberFormatConfig").numberDelimiter&&(a.preventDefault(),e===f?c.setSelectionRange(f+2,f+2):c.setSelectionRange(e,f+2));else if(a.keyCode===l.DELETE){o=!0;c=d.state.value.split(b("NumberFormatConfig").decimalSeparator);f=c[0];c=c[1];d.state.value[e-1]===b("NumberFormatConfig").decimalSeparator&&f.length%b("NumberFormatConfig").minDigitsForThousandsSeparator+c.length>=4?n=e:f.length>1&&e<=f.length&&f.length%b("NumberFormatConfig").minDigitsForThousandsSeparator===1?n=e-2:n=e-1}else if(a.keyCode>=l.ZERO&&a.keyCode<=l.NINE||a.keyCode>=l.NUMPADZERO&&a.keyCode<=l.NUMPADNINE){o=!0;c=d.state.value.split(b("NumberFormatConfig").decimalSeparator);f=c[0];(f.length+1)%b("NumberFormatConfig").minDigitsForThousandsSeparator===0?n=e+2:n=e+1}}};d.handleAmountInputChange=function(a){d.processAmount(a.target.value)};d.handleAmountInputBlur=function(a){a=a.target.value;var c=b("intlAmountInputUtils").formatAsDisplayAmount(a);c!==a&&d.setState({value:c},d.updateWidth)};d.updateWidth=function(){var a=d.getMockWidth();a&&d.setState(function(b){return{width:Math.min(a,b.maxInputWidth)}})};d.state={inputError:null,maxInputWidth:i,value:c.value,width:d.getMockWidth()};b("intlAmountInputUtils").allowDecimals=d.props.allowDecimals;return d}var d=c.prototype;d.componentDidMount=function(){this.$1=!0,this.processAmount(this.state.value),this.props.disabled||this.initDelayedFocus()};d.componentWillUnmount=function(){this.$1=!1};d.componentDidUpdate=function(a,b){o&&(this.refs.textInput.setSelectionRange(n,n),o=!1)};d.initDelayedFocus=function(){setTimeout(this.focus)};d.processAmount=function(a){a=b("intlAmountInputUtils").sanitizeAmount(a);a===b("NumberFormatConfig").decimalSeparator&&(a="0"+a);a=b("intlAmountInputUtils").parseAmount(a);var c=a<=this.props.maxAmount&&!Number.isNaN(a)&&a>0,d=Number.isNaN(a)||a<=this.props.maxAmount;this.props.onInputChange(Number.isNaN(a)?"":b("intlAmountInputUtils").formatAsDisplayAmount(a.toString()),c);c=b("intlAmountInputUtils").formatAmount(a);d?this.setState({value:c,inputError:null},this.updateWidth):this.setState({value:c,inputError:m},this.updateWidth)};d.getMockWidth=function(){var a=this.refs.mock_input;if(a)if(a.offsetWidth===0)return j;else return a.offsetWidth+k;else return 0};d.renderGroupRequestInformation=function(){if(this.props.receiversCount<=1)return null;var a=this.props.amountOffset;parseFloat(this.props.value)?a=Math.round(parseFloat(this.props.value)*this.props.receiversCount*a)/a:a=0;return b("React").jsxs(b("XUIGrayText.react"),{display:"block",size:"meta1",children:[h._("Per Person"),b("React").jsx(b("Middot.react"),{}),h._("{currency}{total} Total",[h._param("currency",this.props.currencySymbol),h._param("total",a)])]})};d.render=function(){var a,c=!this.state.value.length;c&&(a=b("React").jsx("div",{ref:"placeholder_input",className:"_1-sv",children:"0"}));return b("React").jsx("div",{className:"_ipw"+(this.props.isRequesting?" _1c9h":""),children:b("React").jsx("label",{children:b("React").jsxs("div",{className:"_4puh"+(c?" _1-sy":""),children:[a,b("React").jsx("div",{ref:"mock_input",className:"_5fbs",children:this.state.value}),b("React").jsx(b("XUIError.react"),{xuiError:this.state.inputError,children:b("React").jsx("span",{className:"_1-sz","data-currency-symbol":this.props.currencySymbol,children:b("React").jsx("input",{autoFocus:!0,className:"_5fbv",disabled:this.props.disabled,onBlur:this.handleAmountInputBlur,onChange:this.handleAmountInputChange,onKeyDown:this.handleCaretMoveOnKeyDown,onMouseUp:this.handleCaretMoveOnMouseUp,ref:"textInput",style:{width:this.state.width},value:this.state.value})})}),this.renderGroupRequestInformation()]})})})};return c}(b("React").Component);a.propTypes={allowDecimals:(c=b("prop-types")).bool.isRequired,amountOffset:c.number.isRequired,currencySymbol:c.string,disabled:c.bool,isRequesting:c.bool,maxAmount:c.number.isRequired,onInputChange:c.func.isRequired,receiversCount:c.number,value:c.string};a.defaultProps={currencySymbol:"$",disabled:!1,isRequesting:!1,maxAmount:9999.99,onInputChange:b("emptyFunction"),receiversCount:1,value:""};e.exports=a}),null);
__d("P2PPaymentPhasesQueryWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"1864738660245468"};b.getQueryID=function(){return"346225005861160"};return b}(b("WebGraphQLQueryBase"))}),null);
__d("P2PPaymentSupportedCountry",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({US:"US",PE:"PE",PH:"PH",TH:"TH",VN:"VN",FB:"FB"})}),null);
__d("P2PSendMoneyDialogActionHeader.react",["cx","fbt","React","ShimButton.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.renderPayTab=function(){if(this.props.isPayTabDisabled)return null;var a=this.props.isPaying;return b("React").jsx(b("ShimButton.react"),{className:"_50cx"+(a?" _50cy":""),onClick:this.props.onPayClick,children:h._("Pay")})};d.renderRequestTab=function(){if(this.props.isRequestTabDisabled)return null;var a=this.props.isRequesting;return b("React").jsx(b("ShimButton.react"),{className:"_50cx"+(a?" _50cy":""),onClick:this.props.onRequestClick,children:h._("Request")})};d.render=function(){var a=!!this.props.isPayTabDisabled,c=!!this.props.isRequestTabDisabled;return b("React").jsxs("div",{className:"_50cr"+(a||c?" _3b-h":"")+(this.props.isPaying?" _50cv":"")+(this.props.isRequesting?" _50cw":""),children:[this.renderPayTab(),this.renderRequestTab(),b("React").jsx("div",{className:"_50c_"})]})};return c}(b("React").Component);e.exports=a}),null);
__d("P2PSendMoneyDialog.react",["cx","fbt","Arbiter","Image.react","ImageBlock.react","Link.react","MessengerContactImage.react","MessengerContextualDialog.react","MessengerEnvironment","MessengerHorizontalScroll.react","P2PAddCreditCardDialog.react","P2PAPI","P2PBigAmount.react","P2PButton.react","P2PChooseCreditCardForm.react","P2PConfirmAmountDialog.react","P2PCreditCardStore","P2PDialog.react","P2PDialogTitle.react","P2PEditCreditCardDialog.react","P2PGKValues","P2PLinkConstants","P2PLoadingMask.react","P2PLogger","P2PMemoField.react","P2PMemoText.react","P2PSendMoneyAmountInput.react","P2PSendMoneyDialogActionHeader.react","P2PText.react","P2PVerifyCreditCardDialog.react","PaymentSettingsStringUtils","PECurrency","React","ReactLayeredComponentMixin_DEPRECATED","XUIContextualDialog.react","XUISpinner.react","cxMargin","immutable","prop-types"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("MessengerEnvironment").messengerui,j=b("P2PGKValues").P2PRequestMoneyEnabled,k=h._("Change"),l=h._("Add Debit Card"),m=100;c=b("React").createClass({displayName:"P2PSendMoneyDialog",mixins:[b("ReactLayeredComponentMixin_DEPRECATED")],refs_add_card_next_button:null,refs_back_button:null,refs_choose_card_next_button:null,refs_choose_credit_card_form:null,refs_request_button:null,refs_send_button:null,refs_send_money_amount_input:null,refs_send_money_dialog_add_card_next_text:null,refs_send_money_dialog_add_card_text:null,refs_send_money_dialog_add_credit_card_form:null,refs_send_money_dialog_loader:null,refs_send_money_dialog_title:null,propTypes:{amount:(a=b("prop-types")).string.isRequired,currency:a.string.isRequired,currencySymbol:a.string.isRequired,groupThreadFBID:a.string,flyoutAlignment:a.oneOf(["left","center","right"]),openRequestTab:a.bool,memoText:a.string,onError:a.func.isRequired,onPaymentRequestError:a.func.isRequired,onPaymentRequestSuccess:a.func.isRequired,onSendSuccess:a.func.isRequired,onToggle:a.func.isRequired,platformData:a.object,receivers:a.instanceOf(b("immutable").List).isRequired,referrer:a.string,paymentRequestID:a.string,position:a.oneOf(["above","below","left","right"]),p2pEligibilities:a.object,p2pPaymentConfig:a.shape({currencyCode:a.string.isRequired,enabledActions:a.object.isRequired,enabledPaymentMethods:a.object.isRequired,maxTransferAmount:a.number.isRequired,title:a.string,use_payment_module_method_picker:a.bool,countryCode:a.string.isRequired,postalRegex:a.string.isRequired}).isRequired,useModal:a.bool},getDefaultProps:function(){return{amount:"",openRequestTab:!1,receivers:b("immutable").List(),useModal:!1}},getInitialState:function(){var a=b("P2PCreditCardStore").getAll(),c=this.props.openRequestTab||this.isGroupRequest();return{asyncRequestState:b("P2PCreditCardStore").getAsyncRequestState(),addCreditCardDialogShown:!1,amount:this.props.amount,creditCardsFetchError:b("P2PCreditCardStore").failedCreditCardFetch(),creditCards:a,confirmAmountDialogShown:!1,isAmountValid:!!this.props.paymentRequestID,isCreditCardsFetchComplete:b("P2PCreditCardStore").isCreditCardsFetchComplete(),isMemoPhotoUploading:!1,isPaying:!c,isRequesting:c,loading:!1,memoText:this.props.memoText,memoPhotoIDs:[],selectedCard:a[0],showChooseCreditCardForm:!1,verifyCreditCardDialogShown:!1}},creditCardStoreSub:null,_isAmountVerified:!1,passwordCancelSubscribeToken:null,_isMounted:!1,getDialogWidth:function(){return this.props.useModal?i?380:312:i?286:260},getEventFlow:function(){return this.props.paymentRequestID||this.isRequesting()?"UI_Flow_P2P_Request":"UI_Flow_P2P_Send"},getLogObjectIDs:function(){var a=this.props.receivers;if(a.size>1)return{object_ids:a.map(function(a){return a.userID}).join(",")};a=a.get(0)||{};return{object_id:a.userID}},log:function(a,c){var d=this.getLogObjectIDs();b("P2PLogger").log(a,babelHelpers["extends"]({www_event_flow:this.getEventFlow(),memo_text:this.state.memoText,request_id:this.props.paymentRequestID},this.getPlatformLoggingData(),c,this.getReferrer(),d))},componentDidMount:function(){this._isMounted=!0},componentWillUnmount:function(){this._isMounted=!1,this.passwordCancelSubscribeToken&&(b("Arbiter").unsubscribe(this.passwordCancelSubscribeToken),this.passwordCancelSubscribeToken=null),this.creditCardStoreSub&&(this.creditCardStoreSub.remove(),this.creditCardStoreSub=null)},UNSAFE_componentWillMount:function(){this.creditCardStoreSub=b("P2PCreditCardStore").addListener("change",this.onCreditCardStoreChange),this.log("UI_Actn_Initiate_Send"),b("P2PGKValues").P2PDisabledReason?this.log("UI_Actn_P2P_Sender_Disabled_Shown"):this.isRecipientIneligible()&&this.log("UI_Actn_P2P_Recipient_Ineligible_Shown")},getPlatformLoggingData:function(){var a=this.props.platformData&&this.props.platformData.loggingData;return a?{platform_logging_data:a}:null},getReferrer:function(){var a=this.props.referrer;return a?{www_event_referrer:a}:null},onAmountInputChange:function(a,b){this.setState({amount:a,isAmountValid:b})},onCreditCardStoreChange:function(){var a=this,c=b("P2PCreditCardStore").getAll(),d;this.state.selectedCard&&(d=c.filter(function(b){return b.getCredentialId()===a.state.selectedCard.getCredentialId()})[0]);d||(d=c[0]);this.setState({asyncRequestState:b("P2PCreditCardStore").getAsyncRequestState(),creditCards:c,isCreditCardsFetchComplete:b("P2PCreditCardStore").isCreditCardsFetchComplete(),selectedCard:d,creditCardsFetchError:b("P2PCreditCardStore").failedCreditCardFetch()})},shouldShowConfirmAmountDialog:function(){var a=this.state.amount;a=a?a.replace(/\,/g,""):"";a=parseFloat(a);return!this._isAmountVerified&&a>=m},shouldShowVerifyCreditCardDialog:function(){return!this.state.selectedCard.getIsVerified()},shouldShowEditCreditCardDialog:function(){return this.state.selectedCard.isExpired()},handleSendClick:function(){if(this.isSendButtonDisabled())return;this.log("UI_Actn_Send_Clicked",{raw_amount:this.state.amount,currency:this.props.currency});this._isAmountVerified=!1;this.initiatePayment()},handleRequestClick:function(){if(this.isRequestButtonDisabled())return;this.log("UI_Actn_Request_Clicked",{raw_amount:this.state.amount,currency:this.props.currency});this.createPaymentRequest()},initiatePayment:function(){__p&&__p();if(this.shouldShowConfirmAmountDialog()){this.hideAllDialogs();this.setState({confirmAmountDialogShown:!0});this.log("UI_Actn_Confirm_Amount",{raw_amount:this.state.amount,currency:this.props.currency});return}else if(this.shouldShowEditCreditCardDialog()){this.hideAllDialogs();this.setState({editCreditCardDialogShown:!0});this.log("UI_Actn_Edit_Card",{raw_amount:this.state.amount,currency:this.props.currency});return}else if(this.shouldShowVerifyCreditCardDialog()){this.hideAllDialogs();this.setState({verifyCreditCardDialogShown:!0});this.log("UI_Actn_Verify_CSC",{raw_amount:this.state.amount,currency:this.props.currency});return}this.createTransaction()},isGroupRequest:function(){return this.props.receivers.size>1},isPayingForRequest:function(){return!!this.props.paymentRequestID},isPaying:function(){return this.state.isPaying===!0},isRequesting:function(){return this.state.isRequesting===!0},shouldShowLoading:function(){return!this.state.addCreditCardDialogShown&&!this.state.confirmAmountDialogShown&&!this.state.verifyCreditCardDialogShown&&!this.state.editCreditCardDialogShown},createTransaction:function(){__p&&__p();var a={},c=this.props.receivers.get(0)||{};this.setState({loading:this.shouldShowLoading()});a.credential_id=this.state.selectedCard.getCredentialId();a.amount=this.state.amount;a.receiverId=c.userID;a.memoText=this.state.memoText;a.memoPhotoIDs=this.state.memoPhotoIDs;a.paymentRequestID=this.props.paymentRequestID;this.props.groupThreadFBID&&(a.group_thread_fbid=this.props.groupThreadFBID);this.props.platformData&&(a.platform_context_id=this.props.platformData.platformContextID);this.passwordCancelSubscribeToken=b("Arbiter").subscribeOnce("PasswordReauthDialogCancelClick",this.handlePasswordReauthDialogCancelClick);b("P2PAPI").createTransaction({formData:a,error:this.setCreateTransferError,success:this.setCreateTransferSuccess});this.log("UI_Actn_Confirm_Send",{raw_amount:this.state.amount,currency:this.props.currency})},createPaymentRequest:function(){this.setState({loading:this.shouldShowLoading()});var a=this.props.platformData||{};b("P2PAPI").createPaymentRequest({formData:{amount:this.state.amount,memoText:this.state.memoText,group_thread_fbid:this.props.groupThreadFBID,requestees:this.props.receivers,platform_context_id:a.platformContextID},error:this.setCreatePaymentRequestError,success:this.setCreatePaymentRequestSuccess});this.log("UI_Actn_Confirm_Request",{raw_amount:this.state.amount,currency:this.props.currency})},hideAllDialogs:function(){this.setState({addCreditCardDialogShown:!1,confirmAmountDialogShown:!1,verifyCreditCardDialogShown:!1,editCreditCardDialogShown:!1})},isDialogShowing:function(){return!!(this.state.addCreditCardDialogShown||this.state.confirmAmountDialogShown||this.state.verifyCreditCardDialogShown||this.state.editCreditCardDialogShown)},setCreateTransferError:function(a){this._isMounted&&(this.hideAllDialogs(),this.setState({loading:!1})),this.props.onError(a),this.log("UI_Actn_Send_Fail")},setCreateTransferSuccess:function(a){this._isMounted&&(this.setState({loading:!1}),this.hideAllDialogs()),this.props.onSendSuccess(a),this.log("UI_Actn_Send_Success")},setCreatePaymentRequestError:function(a){this._isMounted&&(this.hideAllDialogs(),this.setState({loading:!1})),this.props.onPaymentRequestError(a.error),this.log("UI_Actn_Request_Fail")},setCreatePaymentRequestSuccess:function(a){this._isMounted&&(this.setState({loading:!1}),this.hideAllDialogs()),this.props.onPaymentRequestSuccess(),this.log("UI_Actn_Request_Success",{request_id:a.id})},handlePasswordReauthDialogCancelClick:function(){this.passwordCancelSubscribeToken=null,this.setState({loading:!1}),this.hideAllDialogs()},onAddCreditCardCancel:function(){this.setState({addCreditCardDialogShown:!1})},onAddCreditCardSuccess:function(a){var c=this,d=b("P2PCreditCardStore").getAll();d=d.filter(function(b){b=b.getCredentialId();return a.credential_id===b})[0];this.setState({selectedCard:d},function(){c.state.isAmountValid?c.initiatePayment():(c.setState({addCreditCardDialogShown:!1}),c.focusAmountInput())})},onEditCreditCardSuccess:function(){this.initiatePayment()},onEditCreditCardCancel:function(){this.setState({editCreditCardDialogShown:!1})},focusAmountInput:function(){this.refs_send_money_amount_input&&this.refs_send_money_amount_input.focus()},_handleToggle:function(a){this.props.onToggle(a),this.state.loading||this.log("UI_Actn_Send_Money_Cancelled")},_handleBlur:function(){this._handleToggle(!1)},handleAddCreditCardClick:function(){this.setState({addCreditCardDialogShown:!0,showChooseCreditCardForm:!1}),this.log("UI_Actn_Change_Card")},handleBackClick:function(){var a=this;this.setState({showChooseCreditCardForm:!1},function(){a.focusAmountInput()})},handleChooseCardNextClick:function(){var a=this,b=this.refs_choose_credit_card_form.getSelectedCard();this.setState({selectedCard:b,showChooseCreditCardForm:!1},function(){a.focusAmountInput()})},handleAddCardNextClick:function(){this.setState({addCreditCardDialogShown:!0})},handleChangeSelectedCardClick:function(){var a={};this.state.creditCards.length===1?(a.addCreditCardDialogShown=!0,this.log("UI_Actn_Change_Card")):(a.showChooseCreditCardForm=!0,this.log("UI_Actn_Initiate_Choose_Card"));this.setState(a)},onConfirmAmountCancel:function(){this.setState({confirmAmountDialogShown:!1})},onConfirmAmountSuccess:function(){this._isAmountVerified=!0,this.initiatePayment()},onVerifyCreditCardSuccess:function(){this.initiatePayment()},onVerifyCreditCardCancel:function(){this.setState({verifyCreditCardDialogShown:!1})},handleMemoTextChange:function(a){this.setState({memoText:a})},handleMemoPhotoChange:function(a){this.setState({memoPhotoIDs:a})},handleMemoPhotoUploadingChange:function(a){this.setState({isMemoPhotoUploading:a})},isSendButtonDisabled:function(){return!this.state.isAmountValid||!this.state.creditCards.length||this.state.loading||this.state.isMemoPhotoUploading||this.isGroupRequest()},isRequestButtonDisabled:function(){return!this.state.isAmountValid||this.state.loading},isAddCardNextButtonDisabled:function(){return!this.state.isAmountValid},renderAddDebitCardLink:function(){var a=this;return b("React").jsx(b("P2PText.react"),{className:"_42h3",type:"secondary",ref:function(b){return a.refs_send_money_dialog_add_card_text=b},children:b("React").jsx(b("Link.react"),{className:"_49nm",href:"#",onClick:this.handleAddCreditCardClick,children:l})})},renderSelectedCard:function(){var a,c=this.state.selectedCard;return(a=b("React")).jsxs(b("P2PText.react"),{className:"_21x5",size:"small",type:"primary",children:[a.jsx("div",{className:"_49nn",children:c.getName()}),a.jsx("div",{className:"_21wx",children:c.getCreditCardNumberFormatted()}),a.jsx("div",{className:"_21ww",children:"\xb7"}),a.jsx(b("Link.react"),{className:"_21wy",onClick:this.handleChangeSelectedCardClick,href:"#",children:k})]})},renderFormButtons:function(){var a=this,c,d=i&&this.props.useModal?b("React").jsx(b("P2PButton.react"),{label:h._("Cancel"),onClick:function(){a._handleToggle(!1)},type:"secondary"}):null;this.isRequesting()?c=b("React").jsxs("div",{children:[d,this.renderRequestButton()]}):!this.state.creditCards.length?c=b("React").jsxs("div",{children:[d,this.renderAddCardNextButton()]}):this.state.showChooseCreditCardForm?c=b("React").jsxs("div",{children:[this.renderChooseCardBackButton(),this.renderChooseCardNextButton()]}):c=b("React").jsxs("div",{children:[d,this.renderPayButton()]});return c},renderChooseCardBackButton:function(){var a=this;return b("React").jsx(b("P2PButton.react"),{label:h._("Back"),onClick:this.handleBackClick,ref:function(b){return a.refs_back_button=b},size:"medium",type:"secondary",use:"default"})},renderAddCardNextButton:function(){var a=this;return b("React").jsx(b("P2PButton.react"),{disabled:this.isAddCardNextButtonDisabled(),label:h._("Next"),onClick:this.handleAddCardNextClick,ref:function(b){return a.refs_add_card_next_button=b},size:"medium",type:"primary",use:"default"})},renderChooseCardNextButton:function(){var a=this;return b("React").jsx(b("P2PButton.react"),{label:h._("Next"),onClick:this.handleChooseCardNextClick,ref:function(b){return a.refs_choose_card_next_button=b},size:"medium",type:"primary",use:"confirm"})},renderPayButton:function(){var a=this;return b("React").jsx(b("P2PButton.react"),{disabled:this.isSendButtonDisabled(),label:h._("Pay"),onClick:this.handleSendClick,ref:function(b){return a.refs_send_button=b},size:"medium",type:"primary",use:"confirm"})},renderRequestButton:function(){var a=this;return b("React").jsx(b("P2PButton.react"),{disabled:this.isRequestButtonDisabled(),label:h._("Request"),onClick:this.handleRequestClick,ref:function(b){return a.refs_request_button=b},size:"medium",type:"primary",use:"confirm"})},renderPaymentDetails:function(){var a=this,c;if(this.isRequesting())return null;this.state.creditCards.length?this.state.showChooseCreditCardForm?c=this.renderAddDebitCardLink():c=this.renderSelectedCard():this.state.creditCardsFetchError?c=b("React").jsx("div",{className:"_2abl",children:b("React").jsx(b("P2PText.react"),{type:"secondary",ref:function(b){return a.refs_send_money_dialog_add_card_next_text=b},children:h._("Sorry, we couldn't fetch your details. Please check your internet connection or refresh this page and try again.")})}):c=b("React").jsx("div",{className:"_2abl",children:b("React").jsx(b("P2PText.react"),{type:"secondary",ref:function(b){return a.refs_send_money_dialog_add_card_next_text=b},children:h._("Sending money is free and secure")})});return c},isRecipientIneligible:function(){var a=this.props.p2pEligibilities;if(!a||this.props.receivers.size===0)return!1;var b=this.props.receivers.find(function(b){return!a[b.userID]});return!!b},isDialogDisabled:function(){return!!(b("P2PGKValues").P2PDisabledReason||this.isRecipientIneligible())},renderDisabledText:function(){__p&&__p();if(!this.isDialogDisabled())return null;var a=b("P2PGKValues").P2PDisabledReason;if(a)return b("PaymentSettingsStringUtils").getP2PDisabledText(a);if(this.isRecipientIneligible()){a=this.props.receivers.get(0)||{};a=a.short_name||"";return h._("{receiverName} isn't able to receive money right now. {Learn more about p2p link}",[h._param("receiverName",a),h._param("Learn more about p2p link",b("React").jsx(b("Link.react"),{href:b("P2PLinkConstants").receiverIneligibleHelpURI,target:"_blank",children:h._("Learn More.")}))])}return b("PaymentSettingsStringUtils").getGeneralP2PDisabledText()},renderFooter:function(){var a;this.isDialogDisabled()?a=b("React").jsx(b("P2PText.react"),{className:"_2pi8",type:"secondary",children:this.renderDisabledText()}):!this.state.isCreditCardsFetchComplete?a=b("React").jsx("div",{className:"_2-vg",children:b("React").jsx(b("XUISpinner.react"),{className:"_2-vh"})}):a=[b("React").jsx("div",{className:"_21x4",children:this.renderPaymentDetails()},"paymentDetails"),b("React").jsx("div",{className:"_4zf-",children:this.renderFormButtons()},"formButtons")];return b("React").jsx("div",{className:"_5p-k",children:a})},renderMemo:function(){var a=this.isPayingForRequest(),c=this.props.memoText||this.state.memoText;if(a&&!c)return null;return a&&c?b("React").jsx("div",{className:"_5exl",children:b("React").jsx(b("P2PMemoText.react"),{memoText:c})}):b("React").jsx("div",{className:"_5exl",children:b("React").jsx(b("P2PMemoField.react"),{defaultValue:c,disabled:this.isDialogDisabled(),isRequesting:this.isRequesting(),onTextChange:this.handleMemoTextChange,onPhotoChange:this.handleMemoPhotoChange,onPhotoUploadingChange:this.handleMemoPhotoUploadingChange})})},renderSendMoneyForm:function(){return b("React").jsxs("div",{children:[this.renderTitle(),b("React").jsx("div",{className:"_2abm",children:this.renderMainContainer()}),this.renderMemo(),b("React").jsx("div",{className:"_21w-"+(this.isDialogDisabled()?" _3orf":"")+(i?" _4eb_":""),children:this.renderFooter()})]})},renderMainContainer:function(){var a=this,c,d=this.state.amount,e=this.isPayingForRequest(),f=this.props.p2pPaymentConfig,g=b("PECurrency").getCurrencyOffset(f.currencyCode)||1,h=f.maxTransferAmount/g;this.state.showChooseCreditCardForm?c=b("React").jsx("div",{className:"_xn7",children:b("React").jsx(b("P2PChooseCreditCardForm.react"),{creditCards:this.state.creditCards,selectedCard:this.state.selectedCard,ref:function(b){return a.refs_choose_credit_card_form=b}})}):(!e?g=b("React").jsx(b("P2PSendMoneyAmountInput.react"),{amountOffset:g,currencySymbol:this.props.currencySymbol,disabled:this.isDialogDisabled(),allowDecimals:g===100,isRequesting:this.isRequesting(),maxAmount:h,onInputChange:this.onAmountInputChange,receiversCount:this.props.receivers.size,ref:function(b){return a.refs_send_money_amount_input=b},value:d}):g=b("React").jsx(b("P2PBigAmount.react"),{amount:d,className:"_3oh-",currencyCode:f.currencyCode,size:"large"}),c=b("React").jsx("div",{className:"_2abn"+(e?" _74p":""),children:g}));return c},renderActionText:function(){return this.isRequesting()?h._("Send request to"):h._("Send to")},renderActionToggleHeader:function(){var a=this,c=this.isPaying(),d=this.isRequesting();return this.isPayingForRequest()||!j?null:b("React").jsx("div",{className:"_4uvi",children:b("React").jsx(b("P2PSendMoneyDialogActionHeader.react"),{isPayTabDisabled:this.isGroupRequest()||!this.props.p2pPaymentConfig.enabledActions.send,isRequestTabDisabled:!this.props.p2pPaymentConfig.enabledActions.request,isPaying:c,isRequesting:d,onPayClick:function(){if(a.isPaying())return;a.setState({isPaying:!0,isRequesting:!1},function(){a.focusAmountInput(),a.log("UI_Actn_Initiate_Send")})},onRequestClick:function(){a.isRequesting()||a.setState({isPaying:!1,isRequesting:!0},function(){a.focusAmountInput(),a.log("UI_Actn_Initiate_Request")})}})})},renderLayers:function(){var a=this,c={},d=this.props.receivers.get(0)||{};d=d.short_name;var e,f,g;this.props.useModal&&(g={LayerFadeOnShow:!1});this.state.addCreditCardDialogShown?(this.state.isAmountValid&&(f=h._("Please enter a debit card to send {Amount} to {Recipient name}. Credit cards can't be used.",[h._param("Amount",this.props.currencySymbol+this.state.amount),h._param("Recipient name",d)]),e=h._("Pay")),c.addCreditCard=b("React").jsx(b("P2PAddCreditCardDialog.react"),{behaviors:g,eventFlow:this.getEventFlow(),loggingData:this.getPlatformLoggingData(),onCancel:this.onAddCreditCardCancel,onSuccess:this.onAddCreditCardSuccess,ref:function(b){return a.refs_send_money_dialog_add_credit_card_form=b},saveButtonText:e,showCancelButton:!!i,text:f})):this.state.confirmAmountDialogShown?c.confirmAmount=b("React").jsx(b("P2PConfirmAmountDialog.react"),{amount:this.state.amount,behaviors:g,currencySymbol:this.props.currencySymbol,onCancel:this.onConfirmAmountCancel,onConfirm:this.onConfirmAmountSuccess,receiverName:d}):this.state.verifyCreditCardDialogShown?c.verifyCreditCard=b("React").jsx(b("P2PVerifyCreditCardDialog.react"),{asyncRequestState:this.state.asyncRequestState,behaviors:g,creditCard:this.state.selectedCard,isSending:!0,onCancel:this.onVerifyCreditCardCancel,onSuccess:this.onVerifyCreditCardSuccess}):this.state.editCreditCardDialogShown&&(c.confirmAmount=b("React").jsx(b("P2PEditCreditCardDialog.react"),{asyncRequestState:this.state.asyncRequestState,behaviors:g,creditCard:this.state.selectedCard,onCancel:this.onEditCreditCardCancel,onSuccess:this.onEditCreditCardSuccess}));return c},renderIneligibleMask:function(){return!this.isDialogDisabled()?null:b("React").jsx("div",{className:"_3org"})},renderReceiverImage:function(a){var c=i?32:40;return b("React").jsx(b("MessengerContactImage.react"),{size:c,src:a.big_image_src||a.image_src},a.userID)},renderSingleRecipient:function(){var a=this,c=i?32:40,d=this.props.receivers.get(0)||{};return b("React").jsxs("div",{className:"_49no",ref:function(b){return a.refs_send_money_dialog_title=b},children:[b("React").jsxs(b("ImageBlock.react"),{spacing:"large",children:[b("React").jsx(b("Image.react"),{className:"_5p-i",height:c,src:d.big_image_src||d.image_src,width:c}),b("React").jsxs("div",{className:"_3-8w",children:[b("React").jsx(b("P2PText.react"),{type:"secondary",children:this.renderActionText()}),b("React").jsx(b("P2PText.react"),{className:"_5p-j",size:"small",type:"primary",weight:"bold",children:d.name})]})]}),b("React").jsx(b("Link.react"),{className:"_49np",href:b("P2PLinkConstants").helpCenterURI,target:"_blank","aria-label":h._("Help")})]})},renderTitle:function(){var a=this;if(this.props.receivers.size===1)return this.renderSingleRecipient();var c=i?32:40,d=12;return b("React").jsx("div",{className:"_49no",ref:function(b){return a.refs_send_money_dialog_title=b},children:b("React").jsx(b("MessengerHorizontalScroll.react"),{childPadding:8,childWidth:c,freeScroll:!0,width:this.getDialogWidth()-d*2,children:this.props.receivers.map(this.renderReceiverImage)})})},render:function(){var a=this,c,d=null,e={};if(this.props.useModal&&this.isDialogShowing())return null;this.props.useModal?(c=b("P2PDialog.react"),d=b("React").jsx(b("P2PDialogTitle.react"),{className:"_30wi",children:h._("Confirm Payment")}),e={layerHideOnBlur:!1}):(c=i?b("MessengerContextualDialog.react"):b("XUIContextualDialog.react"),e={alignment:this.props.flyoutAlignment?this.props.flyoutAlignment:i?"right":"left",context:this.props.context,position:this.props.position||"above",onBlur:this._handleBlur});return b("React").jsx(c,babelHelpers["extends"]({onToggle:this._handleToggle,shown:!0,width:this.getDialogWidth()},e,{children:b("React").jsxs("div",{className:"_21x9"+(i?" _1pka":"")+(j?" _4uvl":"")+(this.props.useModal?" _35wt":""),children:[d,this.renderActionToggleHeader(),this.renderSendMoneyForm(),this.renderIneligibleMask(),b("React").jsx(b("P2PLoadingMask.react"),{ref:function(b){return a.refs_send_money_dialog_loader=b},visible:this.state.loading})]})}))}});e.exports=c}),null);
__d("P2PNUXFooter.react",["cx","LeftRight.react","P2PEncryptedText.react","P2PNUXNextButton.react","React","prop-types"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a;return(a=b("React")).jsxs(b("LeftRight.react"),{children:[a.jsx("div",{className:"_2pic",children:a.jsx(b("P2PEncryptedText.react"),{})}),a.jsx(b("P2PNUXNextButton.react"),{onNextClick:this.props.onNextClick})]})};return c}(b("React").Component);a.propTypes={onNextClick:b("prop-types").func.isRequired};e.exports=a}),null);
__d("P2PSendMoneyNUXTitle.react",["cx","fbt","P2PSendMoneyNUXTitleText.react","P2PText.react","React"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a;return(a=b("React")).jsxs("div",{className:"_4fz1",children:[a.jsx(b("P2PText.react"),{size:"medium",type:"primary",children:a.jsx(b("P2PSendMoneyNUXTitleText.react"),{})}),a.jsx(b("P2PText.react"),{type:"secondary",children:h._("Split dinner, pay rent or anything else")})]})};return c}(b("React").Component);e.exports=a}),null);
__d("P2PSendMoneyNUXContextualDialog.react",["cx","MessengerContextualDialog.react","MessengerEnvironment","P2PLogger","P2PNUXFooter.react","P2PSendMoneyNUXListItems.react","P2PSendMoneyNUXTitle.react","React","XUIContextualDialog.react","prop-types"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.log=function(a,c){b("P2PLogger").log(a,babelHelpers["extends"]({www_event_flow:"UI_Flow_P2P_Send"},d.props.loggingData,c))},d.handleNextClick=function(){d.log("UI_Actn_Send_Money_NUX_Next_Click"),d.props.onNextClick()},d.$1=function(a){d.props.onToggle(a)},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){this.log("UI_Actn_Send_Money_NUX_Shown")};d.render=function(){var a=this,c=b("MessengerEnvironment").messengerui?b("MessengerContextualDialog.react"):b("XUIContextualDialog.react");return b("React").jsx(c,{alignment:this.props.flyoutAlignment,context:this.props.context,contextRef:this.props.contextRef,onBlur:function(){return a.$1(!1)},onToggle:this.$1,position:this.props.position,shown:!0,width:this.props.width,children:b("React").jsxs("div",{className:"_56i7",children:[b("React").jsx("div",{className:"_56jc",children:b("React").jsx(b("P2PSendMoneyNUXTitle.react"),{})}),b("React").jsx("div",{className:"_56jd",children:b("React").jsx(b("P2PSendMoneyNUXListItems.react"),{})}),b("React").jsx(b("P2PNUXFooter.react"),{onNextClick:this.handleNextClick})]})})};return c}(b("React").Component);a.propTypes={loggingData:(c=b("prop-types")).object,onNextClick:c.func.isRequired,onToggle:c.func.isRequired,width:c.number};a.defaultProps=function(){var a=b("MessengerEnvironment").messengerui;return{flyoutAlignment:a?"right":"left",position:"above",width:a?286:260}}();e.exports=a}),null);
__d("P2PSuccessDialog.react",["fbt","ix","Image.react","LayerSlowlyFadeOnShow","MessengerEnvironment","P2PConfirmationDialog.react","React","emptyFunction","prop-types"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.getImage=function(){return b("React").jsx(b("Image.react"),{height:62,width:62,src:h("94361")})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){var a=this.getImage();return b("React").jsx(b("P2PConfirmationDialog.react"),{behaviors:babelHelpers["extends"]({LayerSlowlyFadeOnShow:b("LayerSlowlyFadeOnShow")},this.props.behaviors),allowBack:this.props.allowBack,buttonLabel:this.props.buttonLabel,buttonUse:this.props.buttonUse,centered:this.props.centered,image:a,onOKClick:this.props.onOKClick,onSecondaryClick:this.props.onSecondaryClick,onToggle:this.props.onToggle,showCloseButton:this.props.showCloseButton,showSecondaryButton:this.props.showSecondaryButton,secondaryButtonLabel:this.props.secondaryButtonLabel,secondaryButtonUse:this.props.secondaryButtonUse,title:this.props.title,width:this.props.width,children:this.props.children})};return c}(b("React").Component);a.propTypes={allowBack:(c=b("prop-types")).bool,buttonLabel:c.node,buttonUse:c.string,onOKClick:c.func,onSecondaryClick:c.func,onToggle:c.func,secondaryButtonLabel:c.node,secondaryButtonUse:c.string,showCloseButton:c.bool,showSecondaryButton:c.bool,title:c.node.isRequired,width:c.number};a.defaultProps={allowBack:!1,buttonLabel:g._("OK"),buttonUse:"default",onOKClick:b("emptyFunction"),showCloseButton:!1,width:b("MessengerEnvironment").messengerui?350:300};e.exports=a}),null);
__d("P2PSendMoneySuccessDialog.react",["fbt","Link.react","P2PLinkConstants","P2PSuccessDialog.react","P2PText.react","React","prop-types"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return b("React").jsx(b("P2PSuccessDialog.react"),{onOKClick:this.props.onClose,title:g._("Payment Sent"),children:b("React").jsx(b("P2PText.react"),{type:"primary",children:g._("When you receive money, it will go on this card too. You can update your card in {Link with text that goes to settings page}.",[g._param("Link with text that goes to settings page",b("React").jsx(b("Link.react"),{target:"_blank",href:b("P2PLinkConstants").settingsWWWURI,children:g._("Payments Settings")}))])})})};return c}(b("React").Component);a.propTypes={onClose:b("prop-types").func.isRequired};e.exports=a}),null);
__d("P2PUnderManualReviewDialog.react",["fbt","P2PButton.react","P2PDialog.react","P2PDialogBody.react","P2PDialogFooter.react","P2PDialogTitle.react","P2PText.react","React","prop-types"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a;return(a=b("React")).jsxs(b("P2PDialog.react"),{layerHideOnBlur:!1,shown:!0,width:300,children:[a.jsx(b("P2PDialogTitle.react"),{showCloseButton:!1,children:g._("Reviewing Payment Info")}),a.jsx(b("P2PDialogBody.react"),{children:a.jsx(b("P2PText.react"),{type:"primary",children:g._("For your security, this payment is in review for up to 24 hours. When it's confirmed, it will go through.")})}),a.jsx(b("P2PDialogFooter.react"),{children:a.jsx(b("P2PButton.react"),{label:g._("OK"),onClick:this.props.onClose,use:"confirm"})})]})};return c}(b("React").Component);a.propTypes={onClose:b("prop-types").func.isRequired};e.exports=a}),null);
__d("P2PUserEligibilityContainer.react",["P2PUserEligibilityStore","React","StoreAndPropBasedStateMixin","immutable","prop-types"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("React").createClass({displayName:"P2PUserEligibilityContainer",propTypes:{participants:b("prop-types").instanceOf(b("immutable").List)},mixins:[b("StoreAndPropBasedStateMixin")(b("P2PUserEligibilityStore"))],statics:{calculateState:function(a){a=a.participants;var c;a&&(a=a.map(function(a){return a.userID}).toArray(),c=b("P2PUserEligibilityStore").getEligibilityByUserIDs(a));return{p2pEligibilities:c}}},render:function(){var a=b("React").Children.only(this.props.children);return b("React").cloneElement(a,{p2pEligibilities:this.state.p2pEligibilities})}});e.exports=a}),null);
__d("P2PSendMoneyButton.react",["fbt","FBPaymentsVerificationFlowContainer.react","MessengerEnvironment","P2PAbstractSendMoneyButton.react","P2PActions","P2PErrorDialog.react","P2PGKValues","P2PGroupSendDialog.react","P2PGroupSendParticipantsPickerDialog.react","P2PLogger","P2PPasswordProtectionNUXDialog.react","P2PPaymentPhasesQueryWebGraphQLQuery","P2PPaymentSupportedCountry","P2PSendMoneyDialog.react","P2PSendMoneyNUXContextualDialog.react","P2PSendMoneySuccessDialog.react","P2PTransferStore","P2PUnderManualReviewDialog.react","P2PUserEligibilityContainer.react","P2PVerificationFlowHelper","PECurrency","React","ReactDOM","ReactLayeredComponentMixin_DEPRECATED","WebGraphQL","emptyFunction","immutable","promiseDone","prop-types"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();c=b("React").createClass({displayName:"P2PSendMoneyButton",mixins:[b("ReactLayeredComponentMixin_DEPRECATED")],propTypes:{amount:(a=b("prop-types")).string,button:a.object,fromChatTab:a.bool,groupSendRecipientUserIDs:a.arrayOf(a.string),groupThreadFBID:a.string,flyoutAlignment:a.string,openRequestTab:a.bool,isNewEmptyLocalThread:a.bool,isGroupChat:a.bool,onCompletion:a.func,onTrigger:a.func,p2pPaymentConfig:a.shape({currencyCode:a.string.isRequired,enabledActions:a.object.isRequired,enabledPaymentMethods:a.object.isRequired,maxTransferAmount:a.number.isRequired,title:a.string,use_payment_module_method_picker:a.bool,countryCode:a.string.isRequired,postalRegex:a.string.isRequired}),participants:a.instanceOf(b("immutable").List),platformData:a.object,sendMoneyDialogShown:a.bool,threadID:a.string,threadFBID:a.string},getDefaultProps:function(){return{amount:"",groupThreadFBID:"",openRequestTab:!1,onTrigger:b("emptyFunction"),sendMoneyDialogShown:!1}},getInitialState:function(){return{sendMoneyNUXDismissed:!1,passedIDVerification:!1}},log:function(a,c){b("P2PLogger").log(a,babelHelpers["extends"]({www_event_flow:"UI_Flow_P2P_Send"},c))},canShowSendMoneyDialog:function(){return!!(this.props.participants&&this.props.participants.size)},originalCreateTransactionResponse:null,_onButtonClick:function(){var a=this.getRecipients();this.log("UI_Actn_Send_Money_Button_Clicked",this.getLogData(a));this.canShowSendMoneyDialog()&&this.showSendMoneyDialog()},showIDVerificationDialog:function(){b("P2PActions").showDialog(b("FBPaymentsVerificationFlowContainer.react"),{onClose:b("P2PActions").hideDialog,paymentType:"mor_p2p_transfer",verificationProductType:"P2P"})},hideSendMoneyDialog:function(){b("P2PActions").chatSendViewClosed({threadID:this.props.threadID})},showSendMoneyDialog:function(){b("P2PActions").chatSendViewOpened({referrer:this.props.referrer,threadID:this.props.threadID,fromChatTab:this.props.fromChatTab})},_handleDialogToggle:function(a){!a?this.hideSendMoneyDialog():this.showSendMoneyDialog()},handlePaymentRequestSuccess:function(){this.hideSendMoneyDialog(),this.props.onTrigger(),this.props.onCompletion&&this.props.onCompletion()},handleOnSendSuccess:function(a){this.hideSendMoneyDialog();var c=a.risk_result;this.originalCreateTransactionResponse=a;c==="REQUIRE_VERIFICATION"?b("P2PVerificationFlowHelper").startVerificationFlow(a.id,!0,this.handleVerificationCompleted):c==="UNDER_MANUAL_REVIEW"?this.showUnderManualReviewDialog():this.handlePostSendSteps(!1)},handleVerificationCompleted:function(a){this.handlePostSendSteps(!a)},handlePostSendSteps:function(a){var c=this.originalCreateTransactionResponse,d=c.passwordProtection===0;!a&&c.isFirstSend?(this._passwordNUXPending=d,this.showSendSuccessDialog()):d?this.showPasswordProtectionDialog():b("P2PActions").hideDialog();this.originalCreateTransactionResponse=null;this.props.onTrigger();this.props.onCompletion&&this.props.onCompletion()},handleConfirmationOKClick:function(){this._passwordNUXPending?(this._passwordNUXPending=!1,this.showPasswordProtectionDialog()):b("P2PActions").hideDialog()},handleSendError:function(a){this.showErrorDialog(a)},handlePaymentRequestError:function(a){this.showPaymentRequestErrorDialog(a)},getGroupSendDialog:function(){return b("P2PGKValues").P2PGroupRequestEnabled?b("P2PGroupSendParticipantsPickerDialog.react"):b("P2PGroupSendDialog.react")},getLogData:function(a){if(a.size>1)return{object_ids:a.map(function(a){return a.userID}).join(",")};a=a.get(0);return{object_id:a&&a.userID}},getMoneyButtonNode:function(){return b("ReactDOM").findDOMNode(this.refs_p2pSendMoneyButton)},getRecipients:function(){if(!this.props.participants)return b("immutable").List();if(!this.props.isGroupChat)return this.props.participants.slice(0,1);var a=this.props.groupSendRecipientUserIDs||[],c=a.reduce(function(a,b){a[b]=!0;return a},{});return this.props.participants.filter(function(a){return!!c[a.userID]})},setGroupSendDialog:function(a,c){var d=this.getGroupSendDialog();a.groupSendMoneyDialog=b("React").jsx(b("P2PUserEligibilityContainer.react"),{participants:this.props.participants,children:b("React").jsx(d,{amount:this.props.amount,context:this.getMoneyButtonNode(),flyoutAlignment:this.props.flyoutAlignment,fromChatTab:this.props.fromChatTab,openRequestTab:this.props.openRequestTab,currency:c,onToggle:this._handleDialogToggle,participants:this.props.participants,referrer:this.props.referrer,threadID:this.props.threadID,threadFBID:this.props.threadFBID})})},getGroupSendRecipient:function(){var a=this;return this.props.participants&&this.props.participants.find(function(b){return b.userID===a.props.groupSendRecipientUserID})},showErrorDialog:function(a){var c=g._("Problem Sending Money");b("P2PActions").showDialog(b("P2PErrorDialog.react"),{error:a,onOKClick:b("P2PActions").hideDialog,title:c})},showPaymentRequestErrorDialog:function(a){var c=g._("Problem Requesting Money");b("P2PActions").showDialog(b("P2PErrorDialog.react"),{error:a,onOKClick:b("P2PActions").hideDialog,title:c})},showPasswordProtectionDialog:function(){b("P2PActions").showDialog(b("P2PPasswordProtectionNUXDialog.react"),{onComplete:b("P2PActions").hideDialog})},showSendSuccessDialog:function(){b("P2PActions").showDialog(b("P2PSendMoneySuccessDialog.react"),{onClose:this.handleConfirmationOKClick})},showUnderManualReviewDialog:function(){b("P2PActions").showDialog(b("P2PUnderManualReviewDialog.react"),{onClose:this.handlePostSendSteps.bind(this,!1)})},shouldShowNUX:function(){return!this.props.sendMoneyNUXDismissed&&!this.state.sendMoneyNUXDismissed&&b("P2PTransferStore").shouldShowSenderNUX()},shouldShowIDVerification:function(a){__p&&__p();a=(a=a)!=null?(a=a.viewer)!=null?(a=a.peer_to_peer_payments)!=null?a.peer_to_peer_payment_phases:a:a:a;if(a){a=a.some(function(a){a=a.steps||[];return a.map(function(a){return a.step_type}).includes("IDV")});a||this.setState({passedIDVerification:!0});return a}return!1},handleIDVerification:function(a){var c,d=this;this.state.passedIDVerification&&a();c=(c=this.props.p2pPaymentConfig)!=null?c.countryCode:c;c===b("P2PPaymentSupportedCountry").GB||c===b("P2PPaymentSupportedCountry").FR?b("promiseDone")(b("WebGraphQL").exec(new(b("P2PPaymentPhasesQueryWebGraphQLQuery"))({origin:"SEND"})),function(b){d.shouldShowIDVerification(b)?(d.hideSendMoneyDialog(),d.showIDVerificationDialog()):a()}):a()},renderLayers:function(){var a=this;if(!this.props.p2pPaymentConfig)return null;var c={},d=this.getRecipients();this.canShowSendMoneyDialog()&&this.props.sendMoneyDialogShown&&(this.shouldShowNUX()?c.nux=b("React").jsx(b("P2PSendMoneyNUXContextualDialog.react"),{context:this.getMoneyButtonNode(),loggingData:this.getLogData(d),flyoutAlignment:this.props.flyoutAlignment,onNextClick:function(){return a.handleIDVerification(function(){return a.setState({sendMoneyNUXDismissed:!0})})},onToggle:this._handleDialogToggle}):this.handleIDVerification(function(){return a.setSendDialog(c)}));return c},setSendDialog:function(a){var c=this,d=this.getRecipients(),e=this.props.p2pPaymentConfig.currencyCode;if(!d.size&&!this.props.groupSendRecipientUserID&&this.props.isGroupChat&&this.props.threadFBID)this.setGroupSendDialog(a,e);else{var f=b("PECurrency").getCurrencySymbol(e)||"$";a.sendMoneyDialog=b("React").jsx(b("P2PUserEligibilityContainer.react"),{participants:this.props.participants,ref:function(a){return c.refs_send_money_dialog=a},children:b("React").jsx(b("P2PSendMoneyDialog.react"),{amount:this.props.amount,context:this.getMoneyButtonNode(),currency:e,currencySymbol:f,groupThreadFBID:this.props.groupThreadFBID,flyoutAlignment:this.props.flyoutAlignment,openRequestTab:this.props.openRequestTab,memoText:this.props.memoText,onToggle:this._handleDialogToggle,onError:this.handleSendError,onPaymentRequestError:this.handlePaymentRequestError,onPaymentRequestSuccess:this.handlePaymentRequestSuccess,onSendSuccess:this.handleOnSendSuccess,p2pPaymentConfig:this.props.p2pPaymentConfig,platformData:this.props.platformData,receivers:d,ref:function(a){return c.refs_send_money_dialog=a},referrer:this.props.referrer,paymentRequestID:this.props.paymentRequestID,useModal:this.props.useModal})})}},render:function(){var a=this;if(this.props.isNewEmptyLocalThread&&this.props.participants.size>1)return null;return!this.props.p2pPaymentConfig?null:b("React").jsx(b("P2PAbstractSendMoneyButton.react"),{button:this.props.button,className:this.props.className,isActive:this.canShowSendMoneyDialog()&&this.props.sendMoneyDialogShown,isMessenger:!!b("MessengerEnvironment").messengerui,onClick:this._onButtonClick,ref:function(b){return a.refs_p2pSendMoneyButton=b}})}});e.exports=c}),null);
__d("P2PSendMoneyContainer.react",["invariant","CurrentUser","ImmutableObject","MercuryIDs","MercuryShareAttachmentRenderLocations","MercuryThreadInfo","MessengerParticipants.bs","P2PSendMoneyButton.react","P2PSendMoneyDialogStore","React","StoreAndPropBasedStateMixin","immutable","prop-types"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();c=b("React").createClass({displayName:"P2PSendMoneyContainer",propTypes:{button:(a=b("prop-types")).node,className:a.string,flyoutAlignment:a.string,fromChatTab:a.bool,p2pPaymentConfig:a.object,participantIDs:a.array,onCompletion:a.func,onTrigger:a.func,thread:a.object,threadID:a.string},getDefaultProps:function(){return{referrer:b("MercuryShareAttachmentRenderLocations").CHAT}},mixins:[b("StoreAndPropBasedStateMixin")(b("P2PSendMoneyDialogStore"))],statics:{calculateState:function(a){__p&&__p();var c=a.threadID,d=a.thread,e=a.participantIDs,f=null,h=null,i,j;a=a.referrer;if(!c)return{};d&&(d.thread_id===c||g(0,4862));i=b("P2PSendMoneyDialogStore").getStateByThreadID(c);j=i&&i.referrer;c&&(!e&&d&&d.participants&&(e=d.participants.filter(function(a){return b("CurrentUser").getID()!==b("MercuryIDs").getUserIDFromParticipantID(a)})),e&&(f=b("immutable").List(),f=f.withMutations(function(a){e&&e.forEach(function(c){var d=b("MessengerParticipants.bs").getNow(c);c=b("MercuryIDs").getUserIDFromParticipantID(c);b("CurrentUser").getID()!==c&&(d=d&&b("ImmutableObject").set(d,{userID:c}),d&&a.push(d))})})));h=d?b("MercuryThreadInfo").isNewEmptyLocalThread(d):!1;return babelHelpers["extends"]({},i,{participants:f,isNewEmptyLocalThread:h,isGroupChat:b("MercuryIDs").isGroupChat(c)&&!h,threadID:c,threadFBID:d&&d.thread_fbid,referrer:j||a})}},render:function(){return b("React").jsx(b("P2PSendMoneyButton.react"),babelHelpers["extends"]({},this.state,{button:this.props.button,className:this.props.className,flyoutAlignment:this.props.flyoutAlignment,fromChatTab:this.props.fromChatTab,onTrigger:this.props.onTrigger,p2pPaymentConfig:this.props.p2pPaymentConfig}))}});e.exports=c}),null);