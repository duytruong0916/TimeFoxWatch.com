if (self.CavalryLogger) { CavalryLogger.start_js(["jtE+m"]); }

__d("ReactComposerPhotoEditActionButton.react",["cx","fbt","React","ReactComposerPhotoActionButton.react","prop-types"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=h._("Edit Photo");return b("React").jsx(b("ReactComposerPhotoActionButton.react"),{className:"_4_z4",onClick:this.props.onClick,tooltip:a,iconClassName:"_4_z5"})};return c}(b("React").PureComponent);a.propTypes={onClick:b("prop-types").func};e.exports=a}),null);
__d("ReactComposerPhotoFaceboxTagger.react",["cx","fbt","React","ReactComposerFaceboxTaggerTypeaheadPresenter","XUITypeahead.react","prop-types"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={query:""},c.$1=function(a){c.props.onTagAdded(c.props.faceboxID,a.getUniqueID(),a.getTitle())},c.$2=function(a){c.setState({query:a.target.value})},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){var a=h._("Who is this?");return b("React").jsx(b("XUITypeahead.react"),{className:"_xgd",queryString:this.state.query,placeholder:a,onSelectAttempt:this.$1,onChange:this.$2,searchSource:this.props.dataSource,highlightOnSelect:!0,showEntriesOnFocus:!0,autoHighlight:!0,selectOnTab:!0,focusedOnInit:!0,presenter:b("ReactComposerFaceboxTaggerTypeaheadPresenter")})};return c}(b("React").PureComponent);a.propTypes={faceboxID:b("prop-types").string.isRequired,dataSource:b("prop-types").object.isRequired,onTagAdded:b("prop-types").func.isRequired};e.exports=a}),null);
__d("ReactComposerQAndAActionType",["keyMirrorRecursive"],(function(a,b,c,d,e,f){e.exports=b("keyMirrorRecursive")({SET_QANDA_CONFIG:null},"ReactComposerQAndAActionType")}),null);
__d("ReactComposerQAndAStore",["ReactComposerQAndAActionType","ReactComposerStoreBase"],(function(a,b,c,d,e,f){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;c=a.call(this,function(){return{photoLimit:1,profilePicURI:null,profileURI:null,faceboxDataSource:null}},function(a){switch(a.type){case b("ReactComposerQAndAActionType").SET_QANDA_CONFIG:d&&d.$ReactComposerQAndAStore1(a);break}})||this;d=babelHelpers.assertThisInitialized(c);return c}var d=c.prototype;d.getPhotoLimit=function(a){return this.getComposerData(a).photoLimit};d.getProfilePicSrc=function(a){return this.getComposerData(a).profilePicSrc};d.getProfileURI=function(a){return this.getComposerData(a).profileURI};d.getFaceboxDataSource=function(a){return this.getComposerData(a).faceboxDataSource};d.$ReactComposerQAndAStore1=function(a){var b=this.validateAction(a,["composerID","config"]),c=b[0];b=b[1];c=this.getComposerData(c);c.photoLimit=b.photoLimit;c.profilePicSrc=b.profilePicSrc;c.profileURI=b.profileURI;c.faceboxDataSource=b.faceboxDataSource;this.emitChange(a.composerID)};return c}(b("ReactComposerStoreBase"));e.exports=new a()}),null);
__d("ReactComposerPhotoFaceboxTaggerContainer.react",["React","ReactComponentWithPureRenderMixin","ReactComposerContextTypes","ReactComposerMediaAttachmentStore","ReactComposerPhotoFaceboxTagger.react","ReactComposerPropsAndStoreBasedStateMixin","ReactComposerQAndAStore","prop-types"],(function(a,b,c,d,e,f){"use strict";a=b("React").createClass({displayName:"ReactComposerPhotoFaceboxTaggerContainer",contextTypes:b("ReactComposerContextTypes"),mixins:[b("ReactComponentWithPureRenderMixin"),b("ReactComposerPropsAndStoreBasedStateMixin")(b("ReactComposerMediaAttachmentStore"),b("ReactComposerQAndAStore"))],propTypes:{faceboxID:b("prop-types").string.isRequired,onTagAdded:b("prop-types").func.isRequired},statics:{calculateState:function(a){a=b("ReactComposerMediaAttachmentStore").getTaggingDataSource(a)||b("ReactComposerQAndAStore").getFaceboxDataSource(a);a&&a.bootstrap();return{dataSource:a}}},render:function(){return b("React").jsx(b("ReactComposerPhotoFaceboxTagger.react"),{faceboxID:this.props.faceboxID,dataSource:this.state.dataSource,onTagAdded:this.props.onTagAdded})}});e.exports=a}),null);
__d("ReactComposerPhotoProductTagActionButton.react",["cx","fbt","AsyncRequest","ProductTaggingCreatorTypedLogger","React","ReactComposerPhotoActionButton.react","XCommerceSelfServeMerchantNUXSeenController","XUIAmbientNUX.react","prop-types"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=function(a){new(b("ProductTaggingCreatorTypedLogger"))().setEvent("Actn_PhotoComposorProductTagIconClick").setCreatorID(d.props.pageID).setPostID(d.props.photoID).log(),d.props.onClick&&d.props.onClick(a)},d.$3=function(){var a=b("XCommerceSelfServeMerchantNUXSeenController").getURIBuilder().setInt("page_id",d.props.pageID).setEnum("nux_type","composer_product_photo_tagger_button").getURI();new(b("AsyncRequest"))(a).send();d.props.onHideNux()},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){new(b("ProductTaggingCreatorTypedLogger"))().setEvent("Load_PhotoComposorProductTagIcon").setCreatorID(this.props.pageID).setPostID(this.props.photoID).log()};d.render=function(){var a=h._("Tag Products");return b("React").jsxs("div",{children:[b("React").jsx(b("ReactComposerPhotoActionButton.react"),{ref:"fbReactComposerPhotoActionbutton",className:"_a69"+(this.props.hasTag?" _a6b":""),tooltip:a,iconClassName:"_a6_",onClick:this.$1}),this.$2()]})};d.$2=function(){var a=this;if(!this.props.showNux)return null;var c=this.props.productTaggerType;c=c==="shop_page"?h._("Tag products from your shop in this photo"):h._("Tag products in this photo");return b("React").jsx(b("XUIAmbientNUX.react"),{contextRef:function(){return a.refs.fbReactComposerPhotoActionbutton},onCloseButtonClick:this.$3,position:"right",shown:!0,width:"auto",children:c})};return c}(b("React").PureComponent);a.propTypes={composerID:(c=b("prop-types")).string.isRequired,pageID:c.string.isRequired,photoID:c.string,productTaggerType:c.string.isRequired,hasTag:c.bool.isRequired,onClick:c.any,onHideNux:c.func.isRequired,showNux:c.bool.isRequired};e.exports=a}),null);
__d("ReactComposerPhotoTagActionButton.react",["cx","fbt","React","ReactComposerPhotoActionButton.react","prop-types"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=h._("Tag");return b("React").jsx(b("ReactComposerPhotoActionButton.react"),{className:"_cwf"+(this.props.hasTag?" _cwh":""),tooltip:a,iconClassName:"_cwg",onClick:this.props.onClick})};return c}(b("React").PureComponent);a.propTypes={hasTag:b("prop-types").bool.isRequired,onClick:b("prop-types").any};e.exports=a}),null);
__d("ReactComposerPhotoTaggedFaceboxSummary.react",["cx","fbt","ix","Image.react","LeftRight.react","React","TooltipLink.react","prop-types"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$1=function(){c.props.onTagRemoved(c.props.faceboxID,c.props.taggedSubjectID)},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){var a,c=h._("Edit Name");return(a=b("React")).jsxs(b("LeftRight.react"),{className:"_31bg",children:[a.jsx("div",{className:"_31bh",children:this.props.taggedValue}),a.jsx(b("TooltipLink.react"),{alignH:"center",position:"below",tooltip:c,onClick:this.$1,children:a.jsx(b("Image.react"),{src:i("76906")})})]})};return c}(b("React").PureComponent);a.propTypes={faceboxID:(c=b("prop-types")).string.isRequired,onTagRemoved:c.func.isRequired,taggedSubjectID:c.string.isRequired,taggedValue:c.string.isRequired};e.exports=a}),null);
__d("ReactComposerPhotoTagger.react",["cx","fbt","ActorURI","AsyncRequest","ContextualLayerAutoFlip","Image.react","ImageBlock.react","LayerHideOnBlur","LayerHideOnEscape","LayerTabIsolation","React","ReactComponentWithPureRenderMixin","ReactComposerContextTypes","ReactComposerPhotoActions","ReactComposerPhotoEditActionButton.react","ReactComposerPhotoFaceboxTaggerContainer.react","ReactComposerPhotoProductTagActionButton.react","ReactComposerPhotoStore","ReactComposerPhotoTagActionButton.react","ReactComposerPhotoTaggedFaceboxSummary.react","ReactLayeredComponentMixin_DEPRECATED","XStickerPhotoEditorController","XUIContextualDialog.react","XUIContextualDialogBody.react","XUIContextualDialogFooter.react","XUIDialogCloseButton.react","immutable","prop-types"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=268,j=32;c=b("React").createClass({displayName:"ReactComposerPhotoTagger",_photoEditorRequest:void 0,contextTypes:b("ReactComposerContextTypes"),mixins:[b("ReactLayeredComponentMixin_DEPRECATED"),b("ReactComponentWithPureRenderMixin")],propTypes:{canTagFromModal:(a=b("prop-types")).bool,draggingPhotos:a.bool,enableFaceboxTagger:a.bool.isRequired,disablePhotoEditing:a.bool.isRequired,faceboxes:a.instanceOf(b("immutable").Map).isRequired,onEditClick:a.func,onHideProductTaggerNux:a.func.isRequired,onTagAdded:a.func.isRequired,onTagIntent:a.func,onTagRemoved:a.func.isRequired,originalID:a.string,photoID:a.string.isRequired,productTaggerType:a.string.isRequired,shown:a.bool.isRequired,showProductTaggerNux:a.bool.isRequired},getDefaultProps:function(){return{shown:!1}},UNSAFE_componentWillReceiveProps:function(a){!this.props.draggingPhotos&&a.draggingPhotos&&b("ReactComposerPhotoActions").setPhotoBeingTagged(this.context.composerID,null)},render:function(){var a=null,c=this.props.productTaggerType!=="none";c?a=this._onProductTagClick:this.props.canTagFromModal&&(a=this._onTagClick);var d=null;c?d=b("React").jsx(b("ReactComposerPhotoProductTagActionButton.react"),{composerID:this.context.composerID,productTaggerType:this.props.productTaggerType,pageID:this.context.targetID,photoID:this.props.photoID,hasTag:b("ReactComposerPhotoStore").hasTagsInPhoto(this.context.composerID,this.props.photoID),onClick:a,onHideNux:this.props.onHideProductTaggerNux,showNux:this.props.showProductTaggerNux}):this.props.enableFaceboxTagger&&(d=b("React").jsx(b("ReactComposerPhotoTagActionButton.react"),{hasTag:b("ReactComposerPhotoStore").hasTagsInPhoto(this.context.composerID,this.props.photoID),onClick:a}));a=this.props.disablePhotoEditing?null:b("React").jsx(b("ReactComposerPhotoEditActionButton.react"),{onClick:this._onEditClick});return b("React").jsxs("div",{className:"_jfi"+(c?" uiContextualLayerParent":""),onClick:this._onClick,role:"presentation",tabIndex:"-1",children:[d,a]})},renderLayers:function(){return!this.props.shown||!this.props.enableFaceboxTagger?null:{dialog:this._getDialog()}},_getDialog:function(){var a=this,c;return(c=b("React")).jsxs(b("XUIContextualDialog.react"),{shown:this.props.shown,onToggle:this._onDialogToggled,contextRef:function(){return a},position:"below",alignment:"center",width:i,behaviors:{LayerHideOnBlur:b("LayerHideOnBlur"),LayerHideOnEscape:b("LayerHideOnEscape"),ContextualLayerAutoFlip:b("ContextualLayerAutoFlip"),LayerTabIsolation:b("LayerTabIsolation")},children:[c.jsx(b("XUIContextualDialogBody.react"),{children:this._getDialogBody()}),c.jsx(b("XUIContextualDialogFooter.react"),{children:c.jsx(b("XUIDialogCloseButton.react"),{use:"confirm",label:"Close",onClick:this._onCloseButtonClicked})})]})},_getDialogBody:function(){var a=this;return this.props.faceboxes.size===0?h._("We could not find any faces to tag."):this.props.faceboxes.valueSeq().map(function(c){var d=c.taggedSubjectID?b("React").jsx(b("ReactComposerPhotoTaggedFaceboxSummary.react"),{faceboxID:c.id,onTagRemoved:a.props.onTagRemoved,taggedSubjectID:c.taggedSubjectID,taggedValue:c.taggedValue}):b("React").jsx(b("ReactComposerPhotoFaceboxTaggerContainer.react"),{faceboxID:c.id,onTagAdded:a.props.onTagAdded});return b("React").jsxs(b("ImageBlock.react"),{className:"_qv7",children:[b("React").jsx(b("Image.react"),{className:"_qv8",height:j,src:c.croppedURI,width:j}),d]},c.id)})},_onCloseButtonClicked:function(){b("ReactComposerPhotoActions").setPhotoBeingTagged(this.context.composerID,null)},_onDialogToggled:function(a){a||this._onCloseButtonClicked()},_onClick:function(){this.props.onTagIntent&&this.props.onTagIntent(),b("ReactComposerPhotoActions").setPhotoBeingTagged(this.context.composerID,this.props.photoID)},_onTagClick:function(a){this._onEditClick(a,null,"tag")},_onProductTagClick:function(a){this._onEditClick(a,null,"product_tag")},_onEditClick:function(a,c,d){__p&&__p();var e=this;a.stopPropagation();if(this._photoEditorRequest)return;b("ReactComposerPhotoActions").startPhotoEdit(this.context.composerID,this.props.photoID);c=b("XStickerPhotoEditorController").getURIBuilder().setString("grid_id",this.context.composerID).setEnum("target_type","composer").setInt("latest_fbid",this.props.photoID).setInt("photo_fbid",this.props.originalID||this.props.photoID).setEnum("initial_tab",d).getURI();c=b("ActorURI").create(c,this.context.actorID);this._photoEditorRequest=new(b("AsyncRequest"))(c).setFinallyHandler(function(){e._photoEditorRequest=null,b("ReactComposerPhotoActions").finishLoadingPhotoEdit(e.context.composerID,e.props.photoID)});this._photoEditorRequest&&this._photoEditorRequest.send();this.props.onEditClick&&this.props.onEditClick()}});e.exports=c}),null);
__d("ReactComposerPhotoContainer.react",["cx","BootloadedComponent.react","FluxContainer","JSResource","LoadingIndicator.react","React","ReactComposerContextTypes","ReactComposerMediaUploadActions","ReactComposerNUXActions","ReactComposerNUXStore","ReactComposerPhoto.react","ReactComposerPhotoActions","ReactComposerPhotoStore","ReactDOM","immutable"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var d;d=a.apply(this,arguments)||this;d.$7=function(){d.$9()};d.$6=function(){d.props.photoID?b("ReactComposerPhotoActions").removePhoto(d.context.composerID,d.props.photoID,d.props.uploadID):b("ReactComposerMediaUploadActions").removeMediaUpload(d.context.composerID,d.props.uploadID)};d.$9=function(){b("ReactComposerNUXActions").nuxWasSeen(d.context.composerID,"add_stickers_nux_seen")};d.$10=function(a,c,e){!(d.state.isSpherical||d.props.sphericalPhotoID)&&d.props.photoID&&b("ReactComposerPhotoActions").tagFacebox(d.context.composerID,d.props.photoID,a,c,e)};d.$1=function(){b("ReactComposerNUXActions").nuxWasSeen(d.context.composerID,"tagging_flyout_nux_seen")};d.$11=function(){d.state.showTaggingNUX&&d.$1()};d.$12=function(a,c){!(d.state.isSpherical||d.props.sphericalPhotoID)&&d.props.photoID&&b("ReactComposerPhotoActions").untagFacebox(d.context.composerID,d.props.photoID,a,c)};d.$8=function(){b("ReactComposerNUXActions").nuxWasSeen(d.context.composerID,"composer_product_photo_tagger_button")};d.beforeCalculateInitialState(d.context.composerID,d.props);d.state=c.calculateState(d.state,d.props,d.context);d.$1=d.$1.bind(babelHelpers.assertThisInitialized(d));return d}c.getStores=function(){return[b("ReactComposerNUXStore"),b("ReactComposerPhotoStore")]};var d=c.prototype;d.beforeCalculateInitialState=function(a,d){if(d.photoID){var e=b("ReactComposerPhotoStore").getPhoto(a,d.photoID);if(e){var f=c.$2(a,e,d.nuxConfig,d.index);d=!f&&c.$3(a,e,d.nuxConfig,d.index);f&&b("ReactComposerNUXActions").nuxWasShown(a,"add_stickers_nux_seen",e.id);d&&b("ReactComposerNUXActions").nuxWasShown(a,"tagging_flyout_nux_seen",e.id)}}};c.calculateState=function(a,c,d){__p&&__p();a=d.composerID;if(c.photoID){d=b("ReactComposerPhotoStore").getPhoto(a,c.photoID);if(d){var e=this.$2(a,d,c.nuxConfig,c.index),f=!e&&this.$3(a,d,c.nuxConfig,c.index),g=b("ReactComposerPhotoStore").getPhotoBeingTagged(a)===c.photoID;a=c.showProductTaggerNux===!0&&this.$4(a);return{faceboxes:d.faceboxes,isLoadingPhotoEdit:d.isLoadingPhotoEdit,isRecognizingFaceboxes:d.isRecognizingFaceboxes,isSpherical:d.isSpherical,showPhotoTagger:g,showProductTaggerNux:a,showStickersNUX:e,showTaggingNUX:f,thumbSrc:d.thumbSrc}}}return{faceboxes:b("immutable").Map(),isLoadingPhotoEdit:!1,isRecognizingFaceboxes:!1,isSpherical:c.isSpherical,showPhotoTagger:!1,showProductTaggerNux:!!c.showProductTaggerNux,showStickersNUX:!1,showTaggingNUX:!1,thumbSrc:""}};c.$5=function(a,c,d,e,f){var g=b("ReactComposerNUXStore").getNUXShownPhotoID(a,e);a=b("ReactComposerNUXStore").hasNUXBeenSeen(a,e);return!!d[e]&&!a&&(!g||g===c.id)&&f===0};c.$2=function(a,b,c,d){return this.$5(a,b,c,"add_stickers_nux_seen",d)};c.$3=function(a,b,c,d){return this.$5(a,b,c,"tagging_flyout_nux_seen",d)&&b.faceboxes.size>0};c.$4=function(a){return!b("ReactComposerNUXStore").hasNUXBeenSeen(a,"composer_product_photo_tagger_button")};d.componentDidMount=function(){var a=this;setTimeout(function(){var c=a.props.dragHandler;c&&c.add(b("ReactDOM").findDOMNode(a.refs.container))},0)};d.componentWillUnmount=function(){var a=this;setTimeout(function(){var c=a.props.dragHandler;c&&c.remove(b("ReactDOM").findDOMNode(a.refs.container))},0)};d.render=function(){if(this.state.isSpherical||this.props.sphericalPhotoID){var a=b("React").jsx("div",{className:"_30t9",children:b("React").jsx(b("LoadingIndicator.react"),{className:"_4qlq",size:"small",color:"white"})});return b("React").jsx(b("BootloadedComponent.react"),{bootloadLoader:b("JSResource")("ReactComposerSphericalPhoto.react").__setRef("ReactComposerPhotoContainer.react"),bootloadPlaceholder:a,className:"_4j47 _jfc",showEditButton:!0,fileURL:this.props.fileURL,alt:this.props.label,onRemoveButtonClicked:this.$6,photoID:this.props.photoID,sphericalPhotoID:this.props.sphericalPhotoID,thumbSrc:this.state.thumbSrc,uploadID:this.props.uploadID,sphericalImage:this.props.sphericalImage,useLocalSphericalImage:this.props.useLocalSphericalImage,ref:"container"})}else return b("React").jsx(b("ReactComposerPhoto.react"),babelHelpers["extends"]({},this.props,this.state,{onEditClick:this.$7,onHideProductTaggerNux:this.$8,onRemoveButtonClicked:this.$6,onStickersNUXClose:this.$9,onTagAdded:this.$10,onTagIntent:this.$11,onTaggingNUXClose:this.$1,onTagRemoved:this.$12,ref:"container"}))};return c}(b("React").PureComponent);a.contextTypes=b("ReactComposerContextTypes");e.exports=b("FluxContainer").create(a,{withContext:!0,withProps:!0})}),null);
__d("ReactComposerPhotoUploadPlaceholder.react",["ix","cx","CircularProgressBar.react","Image.react","LoadingIndicator.react","React","ReactComponentWithPureRenderMixin","ReactComposerContextTypes","ReactComposerPhotoUploadState","XUICloseButton.react","asset","prop-types"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();c=b("React").createClass({displayName:"ReactComposerPhotoUploadPlaceholder",contextTypes:b("ReactComposerContextTypes"),mixins:[b("ReactComponentWithPureRenderMixin")],propTypes:{onRemoveButtonClicked:(a=b("prop-types")).func.isRequired,uploadID:a.string.isRequired,uploadState:a.oneOf(Object.keys(b("ReactComposerPhotoUploadState"))).isRequired,uploadProgress:a.number,isSpherical:a.bool,fileURL:a.string},render:function(){__p&&__p();var a=null,c=null,d=this.props.uploadState,e=d===b("ReactComposerPhotoUploadState").PHOTO_UPLOAD_RESIZE_STARTED;d=d===b("ReactComposerPhotoUploadState").PHOTO_UPLOAD_UPLOADING;if((e||d)&&!this.props.isDocument){e="_1b01"+(e?" _1b02":"")+(d?" _1b03":"");a=b("React").jsx(b("CircularProgressBar.react"),{percentComplete:this.props.uploadProgress,className:e})}else c=b("React").jsx(b("LoadingIndicator.react"),{className:"_1b00",color:"white",size:"medium"});var f;this.props.isSpherical&&(f=b("React").jsx(b("Image.react"),{className:"_1az2",src:g("411966"),alt:"360 Photo"}));d={};this.context.gks.local_image_display&&this.props.fileURL&&(d={backgroundImage:"url("+this.props.fileURL+")"});return b("React").jsxs("div",{className:"_50_c _1a__",style:d,children:[b("React").jsx(b("XUICloseButton.react"),{className:"_1b04",onClick:this.props.onRemoveButtonClicked,size:"medium",shade:"dark"}),a,c,f]})}});e.exports=c}),null);
__d("ReactComposerPhotoUploadPlaceholderContainer.react",["React","ReactComponentWithPureRenderMixin","ReactComposerContextTypes","ReactComposerMediaUploadActions","ReactComposerMediaUploadStore","ReactComposerPhotoUploadPlaceholder.react","ReactComposerPropsAndStoreBasedStateMixin","prop-types"],(function(a,b,c,d,e,f){"use strict";a=b("React").createClass({displayName:"ReactComposerPhotoUploadPlaceholderContainer",contextTypes:b("ReactComposerContextTypes"),mixins:[b("ReactComponentWithPureRenderMixin"),b("ReactComposerPropsAndStoreBasedStateMixin")(b("ReactComposerMediaUploadStore"))],propTypes:{uploadID:b("prop-types").string.isRequired},statics:{calculateState:function(a,c){a=b("ReactComposerMediaUploadStore").getMediaUpload(a,c.uploadID);return{uploadProgress:a.progress,uploadState:a.state,isSpherical:a.isSpherical,isDocument:!1}}},render:function(){return b("React").jsx(b("ReactComposerPhotoUploadPlaceholder.react"),babelHelpers["extends"]({},this.props,this.state,{onRemoveButtonClicked:this._onRemoveButtonClicked}))},_onRemoveButtonClicked:function(){b("ReactComposerMediaUploadActions").removeMediaUpload(this.context.composerID,this.props.uploadID)}});e.exports=a}),null);
__d("ReactComposerFailedVideoXUploadContainer.react",["React","ReactComponentWithPureRenderMixin","ReactComposerContextTypes","ReactComposerFailedMediaUpload.react","ReactComposerMediaUploadActions","ReactComposerMediaUploadStore","ReactComposerMediaUtils","prop-types"],(function(a,b,c,d,e,f){"use strict";a=b("React").createClass({displayName:"ReactComposerFailedVideoXUploadContainer",contextTypes:b("ReactComposerContextTypes"),mixins:[b("ReactComponentWithPureRenderMixin")],propTypes:{error:b("prop-types").object.isRequired,filename:b("prop-types").string,uploadID:b("prop-types").string.isRequired},render:function(){return b("React").jsx(b("ReactComposerFailedMediaUpload.react"),babelHelpers["extends"]({},this.props,{onDismissClick:this._onDismissClick,onRemoveClick:this._onDismissClick,onRetryClick:this._onRetryClick}))},_onDismissClick:function(){b("ReactComposerMediaUploadActions").removeMediaUpload(this.context.composerID,this.props.uploadID)},_onRetryClick:function(){var a=b("ReactComposerMediaUploadStore").getMediaUpload(this.context.composerID,this.props.uploadID).fileUpload;a.manuallyRetried=!0;var c=b("ReactComposerMediaUtils").getVideoXUploader(this.context.composerID);c.uploadVideo(a)}});e.exports=a}),null);
__d("ReactComposerVideoUploadPlaceholder.react",["cx","ix","FBLogger","Image.react","React","ReactComponentWithPureRenderMixin","ReactComposerContextTypes","ReactComposerPropsAndStoreBasedStateMixin","ReactComposerStore","XUICloseButton.react","prop-types"],(function(a,b,c,d,e,f,g,h){"use strict";a=b("React").createClass({displayName:"ReactComposerVideoUploadPlaceholder",contextTypes:b("ReactComposerContextTypes"),mixins:[b("ReactComponentWithPureRenderMixin"),b("ReactComposerPropsAndStoreBasedStateMixin")(b("ReactComposerStore"))],propTypes:{onRemoveClick:b("prop-types").func},statics:{calculateState:function(a,c){return{posting:b("ReactComposerStore").isPosting(a)}}},componentDidMount:function(){this.context.gks.isUserComposer&&b("FBLogger")("Page composer boundary test").info("Page user uploads a video without video dialog")},render:function(){var a="_2oe _5ip5",c="_3ew _5iph",d=this.state.posting?null:b("React").jsx(b("XUICloseButton.react"),{className:"_5ipi",onClick:this.props.onRemoveClick,shade:"light",size:"medium"});return b("React").jsxs("div",{className:a,children:[d,b("React").jsx(b("Image.react"),{className:c,src:h("82359")})]})}});e.exports=a}),null);
__d("ReactComposerVideoUploadPlaceholderContainer.react",["React","ReactComponentWithPureRenderMixin","ReactComposerContextTypes","ReactComposerVideoUploadActions","ReactComposerVideoUploadPlaceholder.react"],(function(a,b,c,d,e,f){a=b("React").createClass({displayName:"ReactComposerVideoUploadPlaceholderContainer",contextTypes:b("ReactComposerContextTypes"),mixins:[b("ReactComponentWithPureRenderMixin")],render:function(){return b("React").jsx(b("ReactComposerVideoUploadPlaceholder.react"),{onRemoveClick:this._onRemoveClick})},_onRemoveClick:function(){b("ReactComposerVideoUploadActions").remove(this.context.composerID)}});e.exports=a}),null);
__d("ReactComposerVideoUploadProgressBar.react",["cx","DOMContainer.react","React","prop-types"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return b("React").jsx("div",{className:"_4340",children:b("React").jsx(b("DOMContainer.react"),{children:this.props.progressBar})})};return c}(b("React").PureComponent);a.propTypes={progressBar:b("prop-types").instanceOf(HTMLElement).isRequired};e.exports=a}),null);
__d("VideoPermalinkText.react",["cx","React","XUITextInput.react","XVideoPermalinkController"],(function(a,b,c,d,e,f,g){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.$1=function(){return b("XVideoPermalinkController").getURIBuilder().setInt("video_id",this.props.videoID).setString("vanity",this.props.targetID).getURI().getQualifiedURI().toString()};d.render=function(){var a=this;return b("React").jsx(b("XUITextInput.react"),{className:"_9_1",value:this.$1(),size:85,height:"tall",ref:"permalink_field",onFocus:function(){return a.refs.permalink_field.getTextFieldDOM().select()}})};return c}(b("React").Component);e.exports=a}),null);
__d("VideoUploadProcessingDialog.react",["fbt","ActorURI","React","VideoLibraryButton.react","VideoPermalinkText.react","XUIDialog.react","XUIDialogBody.react","XUIDialogButton.react","XUIDialogCloseButton.react","XUIDialogFooter.react","XUIDialogTitle.react","XVideoEditController","XVideoEditDialogController","prop-types"],(function(a,b,c,d,e,f,g){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={dialogShown:!0},c.$1=function(a){c.setState({dialogShown:a}),!a&&c.props.onClose&&c.props.onClose()},c.$2=function(){c.setState({dialogShown:!1})},c.$4=function(){return c.props.isSecretVideo?g._("Processing Secret Video"):g._("Processing Video")},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.UNSAFE_componentWillReceiveProps=function(a){a.show&&this.setState({dialogShown:!0})};d.$3=function(){if(this.props.isReferenceVideo)return g._("Your reference file is now processing. We will send you a notification when it's ready and monitored.");else if(this.props.isSecretVideo)return b("React").jsxs("div",{children:[g._("Your secret video is now processing. We will notify you when it is it ready to view at the following location:"),b("React").jsx(b("VideoPermalinkText.react"),{targetID:String(this.context&&this.context.targetID||this.props.pageID),videoID:this.props.videoID})]});else return g._("Your video is now processing. We will send you a notification when it's ready to view.")};d.render=function(){var a,c=g._("Edit Video"),d;this.props.isReferenceVideo?d=null:this.props.shouldShowNewEditDialog&&this.props.pageID?(a=b("XVideoEditDialogController").getURIBuilder().setInt("video_id",this.props.videoID).setEnum("source","processing_dialog").getURI(),a=b("ActorURI").create(a,this.props.pageID),d=b("React").jsx(b("XUIDialogButton.react"),{action:"confirm",label:c,href:a,onClick:this.$2,rel:"dialog"})):(a=b("XVideoEditController").getURIBuilder().setInt("v",this.props.videoID).setEnum("source","processing_dialog").getURI(),d=b("React").jsx(b("XUIDialogButton.react"),{action:"confirm",label:c,href:a,onClick:this.$2,target:"_blank"}));c=null;this.props.shouldShowVideoLibrary&&(c=b("React").jsx(b("VideoLibraryButton.react"),{pageID:this.props.pageID,size:"medium",source:"video_upload_confirmation_dialog",refSource:"video_upload_confirmation_dialog"}));return b("React").jsxs(b("XUIDialog.react"),{shown:this.state.dialogShown,width:400,onToggle:this.$1,children:[b("React").jsx(b("XUIDialogTitle.react"),{children:this.$4()}),b("React").jsx(b("XUIDialogBody.react"),{children:this.$3()}),b("React").jsxs(b("XUIDialogFooter.react"),{leftContent:c,children:[b("React").jsx(b("XUIDialogCloseButton.react"),{}),d]})]},"dialog")};return c}(b("React").Component);a.propTypes={onClose:(c=b("prop-types")).func,shouldShowNewEditDialog:c.bool,isReferenceVideo:c.bool,shouldShowVideoLibrary:c.bool};e.exports=a}),null);
__d("ReactComposerVideoUploader",["invariant","Arbiter","DOM","DOMClone","ErrorDialog","QE","React","ReactComposerActions","ReactComposerPostUtilsCore","ReactComposerVideoUploadActions","ReactComposerVideoUploadStore","ReactDOM","Run","SubscriptionsHandler","UserAgent","VideoUploadFile","VideoUploadProcessingDialog.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=a.URL||a.webkitURL||{};c=function(){__p&&__p();function a(a,c){__p&&__p();var d=this;this.$3=a;this.$6=c;this.$2=new(b("SubscriptionsHandler"))();this.$3.composerID||g(0,1443);this.$3.container||g(0,5531);this.$3.uploader||g(0,5533);this.$5=a.uploader;this.$1=a.composerID;this.$2.addSubscriptions(this.$5.subscribe("post-failed",this.$7.bind(this)),this.$5.subscribe("post-finished",this.$8.bind(this)),this.$5.subscribe("upload-failed",this.$9.bind(this)),this.$5.subscribe("upload-finished",this.$10.bind(this)));b("Run").onLeave(function(){return d.$5.abandon()});b("Run").onUnload(function(){return d.$5.abandon()})}var c=a.prototype;c.upload=function(a,c){this.$4=c;c=b("VideoUploadFile").fromFileInput(a);this.$5.upload(c)};c.uploadFromFile=function(a,b){var c=a.getFile();c&&h.createObjectURL&&(b.fileURL=h.createObjectURL(c));this.$4=b;this.$5.upload(a)};c.destroy=function(){this.$2.release()};c.isUploading=function(){return this.$5.isSessionInProgress()};c.$11=function(a){a&&b("ErrorDialog").show(a.error_summary,a.error_description),this.$6&&this.$6.reset(),this.$5.abandon(),b("ReactComposerActions").postError(this.$1,null)};c.$7=function(a,b){this.$11(b)};c.$8=function(a,c){b("ReactComposerPostUtilsCore").handlePostSucceeded(this.$1),this.$3.composerEntryPointRef==="timeline"&&b("QE").logExposure("www_optimistic_video_post"),this.$3.shouldShowOptimisticVideoPost&&this.$3.composerEntryPointRef==="timeline"?b("Arbiter").inform("videoUpload/complete",{videoID:c.video_id,isToUserProfile:!0,videoFileURL:c.fileURL}):b("ReactDOM").render(b("React").jsx(b("VideoUploadProcessingDialog.react"),{videoID:c.video_id,show:!0}),this.$3.container),this.$3.onPostSuccess&&this.$3.onPostSuccess()};c.$9=function(a,c){this.$11(c);a=b("ReactComposerVideoUploadStore").getVideo(this.$1);if(b("UserAgent").isBrowser("IE")){c=b("DOMClone").deepClone(a.input);b("DOM").replace(a.input,c)}else a.input.value="";b("ReactComposerVideoUploadActions").remove(this.$1)};c.$10=function(){this.$5.post(this.$4),this.$3.onUploadSuccess&&this.$3.onUploadSuccess()};return a}();e.exports=c}),null);
__d("ReactComposerVideoX.react",["cx","fbt","ix","requireCond","BackgroundImage.react","DurationFormatter","cr:974994","FlexLayout.react","FlexLayoutItem.react","Image.react","LineClamp.react","React","ReactComposerMediaConfig","Tooltip.react","cr:974993","XUICloseButton.react","asset","prop-types"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a={width:b("ReactComposerMediaConfig").photo.thumbWidth,height:b("ReactComposerMediaConfig").photo.thumbHeight},c=this.props.posting?null:b("React").jsx(b("XUICloseButton.react"),{className:"_1sju",label:h._("Remove video"),onClick:this.props.onRemoveButtonClicked,size:"medium",shade:"light"}),d=this.props.useThumbnailsRedesign?null:b("React").jsx("div",{className:"_2v_s"}),e=b("React").jsx(b("BackgroundImage.react"),{alt:this.props.label,src:this.props.thumbSrc,width:b("ReactComposerMediaConfig").photo.thumbWidth,height:b("ReactComposerMediaConfig").photo.thumbHeight,backgroundSize:this.props.usingPlaceholderThumbnail?"cover":"contain",className:this.props.usingPlaceholderThumbnail?"":"_33by"}),f=this.$1(),g="_1sjs"+(f!=null?" _225v":"");return b("React").jsxs("div",{ref:"root",className:g,style:a,children:[f?f:e,this.$2(),d,c,b("React").jsx("div",{className:"uiContextualLayerParent _1xob"})]})};d.$3=function(){return this.props.label.endsWith(".gif")};d.$1=function(){if(!this.props.useThumbnailsRedesign||!this.props.usingPlaceholderThumbnail)return null;var a=this.$3()?h._("Your GIF will show up after you post."):h._("Your video will show up after you post.");a=b("React").jsxs("span",{children:[a,b("React").jsx("br",{}),this.props.label]});return b("React").jsx(b("Tooltip.react"),{position:"below",className:"_225-",display:"block",tooltip:a,children:b("React").jsx(b("LineClamp.react"),{lines:3,lineHeight:16,fitHeightToShorterText:!0,className:"_2260",children:this.props.label})})};d.$2=function(){var a=this.props.isSpherical?b("React").jsx(b("Image.react"),{className:"_40p3",src:i("95829")}):null,c=this.props.videoID!=null&&this.props.duration!=null&&b("cr:974993")?b("React").jsx(b("cr:974993"),{composerID:this.props.composerID,videoDuration:this.props.duration,videoID:this.props.videoID,videoURL:this.props.videoURL}):null,d=this.props.isProcessingCaptions&&b("cr:974994")?b("React").jsx("div",{className:"_3-8w",children:b("React").jsx(b("cr:974994"),{background:"transparent",height:"small",progress:100,roundedBorder:!1,type:"buffering"})}):null,e=null,f=null;if(this.props.useThumbnailsRedesign)if(this.props.duration==null)f=this.$3()?b("React").jsx(b("Image.react"),{className:"_m6t",src:i("441227")}):b("React").jsx(b("Image.react"),{className:"_2261",src:i("412727")});else{var g=b("DurationFormatter").formatShort(this.props.duration);e=b("React").jsx("span",{className:"_40p4",children:g})}return b("React").jsxs("div",{className:"_8528"+(d?" _8529":""),children:[b("React").jsxs(b("FlexLayout.react"),{align:"end",className:"_2pi7",children:[b("React").jsx(b("FlexLayoutItem.react"),{children:c}),b("React").jsxs(b("FlexLayoutItem.react"),{className:"_52jw",grow:1,children:[e,f,a]})]}),d]})};return c}(b("React").PureComponent);a.propTypes={label:(c=b("prop-types")).string,onRemoveButtonClicked:c.func.isRequired,thumbSrc:c.string.isRequired,posting:c.bool.isRequired};e.exports=a}),null);
__d("ReactComposerVideoXEditDialogActionTypes",["keyMirror"],(function(a,b,c,d,e,f){"use strict";a=b("keyMirror")({SET_ACTIVE_TAB:null,UPDATE_GENERATED_THUMBNAILS:null,UPDATE_SELECTED_THUMBNAIL:null,UPDATE_CUSTOM_THUMBNAIL:null,UPDATE_SCRUBBED_THUMBNAIL:null,USE_SELECTED_THUMBNAIL:null,REMOVE_DIALOG_STATE:null,REVERT_THUMBNAIL_STATE:null,SAVE_THUMBNAIL_STATE:null,SHOW_DISCARD_DIALOG:null,HIDE_DISCARD_DIALOG:null,SHOW_DIALOG:null,HIDE_DIALOG:null,MOVE_TEXT_BOX:null,RESIZE_TEXT_BOX:null,UPDATE_THUMBNAIL_TEXT:null,SET_VIDEO_DIMENSIONS:null,SET_CUSTOM_THUMBNAIL_DIMENSIONS:null,SET_TEXT_COLOR:null,SET_TEXT_FONT:null,SET_TEXT_ALIGNMENT:null,SET_TEXT_SIZE:null});e.exports=a}),null);
__d("ReactComposerVideoXEditDialogActions",["ReactComposerDispatcher","ReactComposerVideoXEditDialogActionTypes","VideoThumbnail"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={setActiveTab:function(a,c,d){a={type:b("ReactComposerVideoXEditDialogActionTypes").SET_ACTIVE_TAB,activeTab:a,composerID:c,uploadID:d};b("ReactComposerDispatcher").dispatch(a)},updateGeneratedThumbnails:function(a,c,d){a={type:b("ReactComposerVideoXEditDialogActionTypes").UPDATE_GENERATED_THUMBNAILS,generatedThumbnails:a,composerID:c,uploadID:d};b("ReactComposerDispatcher").dispatch(a)},updateSelectedThumbnail:function(a,c,d){a={type:b("ReactComposerVideoXEditDialogActionTypes").UPDATE_SELECTED_THUMBNAIL,selectedThumbnail:a,composerID:c,uploadID:d};b("ReactComposerDispatcher").dispatch(a)},updateCustomThumbnail:function(a,c,d){a={type:b("ReactComposerVideoXEditDialogActionTypes").UPDATE_CUSTOM_THUMBNAIL,customThumbnail:a,composerID:c,uploadID:d};b("ReactComposerDispatcher").dispatch(a)},updateScrubbedThumbnail:function(a,c,d){a={type:b("ReactComposerVideoXEditDialogActionTypes").UPDATE_SCRUBBED_THUMBNAIL,scrubbedThumbnail:a,composerID:c,uploadID:d};b("ReactComposerDispatcher").dispatch(a)},useSelectedThumbnail:function(a,c){a={type:b("ReactComposerVideoXEditDialogActionTypes").USE_SELECTED_THUMBNAIL,composerID:a,uploadID:c};b("ReactComposerDispatcher").dispatch(a)},removeDialogState:function(a,c){a={type:b("ReactComposerVideoXEditDialogActionTypes").REMOVE_DIALOG_STATE,composerID:a,uploadID:c};b("ReactComposerDispatcher").dispatch(a)},saveThumbnailState:function(a,c){a={type:b("ReactComposerVideoXEditDialogActionTypes").SAVE_THUMBNAIL_STATE,composerID:a,uploadID:c};b("ReactComposerDispatcher").dispatch(a)},revertThumbnailState:function(a,c){a={type:b("ReactComposerVideoXEditDialogActionTypes").REVERT_THUMBNAIL_STATE,composerID:a,uploadID:c};b("ReactComposerDispatcher").dispatch(a)},hideDiscardDialog:function(a,c){a={type:b("ReactComposerVideoXEditDialogActionTypes").HIDE_DISCARD_DIALOG,composerID:a,uploadID:c};b("ReactComposerDispatcher").dispatch(a)},showDiscardDialog:function(a,c){a={type:b("ReactComposerVideoXEditDialogActionTypes").SHOW_DISCARD_DIALOG,composerID:a,uploadID:c};b("ReactComposerDispatcher").dispatch(a)},hideDialog:function(a,c){a={type:b("ReactComposerVideoXEditDialogActionTypes").HIDE_DIALOG,composerID:a,uploadID:c};b("ReactComposerDispatcher").dispatch(a)},showDialog:function(a,c){a={type:b("ReactComposerVideoXEditDialogActionTypes").SHOW_DIALOG,composerID:a,uploadID:c};b("ReactComposerDispatcher").dispatch(a)},moveTextBox:function(a,c,d,e){a={type:b("ReactComposerVideoXEditDialogActionTypes").MOVE_TEXT_BOX,textTop:a,textLeft:c,composerID:d,uploadID:e};b("ReactComposerDispatcher").dispatch(a)},resizeTextBox:function(a,c,d,e){a={type:b("ReactComposerVideoXEditDialogActionTypes").RESIZE_TEXT_BOX,textWidth:a,textHeight:c,composerID:d,uploadID:e};b("ReactComposerDispatcher").dispatch(a)},updateThumbnailText:function(a,c,d){a={type:b("ReactComposerVideoXEditDialogActionTypes").UPDATE_THUMBNAIL_TEXT,thumbnailText:a,composerID:c,uploadID:d};b("ReactComposerDispatcher").dispatch(a)},setVideoDimensions:function(a,c,d,e){a={type:b("ReactComposerVideoXEditDialogActionTypes").SET_VIDEO_DIMENSIONS,videoWidth:a,videoHeight:c,composerID:d,uploadID:e};b("ReactComposerDispatcher").dispatch(a)},setCustomThumbnailDimensions:function(a,c,d,e){a={type:b("ReactComposerVideoXEditDialogActionTypes").SET_CUSTOM_THUMBNAIL_DIMENSIONS,customThumbnailWidth:a,customThumbnailHeight:c,composerID:d,uploadID:e};b("ReactComposerDispatcher").dispatch(a)},setTextColor:function(a,c,d){a={type:b("ReactComposerVideoXEditDialogActionTypes").SET_TEXT_COLOR,color:a,composerID:c,uploadID:d};b("ReactComposerDispatcher").dispatch(a)},setTextFont:function(a,c,d){a={type:b("ReactComposerVideoXEditDialogActionTypes").SET_TEXT_FONT,font:a,composerID:c,uploadID:d};b("ReactComposerDispatcher").dispatch(a)},setTextAlignment:function(a,c,d){a={type:b("ReactComposerVideoXEditDialogActionTypes").SET_TEXT_ALIGNMENT,alignment:a,composerID:c,uploadID:d};b("ReactComposerDispatcher").dispatch(a)},setTextSize:function(a,c,d){a={type:b("ReactComposerVideoXEditDialogActionTypes").SET_TEXT_SIZE,textSize:a,composerID:c,uploadID:d};b("ReactComposerDispatcher").dispatch(a)}};e.exports=a}),null);
__d("ReactComposerVideoXContainer.react",["cx","requireCond","EventListener","PagesComposerContextUtils","PagesComposerUtils","React","ReactComposerContextTypes","ReactComposerMediaUploadActions","ReactComposerMediaUploadStore","ReactComposerPropsAndStoreBasedStateMixin","ReactComposerStore","ReactComposerVideoX.react","ReactComposerVideoXEditDialogActions","ReactDOM","VideoComposerDispatchers","cr:974995","generateVideoThumbnails","gkx","ifRequired","promiseDone","prop-types"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("PagesComposerContextUtils").isPageAdminPostingInPage,i=b("PagesComposerUtils").logVideoUploadFunnelEvents,j=b("VideoComposerDispatchers").DEFAULT_VIDEO_COMPOSER_ID,k=100,l=100,m="/images/icons/timeline/placeholder/placeholder-movies.png";a=[b("ReactComposerStore")].concat(b("cr:974995")?[b("cr:974995")]:[]);c=b("React").createClass({displayName:"ReactComposerVideoXContainer",contextTypes:b("ReactComposerContextTypes"),mixins:[b("ReactComposerPropsAndStoreBasedStateMixin").apply(void 0,a)],_loadedmetadataListener:null,propTypes:{dragHandler:b("prop-types").shape({add:b("prop-types").func.isRequired,remove:b("prop-types").func.isRequired}),label:b("prop-types").string.isRequired,photoID:b("prop-types").string,uploadID:b("prop-types").string.isRequired,fileURL:b("prop-types").string.isRequired,isSpherical:b("prop-types").bool,allowTextOnThumbnail:b("prop-types").bool,shouldResetVideoComposer:b("prop-types").bool,metadata:b("prop-types").object},statics:{calculateState:function(a,c){var d=b("cr:974995")?b("cr:974995").isProcessingCaptions(a,c.photoID):!1,e=b("ReactComposerMediaUploadStore").getMediaUpload(a.toString(),c.uploadID);c=b("ReactComposerMediaUploadStore").getUploadIndex(a.toString(),c.uploadID);e=e&&e.thumbSrc?e.thumbSrc:m;return{isProcessingCaptions:d,posting:b("ReactComposerStore").isPosting(a),thumbSrc:e,uploadIndex:c}}},componentDidMount:function(){var a=this,c=b("ReactDOM").findDOMNode(this.refs.videoPlayer);this.state.thumbSrc===m&&(this._loadedmetadataListener=b("EventListener").listen(c,"loadedmetadata",this.generateVideoThumbnails));window.setTimeout(function(){var c=a.props.dragHandler;c&&c.add(b("ReactDOM").findDOMNode(a.refs.container))},0)},generateVideoThumbnails:function(){var a=this,c=b("ReactDOM").findDOMNode(this.refs.videoPlayer);b("promiseDone")(b("generateVideoThumbnails")(c,l,k,1),function(c){b("ReactComposerMediaUploadActions").setVideoThumbnail(a.context.composerID,a.props.uploadID,c.thumbnails[0].getURL())});b("promiseDone")(b("generateVideoThumbnails")(c,465,284,10,"contain"),function(c){b("ReactComposerVideoXEditDialogActions").updateGeneratedThumbnails(c.thumbnails,a.context.composerID,a.props.uploadID)});c instanceof HTMLVideoElement&&b("ReactComposerVideoXEditDialogActions").setVideoDimensions(c.videoWidth,c.videoHeight,this.context.composerID,this.props.uploadID)},componentWillUnmount:function(){var a=this;this._loadedmetadataListener&&(this._loadedmetadataListener.remove(),this._loadedmetadataListener=null);window.setTimeout(function(){var c=a.props.dragHandler;c&&c.remove(b("ReactDOM").findDOMNode(a.refs.container))},0)},render:function(){var a=b("gkx")("678777"),c=a&&this.props.metadata&&this.props.metadata.format&&this.props.metadata.format.duration!=null?Math.floor(this.props.metadata.format.duration):null;return b("React").jsxs("div",{children:[b("React").jsx(b("ReactComposerVideoX.react"),{composerID:this.context.composerID,duration:c,isProcessingCaptions:this.state.isProcessingCaptions,isSpherical:!!this.props.isSpherical,label:this.props.label,onRemoveButtonClicked:this._onRemoveButtonClicked,posting:this.state.posting,ref:"container",thumbSrc:this.state.thumbSrc,uploadID:this.props.uploadID,uploadIndex:this.state.uploadIndex,useThumbnailsRedesign:a,usingPlaceholderThumbnail:this.state.thumbSrc===m,videoID:this.props.photoID,videoURL:this.props.fileURL}),this._getVideoElement()]})},_getVideoElement:function(){return b("React").jsx("video",{ref:"videoPlayer",className:"_2mpk",src:this.props.fileURL})},_onRemoveButtonClicked:function(){h(this.context.actorID,this.context.composerID,this.context.targetID)&&i(this.context.composerID,"video_upload_xout"),b("ReactComposerMediaUploadActions").removeMediaUpload(this.context.composerID,this.props.uploadID),b("ReactComposerVideoXEditDialogActions").removeDialogState(this.context.composerID,this.props.uploadID),this.props.shouldResetVideoComposer&&b("ifRequired")("VideoComposerActions",function(a){a.resetComposer(j)})}});e.exports=c}),null);
__d("ReactComposerVideoXUploadPlaceholder.react",["cx","CircularProgressBar.react","LoadingIndicator.react","React","ReactComposerPhotoUploadState","XUICloseButton.react","prop-types"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){__p&&__p();var a=null,c=null,d=null,e=this.props.uploadState;e=e===b("ReactComposerPhotoUploadState").PHOTO_UPLOAD_UPLOADING;var f=null;this.props.useProgressTransformX?f=.99*parseFloat(this.props.uploadProgress)+1:f=Math.max(1,parseInt(this.props.uploadProgress,10));var g=50*Math.log10(f),h=this.props.useProgressLinearity?this.props.useProgressLinearity:0;h>0&&(g-=(g-f)*h);this.props.useRealProgressPercentage&&(g=parseFloat(this.props.uploadProgress));if(e){f="_5t36"+(e?" _5t3f":"");a=b("React").jsx(b("CircularProgressBar.react"),{percentComplete:g,className:f})}else d=b("React").jsx(b("XUICloseButton.react"),{className:"_5t3o",onClick:this.props.onRemoveButtonClicked,size:"medium",shade:"dark"}),c=b("React").jsx(b("LoadingIndicator.react"),{className:"_1b00",color:"white",size:"medium"});return b("React").jsxs("div",{className:"_417d",children:[d,a,c]})};return c}(b("React").PureComponent);a.propTypes={onRemoveButtonClicked:(c=b("prop-types")).func.isRequired,uploadID:c.string.isRequired,uploadState:c.oneOf(Object.keys(b("ReactComposerPhotoUploadState"))).isRequired,uploadProgress:c.number,canSeeCircularProgress:c.bool,useRealProgressPercentage:c.bool,useProgressLinearity:c.number,useProgressTransformX:c.number};e.exports=a}),null);
__d("ReactComposerVideoXUploadPlaceholderContainer.react",["React","ReactComponentWithPureRenderMixin","ReactComposerContextTypes","ReactComposerMediaUploadActions","ReactComposerMediaUploadStore","ReactComposerPropsAndStoreBasedStateMixin","ReactComposerVideoXUploadPlaceholder.react","prop-types"],(function(a,b,c,d,e,f){"use strict";a=b("React").createClass({displayName:"ReactComposerVideoXUploadPlaceholderContainer",contextTypes:b("ReactComposerContextTypes"),mixins:[b("ReactComponentWithPureRenderMixin"),b("ReactComposerPropsAndStoreBasedStateMixin")(b("ReactComposerMediaUploadStore"))],propTypes:{uploadID:b("prop-types").string.isRequired},statics:{calculateState:function(a,c){a=b("ReactComposerMediaUploadStore").getMediaUpload(a,c.uploadID);return{uploadProgress:a.progress,uploadState:a.state,useRealProgressPercentage:a.useRealProgressPercentage,useProgressLinearity:a.useProgressLinearity,useProgressTransformX:a.useProgressTransformX}}},render:function(){return b("React").jsx(b("ReactComposerVideoXUploadPlaceholder.react"),babelHelpers["extends"]({},this.props,this.state,{onRemoveButtonClicked:this._onRemoveButtonClicked}))},_onRemoveButtonClicked:function(){b("ReactComposerMediaUploadActions").removeMediaUpload(this.context.composerID,this.props.uploadID)}});e.exports=a}),null);
__d("ReactComposerCrossPostToInstagramRow.react",["cx","fbt","FBToggleSwitch.react","LeftFillRightFitLayout.react","PagesComposerActions","React","XUICardSection.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=function(a){b("PagesComposerActions").setInstagramCrossPosting(d.props.composerID,a)},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){var a;return(a=b("React")).jsx(b("XUICardSection.react"),{className:"_1nth",children:a.jsxs(b("LeftFillRightFitLayout.react"),{children:[a.jsxs("div",{children:[a.jsx("div",{className:"_1nti"}),a.jsx("div",{className:"_1ntj",children:h._("Post this photo to Instagram?")})]}),a.jsx("div",{className:"_1ntk",children:a.jsx(b("FBToggleSwitch.react"),{onToggle:this.$1})})]})})};return c}(b("React").PureComponent);e.exports=a}),null);
__d("VideoBroadcastFlowTypes",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({NORMAL_LATENCY:"NORMAL_LATENCY",LOW_LATENCY:"LOW_LATENCY",HIGH_LATENCY:"HIGH_LATENCY"});e.exports={BroadcastPlaybackMode:a}}),null);
__d("LiveVideoBroadcastAPIActions",["LiveVideoBroadcastDispatcher","VideoBroadcastFlowTypes"],(function(a,b,c,d,e,f){__p&&__p();b("VideoBroadcastFlowTypes").BroadcastPlaybackMode;a={deleteAPIReplayVideo:function(){var a={type:"DELETE_API_REPLAY_VIDEO"};b("LiveVideoBroadcastDispatcher").dispatch(a)},apiBroadcastStopped:function(){var a={type:"API_BROADCAST_STOPPED"};b("LiveVideoBroadcastDispatcher").dispatch(a)},apiGoLiveClicked:function(){var a={type:"API_GO_LIVE_CLICKED"};b("LiveVideoBroadcastDispatcher").dispatch(a)},addInputStream:function(){var a={type:"ADD_INPUT_STREAM"};b("LiveVideoBroadcastDispatcher").dispatch(a)},setIs360Video:function(a){a={type:"SET_IS_360_VIDEO",value:a};b("LiveVideoBroadcastDispatcher").dispatch(a)},setIs360Audio:function(a){a={type:"SET_IS_360_AUDIO",value:a};b("LiveVideoBroadcastDispatcher").dispatch(a)},setIsSingleFisheye:function(a){a={type:"SET_IS_SINGLE_FISHEYE",value:a};b("LiveVideoBroadcastDispatcher").dispatch(a)},setSingleFisheyeFOV:function(a){a={type:"SET_SINGLE_FISHEYE_FOV",value:a};b("LiveVideoBroadcastDispatcher").dispatch(a)},update360Configuration:function(a){a={type:"UPDATE_360_CONFIGURATION",value:a};b("LiveVideoBroadcastDispatcher").dispatch(a)},setEmbeddable:function(a){a={type:"SET_EMBEDDABLE",value:a};b("LiveVideoBroadcastDispatcher").dispatch(a)},setShouldExpireAfterGoLive:function(a){a={type:"SET_SHOULD_EXPIRE_AFTER_GO_LIVE",value:a};b("LiveVideoBroadcastDispatcher").dispatch(a)},setShowEventLogDialog:function(a){a={type:"SET_SHOW_EVENT_LOG_DIALOG",value:a};b("LiveVideoBroadcastDispatcher").dispatch(a)},setContinuous:function(a){a={type:"SET_CONTINUOUS",value:a};b("LiveVideoBroadcastDispatcher").dispatch(a)},setShouldShowGraphicContentWarning:function(a){a={type:"SET_SHOULD_SHOW_GRAPHIC_CONTENT_WARNING",value:a};b("LiveVideoBroadcastDispatcher").dispatch(a)},setCopyrighted:function(a){a={type:"SET_COPYRIGHTED",value:a};b("LiveVideoBroadcastDispatcher").dispatch(a)},setCopyrightMonitoringType:function(a){a={type:"SET_COPYRIGHT_MONITORING_TYPE",value:a};b("LiveVideoBroadcastDispatcher").dispatch(a)},setCopyrightContentCategory:function(a){a={type:"SET_COPYRIGHT_CONTENT_CATEGORY",value:a};b("LiveVideoBroadcastDispatcher").dispatch(a)},setCopyrightOwnershipCountries:function(a,c){a={type:"SET_COPYRIGHT_OWNERSHIP_COUNTRIES",ownershipCountries:a,areCountriesIncluded:c};b("LiveVideoBroadcastDispatcher").dispatch(a)},setCopyrightRuleID:function(a){a={type:"SET_COPYRIGHT_RULE_ID",value:a};b("LiveVideoBroadcastDispatcher").dispatch(a)},updateCopyrightWhitelistedFBUsers:function(a){a={type:"UPDATE_COPYRIGHT_WHITELISTED_FB_USERS",value:a};b("LiveVideoBroadcastDispatcher").dispatch(a)},updateCopyrightWhitelistedIGUserNames:function(a){a={type:"UPDATE_COPYRIGHT_WHITELISTED_IG_USERNAMES",value:a};b("LiveVideoBroadcastDispatcher").dispatch(a)},updateBackupInputStream:function(a,c){a={type:"UPDATE_BACKUP_INPUT_STREAM",backupStreamURL:a,backupSecureStreamURL:c};b("LiveVideoBroadcastDispatcher").dispatch(a)},broadcastErrorReceived:function(){var a={type:"BROADCAST_ERROR_RECEIVED"};b("LiveVideoBroadcastDispatcher").dispatch(a)},errorStartingAPIBroadcast:function(a,c){a={type:"ERROR_STARTING_API_BROADCAST",errorType:a,additionalInfo:c};b("LiveVideoBroadcastDispatcher").dispatch(a)},setSelectedEncoderType:function(a){a={type:"SET_SELECTED_ENCODER_TYPE",encoderType:a};b("LiveVideoBroadcastDispatcher").dispatch(a)},setIsFundraiserSelected:function(a){a={type:"SET_IS_FUNDRAISER_SELECTED",value:a};b("LiveVideoBroadcastDispatcher").dispatch(a)},setIsRehearsal:function(a){a={type:"SET_IS_REHEARSAL",value:a};b("LiveVideoBroadcastDispatcher").dispatch(a)},setCommentatingDisabled:function(a){a={type:"SET_COMMENTATING_DISABLED",value:a};b("LiveVideoBroadcastDispatcher").dispatch(a)},setIsrEnabled:function(a){a={type:"SET_ISR_ENABLED",value:a};b("LiveVideoBroadcastDispatcher").dispatch(a)},setBroadcastPlaybackMode:function(a){a={type:"SET_BROADCAST_PLAYBACK_MODE",value:a};b("LiveVideoBroadcastDispatcher").dispatch(a)},setEnableEventTicketPromotion:function(a){a={type:"SET_ENABLE_EVENT_TICKET_PROMOTION",value:a};b("LiveVideoBroadcastDispatcher").dispatch(a)},deleteStreamBehaviorChanged:function(a){a={type:"DELETE_STREAM_BEHAVIOR_CHANGED",value:a};b("LiveVideoBroadcastDispatcher").dispatch(a)},commentModerationChanged:function(){var a={type:"COMMENT_MODERATION_CHANGED"};b("LiveVideoBroadcastDispatcher").dispatch(a)}};e.exports=a}),null);
__d("XReactComposerCollectionAttachmentBootstrapController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/react_composer/collection/bootstrap/",{composer_id:{type:"String",required:!0},canvas_id:{type:"FBID",required:!0},target_id:{type:"FBID",required:!0}})}),null);
__d("XReactComposerCollectionAttachmentPublishController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/react_composer/collection/publish/",{canvas_id:{type:"FBID",required:!0},featured_retailer_ids:{type:"StringSet",required:!0}})}),null);