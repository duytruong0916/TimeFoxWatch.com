if (self.CavalryLogger) { CavalryLogger.start_js(["e4Z26"]); }

__d("EventsArtistTopTracksRendererQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"LocalArgument",name:"eventID",type:"ID!",defaultValue:null}],b=[{kind:"Variable",name:"id",variableName:"eventID"}],c={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},d={kind:"ScalarField",alias:"musicTitle",name:"music_title",args:null,storageKey:null},e={kind:"ScalarField",alias:"durationMs",name:"duration_ms",args:null,storageKey:null},f={kind:"ScalarField",alias:"audioUrl",name:"audio_url",args:null,storageKey:null},g={kind:"ScalarField",alias:"collectionNames",name:"collection_names",args:null,storageKey:null},h={kind:"ScalarField",alias:"coverUrl",name:"cover_url",args:null,storageKey:null},i={kind:"ScalarField",alias:"artistNames",name:"artist_names",args:null,storageKey:null},j={kind:"ScalarField",alias:"externalContentId",name:"external_content_id",args:null,storageKey:null},k={kind:"ScalarField",alias:null,name:"url",args:null,storageKey:null};return{kind:"Request",fragment:{kind:"Fragment",name:"EventsArtistTopTracksRendererQuery",type:"Query",metadata:null,argumentDefinitions:a,selections:[{kind:"LinkedField",alias:null,name:"event",storageKey:null,args:b,concreteType:"Event",plural:!1,selections:[{kind:"LinkedField",alias:"topSongs",name:"top_songs",storageKey:null,args:null,concreteType:"ExternalSong",plural:!0,selections:[c,d,e,f,g,h,i,j,{kind:"LinkedField",alias:null,name:"owner",storageKey:null,args:null,concreteType:null,plural:!1,selections:[c]},k]}]}]},operation:{kind:"Operation",name:"EventsArtistTopTracksRendererQuery",argumentDefinitions:a,selections:[{kind:"LinkedField",alias:null,name:"event",storageKey:null,args:b,concreteType:"Event",plural:!1,selections:[{kind:"LinkedField",alias:"topSongs",name:"top_songs",storageKey:null,args:null,concreteType:"ExternalSong",plural:!0,selections:[c,d,e,f,g,h,i,j,{kind:"LinkedField",alias:null,name:"owner",storageKey:null,args:null,concreteType:null,plural:!1,selections:[{kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},c]},k]},c]}]},params:{operationKind:"query",name:"EventsArtistTopTracksRendererQuery",id:"1878184222266496",text:null,metadata:{}}}}();e.exports=a}),null);
__d("Audio",["EventEmitter","Run","nullthrows"],(function(a,b,c,d,e,f){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c;c=a.call(this)||this;c.resetAudioStreams();b("Run").onLeave(c.$Audio3.bind(babelHelpers.assertThisInitialized(c)));return c}var d=c.prototype;d.addStream=function(a,c){this.$Audio1.has(a)||(this.$Audio1.set(a,[]),this.$Audio2.set(a,[]));var d=b("nullthrows")(this.$Audio1.get(a)).length;c=this.$Audio4(a,d,c.preload);b("nullthrows")(this.$Audio1.get(a)).push(c);b("nullthrows")(this.$Audio2.get(a)).push(!1);return d};d.play=function(a,c){if(!this.$Audio1.has(a)||b("nullthrows")(this.$Audio2.get(a))[c])return;b("nullthrows")(this.$Audio1.get(a))[c].play();b("nullthrows")(this.$Audio2.get(a))[c]=!0};d.pause=function(a,c){if(!this.$Audio1.has(a)||!b("nullthrows")(this.$Audio2.get(a))[c])return;b("nullthrows")(this.$Audio1.get(a))[c].pause();b("nullthrows")(this.$Audio2.get(a))[c]=!1};d.seek=function(a,c,d){b("nullthrows")(this.$Audio1.get(a))[c].currentTime=d};d.setVolume=function(a,c,d){b("nullthrows")(this.$Audio1.get(a))[c].volume=d};d.mute=function(a,c){b("nullthrows")(this.$Audio1.get(a))[c].muted=!0};d.unmute=function(a,c){b("nullthrows")(this.$Audio1.get(a))[c].muted=!1};d.getBufferedPosition=function(a,c){a=b("nullthrows")(this.$Audio1.get(a))[c].buffered;c=a.length;return c?a.end(c-1):0};d.getDuration=function(a,c){return b("nullthrows")(this.$Audio1.get(a))[c].duration};d.getAudioStream=function(a){return this.$Audio1.get(a)};d.getIsPlaying=function(a){return this.$Audio2.get(a)};d.resetAudioStreams=function(){this.$Audio1=new Map(),this.$Audio2=new Map()};d.$Audio3=function(){__p&&__p();var a=this;b("Run").onAfterLoad(function(){b("Run").onLeave(a.$Audio3.bind(a))});for(var c=this.$Audio2,d=Array.isArray(c),e=0,c=d?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=c.length)break;f=c[e++]}else{e=c.next();if(e.done)break;f=e.value}f=f;var g=f[0];f=f[1];for(var h=0,i;h<f.length;h++){i=f[h];if(i){i=b("nullthrows")(this.$Audio1.get(g))[h];i.pause();i.remove()}}}this.resetAudioStreams()};d.$Audio4=function(a,b,c){__p&&__p();var d=this,e=document.createElement("audio");e.setAttribute("preload",c?"auto":"metadata");e.addEventListener("loadedmetadata",function(c){d.$Audio5("AUDIO_UPDATE_DURATION",a,b,e.duration)});e.addEventListener("progress",function(c){c=e.buffered.length;d.$Audio5("AUDIO_UPDATE_BUFFER",a,b,c?e.buffered.end(c-1):0)});e.addEventListener("timeupdate",function(c){d.$Audio5("AUDIO_UPDATE_TIME",a,b,e.currentTime)});e.addEventListener("ended",function(c){d.$Audio5("AUDIO_FINISH",a,b)});e.src=a;return e};d.$Audio5=function(a,b,c,d){b={uri:b,index:c,value:d};this.emit(a,b)};return c}(b("EventEmitter"));e.exports=new a()}),null);
__d("AudioEvents",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({CREATE_STREAM:"AUDIO_CREATE_STREAM",FINISH:"AUDIO_FINISH",LOAD:"AUDIO_LOAD",MUTE:"AUDIO_MUTE",PAUSE:"AUDIO_PAUSE",PLAY:"AUDIO_PLAY",REPLAY:"AUDIO_REPLAY",SCRUB_BEGIN:"AUDIO_SCRUB_BEGIN",SCRUB_END:"AUDIO_SCRUB_END",SEEK:"AUDIO_SEEK",STREAM_CHANGE:"AUDIO_STREAM_CHANGE",UNMUTE:"AUDIO_UNMUTE",UPDATE_BUFFER:"AUDIO_UPDATE_BUFFER",UPDATE_DURATION:"AUDIO_UPDATE_DURATION",UPDATE_TIME:"AUDIO_UPDATE_TIME",VOLUME_CHANGE:"AUDIO_VOLUME_CHANGE",REPLACE_STREAM:"AUDIO_REPLACE_STREAM",FETCH_URL:"AUDIO_FETCH_URL",BLOCK_FETCH:"AUDIO_BLOCK_FETCH",ALLOW_FETCH:"AUDIO_ALLOW_FETCH",SOUNDCLOUD_CHECKPOINT:"AUDIO_SOUNDCLOUD_CHECKPOINT"})}),null);
__d("MusicStoryDispatcher",["ExplicitRegistrationDispatcher"],(function(a,b,c,d,e,f){a=function(a){"use strict";babelHelpers.inheritsLoose(b,a);function b(b){b=a.call(this,b)||this;babelHelpers.assertThisInitialized(b).dispatch=b.dispatch.bind(babelHelpers.assertThisInitialized(b));return b}return b}(b("ExplicitRegistrationDispatcher"));e.exports=new a({strict:!0})}),null);
__d("MusicStoryAudioActions",["AudioEvents","MusicStoryDispatcher"],(function(a,b,c,d,e,f){__p&&__p();a={createStream:function(a,c,d,e,f){a={type:"AUDIO_CREATE_STREAM",titleUriList:a,uniqueId:d,extraData:e,isDynamicUri:f};c&&(a.loggingData=c);b("MusicStoryDispatcher").dispatch(a)},play:function(a){a={type:"AUDIO_PLAY",uniqueId:a};b("MusicStoryDispatcher").dispatch(a)},pause:function(a){a={type:"AUDIO_PAUSE",uniqueId:a};b("MusicStoryDispatcher").dispatch(a)},scrubBegin:function(a){a={type:"AUDIO_SCRUB_BEGIN",uniqueId:a};b("MusicStoryDispatcher").dispatch(a)},scrubEnd:function(a,c){a={type:"AUDIO_SCRUB_END",uniqueId:a,value:c};b("MusicStoryDispatcher").dispatch(a)},mute:function(a){a={type:"AUDIO_MUTE",uniqueId:a};b("MusicStoryDispatcher").dispatch(a)},unmute:function(a){a={type:"AUDIO_UNMUTE",uniqueId:a};b("MusicStoryDispatcher").dispatch(a)},setVolume:function(a,c){a={type:"AUDIO_VOLUME_CHANGE",uniqueId:a,value:c};b("MusicStoryDispatcher").dispatch(a)},updatePlaybackPos:function(a,c){a={type:"AUDIO_UPDATE_TIME",uniqueId:a,value:c};b("MusicStoryDispatcher").isDispatching()||b("MusicStoryDispatcher").dispatch(a)},updateDuration:function(a,c,d,e){a={type:"AUDIO_UPDATE_DURATION",uniqueId:a,value:c,uri:d,copyNumber:e};b("MusicStoryDispatcher").dispatch(a)},updateBufferedPos:function(a,c){a={type:"AUDIO_UPDATE_BUFFER",uniqueId:a,value:c};b("MusicStoryDispatcher").isDispatching()||b("MusicStoryDispatcher").dispatch(a)},updateIsFinished:function(a){a={type:"AUDIO_FINISH",uniqueId:a};b("MusicStoryDispatcher").dispatch(a)},changeStream:function(a,c,d){a={type:"AUDIO_STREAM_CHANGE",uniqueId:a,value:c,previousTitle:d};b("MusicStoryDispatcher").dispatch(a)},deleteStream:function(a){a={type:b("AudioEvents").DELETE_STREAM,uniqueId:a};b("MusicStoryDispatcher").dispatch(a)},replaceStream:function(a,c){c={type:"AUDIO_REPLACE_STREAM",stream:c,uniqueId:a};b("MusicStoryDispatcher").dispatch(c)},fetchURL:function(a,c,d){d===void 0&&(d=-1);a={type:"AUDIO_FETCH_URL",uniqueId:a,subsequentAction:c,value:d};b("MusicStoryDispatcher").dispatch(a)},blockFetches:function(a){a={type:"AUDIO_BLOCK_FETCH",uniqueId:a};b("MusicStoryDispatcher").dispatch(a)},allowFetches:function(a){a={type:"AUDIO_ALLOW_FETCH",uniqueId:a};b("MusicStoryDispatcher").dispatch(a)}};e.exports=a}),null);
__d("AudioMetaData",["immutable"],(function(a,b,c,d,e,f){a=function(a){"use strict";babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(b("immutable").Record({title:"",uri:"",duration:0,copyNumber:-1,dynamicUri:"",playbackPosition:-1,soundcloudBeacons:null}));e.exports=a}),null);
__d("AudioStream",["Arbiter","Audio","AudioMetaData","MusicStoryAudioActions","SubscriptionsHandler","curry","immutable"],(function(a,b,c,d,e,f){__p&&__p();var g=1e3;a={bufferedPosition:0,duration:0,isDynamicUri:!1,isFinished:!1,isMuted:!1,isPlaying:!1,isScrubbing:!1,playbackPosition:0,audioMetaDataList:b("immutable").List(),activeTrack:0,volume:1,subscriptions:new(b("SubscriptionsHandler"))(),storyIdentifier:null,blockFetches:!1};var h=["AUDIO_UPDATE_TIME","AUDIO_UPDATE_DURATION","AUDIO_UPDATE_BUFFER","AUDIO_FINISH"];c=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}c.createStream=function(a,d,e,f){var g=new c(),h=b("immutable").List(),i=e.storyIdentifier;e=e.isPermalink;i&&g.subscriptions.addSubscriptions(b("Arbiter").subscribe("Story/delete",b("curry")(c.$AudioStream1,d,i)));for(var j=0,k;j<a.length;j++)k=a[j],k=c.createMetaData(k),f||(k=c.createAudio(k,d,j,e,f)),h=h.push(k);return g.set("audioMetaDataList",h).set("isDynamicUri",f).set("storyIdentifier",i)};c.createMetaData=function(a){return new(b("AudioMetaData"))({title:a.title,uri:a.uri})};c.createAudio=function(a,d,e,f,g){g=a.get(g?"dynamicUri":"uri");f=b("Audio").addStream(g,{preload:f&&e===0});a=a.set("copyNumber",f);for(var e=0;e<h.length;e++){var i=h[e];b("Audio").addListener(i,c.updatePropertyCallback(d,g,a.get("copyNumber"),i))}a.get("playbackPosition")>0&&b("Audio").seek(g,f,a.get("playbackPosition"));return a};c.updatePropertyCallback=function(a,c,d,e){__p&&__p();var f;switch(e){case"AUDIO_UPDATE_TIME":f=b("MusicStoryAudioActions").updatePlaybackPos;break;case"AUDIO_UPDATE_DURATION":f=b("MusicStoryAudioActions").updateDuration;break;case"AUDIO_UPDATE_BUFFER":f=b("MusicStoryAudioActions").updateBufferedPos;break;case"AUDIO_FINISH":f=b("MusicStoryAudioActions").updateIsFinished;break}return function(b){b.uri===c&&b.index===d&&f(a,b.value,b.uri,b.index)}};var d=c.prototype;d.play=function(){var a=this.get("isDynamicUri")?this.getActiveDynamicUri():this.getActiveUri();b("Audio").play(a,this.getActiveCopyNo())};d.pause=function(){var a=this.get("isDynamicUri")?this.getActiveDynamicUri():this.getActiveUri();b("Audio").pause(a,this.getActiveCopyNo())};d.mute=function(){var a=this.get("isDynamicUri")?this.getActiveDynamicUri():this.getActiveUri();b("Audio").mute(a,this.getActiveCopyNo())};d.unmute=function(){var a=this.get("isDynamicUri")?this.getActiveDynamicUri():this.getActiveUri();b("Audio").unmute(a,this.getActiveCopyNo())};d.seek=function(a){var c=this.get("isDynamicUri")?this.getActiveDynamicUri():this.getActiveUri();b("Audio").seek(c,this.getActiveCopyNo(),a)};d.changeVolume=function(a){var c=this.get("isDynamicUri")?this.getActiveDynamicUri():this.getActiveUri();b("Audio").setVolume(c,this.getActiveCopyNo(),a)};d.getActiveTrackTitle=function(){var a=this.get("audioMetaDataList"),b=this.get("activeTrack");return a.get(b).title};d.getActiveTrackDurationMs=function(){var a=this.get("audioMetaDataList"),b=this.get("activeTrack");a=a.get(b).duration;return Math.floor(a*g)};d.getActiveUri=function(){var a=this.get("audioMetaDataList").get(this.get("activeTrack"));return a.get("uri")};d.getActiveDynamicUri=function(){var a=this.get("audioMetaDataList").get(this.get("activeTrack"));return a.get("dynamicUri")};d.getActiveCopyNo=function(){var a=this.get("audioMetaDataList").get(this.get("activeTrack"));return a.get("copyNumber")};d.getBufferedPosition=function(){return b("Audio").getBufferedPosition(this.getActiveUri(),this.getActiveCopyNo())};d.getActiveMetaData=function(){return this.get("audioMetaDataList").get(this.get("activeTrack"))};c.$AudioStream1=function(a,c,d,e){if(c!==e)return;b("MusicStoryAudioActions").deleteStream(a)};return c}(b("immutable").Record(a));e.exports=c}),null);
__d("XSoundCloudAudioURLController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/music/soundcloud/exchange_url/",{})}),null);
__d("MusicStoryAudioStore",["AsyncRequest","AudioStream","FluxReduceStore","MusicStoryAudioActions","MusicStoryDispatcher","XSoundCloudAudioURLController","immutable"],(function(a,b,c,d,e,f){__p&&__p();a={streams:b("immutable").Map()};var g=function(b){"use strict";__p&&__p();babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}var c=a.prototype;c.getStream=function(a){return this.get("streams").get(a)};c.setStream=function(a,b){return this.get("streams").set(a,b)};return a}(b("immutable").Record(a));c=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getInitialState=function(){return new g()};d.getStream=function(a){return this.getState().getStream(a)};d.getBeacons=function(a){return this.getStream(a).getActiveMetaData().get("soundcloudBeacons")};d.getActiveTrackTitle=function(a){a=this.getState().getStream(a);return a.getActiveTrackTitle()};d.getActiveTrackDurationMs=function(a){a=this.getState().getStream(a);return a.getActiveTrackDurationMs()};d.getIsPlaying=function(a){return this.getState().getStream(a).get("isPlaying")};d.getIsDynamicURL=function(a){return this.getState().getStream(a).get("isDynamicUri")};d.reduce=function(a,c){__p&&__p();var d,e=c.uniqueId;switch(c.type){case"AUDIO_CREATE_STREAM":d=b("AudioStream").createStream(c.titleUriList,e,c.extraData,c.isDynamicUri);a=a.set("streams",a.setStream(e,d));return a;case"AUDIO_REPLACE_STREAM":a=a.set("streams",a.setStream(e,c.stream));return a;case"AUDIO_BLOCK_FETCH":d=a.getStream(e);d=d.set("blockFetches",!0);a=this.doBooleanAction(a,e,"AUDIO_PAUSE");a=a.set("streams",a.setStream(e,d));return a;case"AUDIO_ALLOW_FETCH":d=a.getStream(e);d=d.set("blockFetches",!1);a=a.set("streams",a.setStream(e,d));return a;case"AUDIO_FETCH_URL":this.fetchDynamicUri(a.getStream(e),e,c.subsequentAction,c.value);return a;case"AUDIO_PLAY":case"AUDIO_PAUSE":case"AUDIO_MUTE":case"AUDIO_UNMUTE":return this.doBooleanAction(a,e,c.type);case"AUDIO_VOLUME_CHANGE":return this.doNumericAction(a,e,c.type,c.value);case"AUDIO_SCRUB_BEGIN":a.getStream(e).get("isPlaying")&&(a=this.doBooleanAction(a,e,c.type));a=this.setProperty(a,e,"isScrubbing",!0);return a;case"AUDIO_SCRUB_END":a.getStream(e).get("isPlaying")&&(a=this.doBooleanAction(a,e,c.type));a.getStream(e).get("isFinished")&&(a=this.doBooleanAction(a,e,"AUDIO_PLAY"));a=this.doNumericAction(a,e,c.type,c.value);a=this.setProperty(a,e,"isScrubbing",!1);return a;case"AUDIO_UPDATE_TIME":a=this.setProperty(a,e,"playbackPosition",c.value);return this.setMetaDataProperty(a,e,"playbackPosition",c.value);case"AUDIO_UPDATE_DURATION":return this.setDuration(a,e,c.uri,c.copyNumber,c.value);case"AUDIO_UPDATE_BUFFER":return this.setProperty(a,e,"bufferedPosition",c.value);case"AUDIO_FINISH":return this.setIsFinished(a,e,!0);case"AUDIO_STREAM_CHANGE":return this.changeActiveStream(a,e,c.value);default:return a}};d.deleteStream=function(a,b){return this.doBooleanAction(a,b,"AUDIO_PAUSE")};d.changeActiveStream=function(a,b,c){__p&&__p();var d=a.getStream(b),e=d.get("isMuted");d=d.get("volume");a=this.doBooleanAction(a,b,"AUDIO_PAUSE");a=this.doNumericAction(a,b,"AUDIO_SCRUB_END",0);a=this.setProperty(a,b,"activeTrack",c);var f=this.getBufferedPosition(a,b);a=this.setProperty(a,b,"bufferedPosition",f);a=this.setProperty(a,b,"duration",this.getTrackDuration(a,b,c));a=e?this.doBooleanAction(a,b,"AUDIO_MUTE"):this.doBooleanAction(a,b,"AUDIO_UNMUTE");a=this.doNumericAction(a,b,"AUDIO_VOLUME_CHANGE",d);a=this.doBooleanAction(a,b,"AUDIO_PLAY");return a};d.getBufferedPosition=function(a,b){a=a.getStream(b);return a.getBufferedPosition()};d.getTrackDuration=function(a,b,c){a=a.getStream(b);b=a.get("audioMetaDataList");return b.get(c).duration};d.setDuration=function(a,b,c,d,e){__p&&__p();var f=0,g=!1,h=a.getStream(b),i=h.get("audioMetaDataList");i=i.map(function(a){var b=h.get("isDynamicUri")?a.get("dynamicUri"):a.get("uri");b===c&&a.copyNumber===d&&(a=a.set("duration",e),f===h.get("activeTrack")&&(g=!0));f++;return a});h=h.set("audioMetaDataList",i);a=a.set("streams",a.setStream(b,h));g&&(a=this.setProperty(a,b,"duration",e));return a};d.setIsFinished=function(a,b,c){a=this.doBooleanAction(a,b,"AUDIO_PAUSE");a=this.setMetaDataProperty(a,b,"playbackPosition",-1);return this.setProperty(a,b,"isFinished",c)};d.doBooleanAction=function(a,b,c){__p&&__p();var d=[],e=[],f=a.getStream(b);e.push(c==="AUDIO_PLAY"||c==="AUDIO_MUTE"||c==="AUDIO_SCRUB_BEGIN");if(c==="AUDIO_PLAY"||c==="AUDIO_PAUSE"){d.push("isPlaying");var g=a.getStream(b).get("isFinished");c==="AUDIO_PLAY"&&g&&(d.push("isFinished"),e.push(!1))}else(c==="AUDIO_MUTE"||c==="AUDIO_UNMUTE")&&d.push("isMuted");switch(c){case"AUDIO_PLAY":case"AUDIO_SCRUB_END":f.play();break;case"AUDIO_PAUSE":case"AUDIO_SCRUB_BEGIN":f.pause();break;case"AUDIO_MUTE":f.mute();break;case"AUDIO_UNMUTE":f.unmute();break;default:throw new Error("Unsupported boolean action: "+c)}for(var g=0;g<d.length;g++)a=this.setProperty(a,b,d[g],e[g]);return a};d.fetchDynamicUri=function(a,c,d,e){__p&&__p();new(b("AsyncRequest"))().setURI(b("XSoundCloudAudioURLController").getURIBuilder().getURI()).setMethod("POST").setData({endpoint_url:a.getActiveUri()}).setHandler(function(f){__p&&__p();var g=f.payload.media;f=f.payload.beacons;var h=a.getActiveMetaData(),i=document.createElement("audio");i=i.canPlayType("application/vnd.apple.mpegURL")!=="";i=i?g.hls:g.http;h=h.set("dynamicUri",i);h=h.set("soundcloudBeacons",f);h=b("AudioStream").createAudio(h,c,-1,!1,!0);g=a.get("audioMetaDataList").set(a.get("activeTrack"),h);a=a.set("audioMetaDataList",g);b("MusicStoryAudioActions").replaceStream(c,a);switch(d){case"AUDIO_PLAY":b("MusicStoryAudioActions").play(c,f.play);break;case"AUDIO_SCRUB_END":b("MusicStoryAudioActions").scrubEnd(c,e);break;default:break}b("MusicStoryAudioActions").allowFetches(c)}).setErrorHandler(function(a){}).send()};d.doNumericAction=function(a,b,c,d){var e,f=a.getStream(b);if(c==="AUDIO_SCRUB_END")f.seek(d),e="playbackPosition";else if(c==="AUDIO_VOLUME_CHANGE")f.changeVolume(d),e="volume";else throw new Error("Unsupported integer action: "+c);return this.setProperty(a,b,e,d)};d.setProperty=function(a,b,c,d){var e=a.getStream(b);e=e.set(c,d);return a.set("streams",a.setStream(b,e))};d.setMetaDataProperty=function(a,b,c,d){var e=a.getStream(b),f=e.get("activeTrack"),g=e.get("audioMetaDataList"),h=g.get(f);h=h.set(c,d);g=g.set(f,h);e=e.set("audioMetaDataList",g);return a.set("streams",a.setStream(b,e))};return c}(b("FluxReduceStore"));c.__moduleID=e.id;e.exports=new c(b("MusicStoryDispatcher"))}),null);
__d("MusicStoryBanzaiFeedLogger",["Banzai"],(function(a,b,c,d,e,f){a={logOutboundClick:function(a){a&&b("Banzai").post("music_story_outbound_click",a)}};e.exports=a}),null);
__d("MusicStoryLoggerEvents",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({CTA_CLICK:"music_cta_click",ERROR:"music_error",OPEN:"music_open",PAUSE:"music_pause",PLAY:"music_play",PLAY_REQUESTED:"music_play_requested",REACHED_END:"music_reached_end",STALL:"music_stall",SOUNDCLOUD_CHECKPOINT:"music_soundcloud_checkpoint"})}),null);
__d("MusicStoryTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("music_story_logger:MusicStoryLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("music_story_logger:MusicStoryLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("music_story_logger:MusicStoryLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setAlbumTitle=function(a){this.$1.album_title=a;return this};c.setArtistName=function(a){this.$1.artist_name=a;return this};c.setAudioDurationMs=function(a){this.$1.audio_duration_ms=a;return this};c.setAudioTitle=function(a){this.$1.audio_title=a;return this};c.setClientUserID=function(a){this.$1.client_userid=a;return this};c.setContainermodule=function(a){this.$1.containermodule=a;return this};c.setContentID=function(a){this.$1.content_id=a;return this};c.setCtaAction=function(a){this.$1.cta_action=a;return this};c.setError=function(a){this.$1.error=a;return this};c.setEvent=function(a){this.$1.event=a;return this};c.setHasMinutiae=function(a){this.$1.has_minutiae=a;return this};c.setMinutiaeID=function(a){this.$1.minutiae_id=a;return this};c.setMusicID=function(a){this.$1.music_id=a;return this};c.setPlatformName=function(a){this.$1.platform_name=a;return this};c.setPlayDurationMs=function(a){this.$1.play_duration_ms=a;return this};c.setPlaylistName=function(a){this.$1.playlist_name=a;return this};c.setStallDurationMs=function(a){this.$1.stall_duration_ms=a;return this};c.setStartDelayMs=function(a){this.$1.start_delay_ms=a;return this};c.setStoryType=function(a){this.$1.story_type=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setUnplayedBufferTimeMs=function(a){this.$1.unplayed_buffer_time_ms=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};return a}();c={album_title:!0,artist_name:!0,audio_duration_ms:!0,audio_title:!0,client_userid:!0,containermodule:!0,content_id:!0,cta_action:!0,error:!0,event:!0,has_minutiae:!0,minutiae_id:!0,music_id:!0,platform_name:!0,play_duration_ms:!0,playlist_name:!0,stall_duration_ms:!0,start_delay_ms:!0,story_type:!0,time:!0,unplayed_buffer_time_ms:!0,weight:!0};e.exports=a}),null);
__d("MusicStoryEventLogger",["MusicStoryLoggerEvents","MusicStoryTypedLogger"],(function(a,b,c,d,e,f){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);c.isValidRequiredData=function(a){return Object.prototype.hasOwnProperty.call(a,"artist_name")&&Object.prototype.hasOwnProperty.call(a,"content_id")&&Object.prototype.hasOwnProperty.call(a,"has_minutiae")&&Object.prototype.hasOwnProperty.call(a,"minutiae_id")&&Object.prototype.hasOwnProperty.call(a,"music_id")&&Object.prototype.hasOwnProperty.call(a,"platform_name")&&Object.prototype.hasOwnProperty.call(a,"story_type")};function c(b){var d;if(!c.isValidRequiredData(b))throw new Error("Cannot create MusicStoryEventLogger, RequiredData: "+JSON.stringify(b)+" is missing required fields ");d=a.call(this)||this;d.$MusicStoryEventLogger1=b;d.$MusicStoryEventLogger2=-1;return d}var d=c.prototype;d.logRequiredData=function(){this.updateData(this.$MusicStoryEventLogger1);return this};d.logAdditionalData=function(a){this.updateData(a);return this};d.logEvent=function(a,c){__p&&__p();c===void 0&&(c={});var d=[];switch(a){case b("MusicStoryLoggerEvents").CTA_CLICK:d.push("cta_action");break;case b("MusicStoryLoggerEvents").ERROR:d.push("error");break;case b("MusicStoryLoggerEvents").PLAY:d.push("audio_duration_ms");this.startPlaytimeTracker();break;case b("MusicStoryLoggerEvents").PAUSE:case b("MusicStoryLoggerEvents").REACHED_END:d.push("play_duration_ms");if(this.$MusicStoryEventLogger2<0)return;c.play_duration_ms=this.stopPlaytimeTracker();break;case b("MusicStoryLoggerEvents").STALL:break;default:break}for(var e=0;e<d.length;e++){var f=d[e];if(!Object.prototype.hasOwnProperty.call(c,f))throw new Error("The field: "+f+" must be logged with "+a)}this.logRequiredData().logAdditionalData(c).setEvent(a).log();this.clear()};d.startPlaytimeTracker=function(){this.$MusicStoryEventLogger2=Date.now()};d.stopPlaytimeTracker=function(){if(this.$MusicStoryEventLogger2<0)throw new Error("Cannot log event without a play event logged first");var a=Date.now()-this.$MusicStoryEventLogger2;this.$MusicStoryEventLogger2=-1;return a};return c}(b("MusicStoryTypedLogger"));e.exports=a}),null);
__d("MusicStoryLoggingStore",["FluxReduceStore","MusicStoryAudioStore","MusicStoryDispatcher","MusicStoryEventLogger","immutable"],(function(a,b,c,d,e,f){__p&&__p();var g=1e3;c={loggerIndex:(a=b("immutable")).Map(),soundcloudCheckpointIndex:a.Map()};var h=function(b){"use strict";__p&&__p();babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}var c=a.prototype;c.getLogger=function(a){return this.get("loggerIndex").get(a)};c.getCheckpointTracker=function(a){return this.get("soundcloudCheckpointIndex").get(a)};return a}(a.Record(c)),i=function(b){"use strict";babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(a.Record({lastUpdateTimeStamp:-1,timePlayedSinceLastCheckpoint:0}));d=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getInitialState=function(){return new h()};d.reduce=function(a,c){__p&&__p();var d=c.uniqueId,e=a.getLogger(d);if(e===null)return a;var f=b("MusicStoryAudioStore").getActiveTrackDurationMs(d),h=b("MusicStoryAudioStore").getActiveTrackTitle(d),i=b("MusicStoryAudioStore").getIsPlaying(d),j=b("MusicStoryAudioStore").getBeacons(d),k=b("MusicStoryAudioStore").getIsDynamicURL(d);switch(c.type){case"AUDIO_CREATE_STREAM":var l=c.loggingData;l!=null?a=this.addLogger(a,d,l):a=this.addNullLogger(a,d);a=this.addCheckpointTracker(a,d);break;case"AUDIO_PAUSE":k&&(e.logEvent("music_pause",{audio_duration_ms:f,audio_title:h,beacon_url:j.pause,clienttime:Date.now()}),a=this.pauseCheckpointTracker(a,d));e.logEvent("music_pause",{audio_duration_ms:f,audio_title:h});break;case"AUDIO_PLAY":k?(e.logEvent("music_play",{audio_duration_ms:f,audio_title:h,beacon_url:j.play,clienttime:Date.now()}),a=this.startCheckpointTracker(a,d)):e.logEvent("music_play",{audio_duration_ms:f,audio_title:h});break;case"AUDIO_SCRUB_BEGIN":i&&e.logEvent("music_pause",{audio_duration_ms:f,audio_title:h});break;case"AUDIO_SCRUB_END":i&&e.logEvent("music_play",{audio_duration_ms:f,audio_title:h});break;case"AUDIO_FINISH":k&&(a=this.pauseCheckpointTracker(a,d),e.logEvent("music_pause",{audio_duration_ms:f,audio_title:h,beacon_url:j.stop,clienttime:Date.now()}));e.logEvent("music_reached_end",{audio_duration_ms:f,audio_title:h});break;case"AUDIO_STREAM_CHANGE":i&&e.logEvent("music_pause",{audio_duration_ms:f,audio_title:c.previousTitle});e.logEvent("music_play",{audio_duration_ms:f,audio_title:h});break;case"AUDIO_UPDATE_TIME":if(k){l=Date.now();i=a.getCheckpointTracker(d);c=i;f=c.lastUpdateTimeStamp;h=c.timePlayedSinceLastCheckpoint;if(f>0){h+=l-f;if(h>29.5*g){k=j.checkpoint;e.logEvent("music_soundcloud_checkpoint",{beacon_url:k,clienttime:Date.now()});h=0}f=l;i=i.set("lastUpdateTimeStamp",f);i=i.set("timePlayedSinceLastCheckpoint",h);c=a.get("soundcloudCheckpointIndex");c=c.set(d,i);a=a.set("soundcloudCheckpointIndex",c)}}break;case"AUDIO_MUTE":case"AUDIO_UNMUTE":case"AUDIO_VOLUME_CHANGE":case"AUDIO_UPDATE_DURATION":case"AUDIO_UPDATE_BUFFER":break}return a};d.addLogger=function(a,c,d){var e=a.get("loggerIndex");e=e.set(c,new(b("MusicStoryEventLogger"))(d));return a.set("loggerIndex",e)};d.addCheckpointTracker=function(a,b){var c=a.get("soundcloudCheckpointIndex");c=c.set(b,new i());return a.set("soundcloudCheckpointIndex",c)};d.addNullLogger=function(a,b){var c=a.get("loggerIndex");c=c.set(b,null);return a.set("loggerIndex",c)};d.pauseCheckpointTracker=function(a,b){var c=a.getCheckpointTracker(b);c=c.set("lastUpdateTimeStamp",-1);var d=a.get("soundcloudCheckpointIndex");d=d.set(b,c);return a.set("soundcloudCheckpointIndex",d)};d.startCheckpointTracker=function(a,b){var c=a.getCheckpointTracker(b);c=c.set("lastUpdateTimeStamp",Date.now());var d=a.get("soundcloudCheckpointIndex");d=d.set(b,c);return a.set("soundcloudCheckpointIndex",d)};return c}(b("FluxReduceStore"));d.__moduleID=e.id;e.exports=new d(b("MusicStoryDispatcher"))}),null);
__d("MusicStoryBaseContainer.react",["MusicStoryAudioActions","MusicStoryAudioStore","MusicStoryBanzaiFeedLogger","MusicStoryDispatcher","MusicStoryLoggingStore","React"],(function(a,b,c,d,e,f){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);c.getStores=function(){return[b("MusicStoryAudioStore"),b("MusicStoryLoggingStore")]};function c(c){var d;d=a.call(this,c)||this;b("MusicStoryDispatcher").explicitlyRegisterStores([b("MusicStoryAudioStore"),b("MusicStoryLoggingStore")]);var e=c.loggingData,f=c.uniqueId,g=c.titleUriList;c=c.extraData;var h=c.isDynamicUri;b("MusicStoryAudioActions").createStream(g,e,f,c,h);h&&(b("MusicStoryAudioActions").blockFetches(d.props.uniqueId),b("MusicStoryAudioActions").fetchURL(d.props.uniqueId,"AUDIO_CREATE_STREAM"));return d}var d=c.prototype;d.play=function(){b("MusicStoryBanzaiFeedLogger").logOutboundClick(this.props.ftKey),this.state.isDynamicUri?this.state.blockFetches||(b("MusicStoryAudioActions").blockFetches(this.props.uniqueId),b("MusicStoryAudioActions").fetchURL(this.props.uniqueId,"AUDIO_PLAY")):b("MusicStoryAudioActions").play(this.props.uniqueId)};d.pause=function(){if(this.state.isDynamicUri){var a=b("MusicStoryAudioStore").getBeacons(this.props.uniqueId);b("MusicStoryAudioActions").pause(this.props.uniqueId,a.pause)}else b("MusicStoryAudioActions").pause(this.props.uniqueId)};d.scrubBegin=function(){b("MusicStoryAudioActions").scrubBegin(this.props.uniqueId)};d.scrubEnd=function(a){this.state.isDynamicUri?this.state.blockFetches||(b("MusicStoryAudioActions").blockFetches(this.props.uniqueId),b("MusicStoryAudioActions").fetchURL(this.props.uniqueId,"AUDIO_SCRUB_END",a)):b("MusicStoryAudioActions").scrubEnd(this.props.uniqueId,a)};d.mute=function(){b("MusicStoryAudioActions").mute(this.props.uniqueId)};d.unmute=function(){b("MusicStoryAudioActions").unmute(this.props.uniqueId)};d.toggleMuted=function(){this.state.isMuted?this.unmute():this.mute()};d.changeVolume=function(a){b("MusicStoryAudioActions").setVolume(this.props.uniqueId,a)};return c}(b("React").PureComponent);e.exports=a}),null);
__d("SimpleMusicAudioControls.react",["cx","React","VideoPlaybackControl.react","VideoPlaybackTimer.react","VideoScrubber.react","VideoVolumeControl.react"],(function(a,b,c,d,e,f,g){a=function(a){var c,d="_1c7f _1c7g",e="_1c7f _2pvx",f="_1c7f _409j",g="_2w_u",h=a.playbackPosition-a.playbackDuration;h=(c=b("React")).jsx(b("VideoPlaybackTimer.react"),{className:"_5qsr",remainingTimestamp:Math.round(h),playbackPosTimestamp:a.playbackPosition});var i=c.jsx(b("VideoPlaybackControl.react"),{finishedPlaying:a.finishedPlaying,isPlaying:a.isPlaying,onPause:a.onPause,onPlay:a.onPlay,tabIndex:"0"}),j=c.jsx(b("VideoScrubber.react"),{bufferedPosition:a.bufferedPosition,onScrubBegin:a.onScrubBegin,onScrubEnd:a.onScrubEnd,playbackDuration:a.playbackDuration,playbackPosition:a.playbackPosition,tabIndex:"0"});a=c.jsx(b("VideoVolumeControl.react"),{isMuted:a.isMuted,onToggleMuted:a.onToggleMuted,onVolumeChange:a.onVolumeChange,volume:a.volume,tabIndex:"0"});return c.jsx("div",{className:g,children:c.jsx("div",{className:"_3t1r",children:c.jsx("div",{className:"_2w_w",children:c.jsxs("div",{className:"_1c7d",children:[c.jsx("div",{className:d,children:i}),c.jsx("div",{className:e,children:j}),c.jsxs("div",{className:f,children:[h,a]})]})})})})};e.exports=a}),null);
__d("MusicStoryCarouselAudioControlsContainer.react",["FluxContainer","MusicStoryAudioActions","MusicStoryAudioStore","MusicStoryBaseContainer.react","React","SimpleMusicAudioControls.react"],(function(a,b,c,d,e,f){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$MusicStoryCarouselAudioControlsContainer1=function(){d.props.extraData.onPlay&&d.props.extraData.onPlay();var a=d.props.extraData.index;if(d.state.activeTrack===a)d.play();else{var c=d.props.uniqueId,e=b("MusicStoryAudioStore").getActiveTrackTitle(c);b("MusicStoryAudioActions").changeStream(c,a,e)}},d.$MusicStoryCarouselAudioControlsContainer2=function(){d.props.extraData.onPause&&d.props.extraData.onPause(),d.pause()},d.$MusicStoryCarouselAudioControlsContainer3=function(){if(d.state.activeTrack!==d.props.extraData.index)return;d.scrubBegin()},c)||babelHelpers.assertThisInitialized(d)}c.calculateState=function(a,c){a=c.uniqueId;a=b("MusicStoryAudioStore").getStream(a);var d=a.activeTrack,e=a.bufferedPosition,f=a.isMuted,g=a.isPlaying,h=a.playbackPosition,i=a.volume,j=a.isFinished,k=a.duration,l=a.isDynamicUri;a=a.blockFetches;c=d===c.extraData.index;d={activeTrack:d,bufferedPosition:c?e:0,finishedPlaying:c&&j,isMuted:f,isPlaying:c&&g,playbackDuration:k,playbackPosition:c?h:0,volume:i,isDynamicUri:l,blockFetches:a};return d};var d=c.prototype;d.componentDidUpdate=function(a,c){__p&&__p();var d=this;if(!c.finishedPlaying&&this.state.finishedPlaying){var e=this.state.activeTrack+1;if(e>=this.props.titleUriList.length)return;setTimeout(function(){if(d.state.activeTrack!==e-1)return;b("MusicStoryAudioActions").changeStream(d.props.uniqueId,e,b("MusicStoryAudioStore").getActiveTrackTitle(d.props.uniqueId))},1500)}};d.render=function(){var a=this;return b("React").jsx(b("SimpleMusicAudioControls.react"),babelHelpers["extends"]({onPlay:this.$MusicStoryCarouselAudioControlsContainer1,onPause:this.$MusicStoryCarouselAudioControlsContainer2,onScrubBegin:this.$MusicStoryCarouselAudioControlsContainer3,onScrubEnd:function(b){return a.$MusicStoryCarouselAudioControlsContainer4(b)},onToggleMuted:this.toggleMuted.bind(this),onVolumeChange:this.changeVolume.bind(this)},this.state))};d.$MusicStoryCarouselAudioControlsContainer4=function(a){if(this.state.activeTrack!==this.props.extraData.index)return;this.scrubEnd(a)};return c}(b("MusicStoryBaseContainer.react"));e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("MusicStoryCarouselAttachment.react",["ix","cx","fbt","invariant","BackgroundImage.react","FDSText.react","Image.react","Link.react","MusicStoryCarouselAudioControlsContainer.react","React","ScaledImage.react","asset"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k=132,l="6243987495",m="615085188507202";function a(a){var c,d=a.song,e=(c=b("React")).jsx(b("BackgroundImage.react"),{backgroundSize:"cover",className:"_6q8n",height:200,src:d.coverUrl,width:400}),f=c.jsx("div",{className:"_6q8o"}),g=c.jsx(b("ScaledImage.react"),{height:k,imageSize:{height:k,width:k},width:k,src:d.coverUrl});c=c.jsx("div",{className:"_6q8p",children:c.jsx(b("FDSText.react"),{color:"white",size:"header4",weight:"bold",children:d.musicTitle})});d.artistNames.length>0||j(0,6059);var h=d.collectionNames.length>0?d.collectionNames[0]:null;h=b("React").jsx("div",{className:"_6q8p _6q8q",children:b("React").jsx(b("FDSText.react"),{color:"white",size:"body1",weight:"normal",children:h!==null?d.artistNames[0]+" "+String.fromCodePoint(183)+" "+h:d.artistNames[0]})});var i=n(d.owner&&d.owner.id),l=b("React").jsx("div",{className:"_6q8p _6q8q",children:b("React").jsx(b("FDSText.react"),{color:"white",size:"body2",weight:"normal",children:o(i)})}),m=b("React").jsx(b("FDSText.react"),{color:"white",size:"header4",weight:"normal",children:q(i)});d=d.url!==null&&d.url!==""?d.url:r(i,d.externalContentId);g=b("React").jsxs("div",{className:"_6q8s",children:[g,b("React").jsxs("div",{className:"_6q8t",children:[c,h,l,b("React").jsx(b("Link.react"),{href:d,children:b("React").jsxs("div",{className:"_6q8u",children:[p(i),m]})})]})]});return b("React").jsxs("div",{className:"_6q8v",children:[e,f,g,b("React").jsx("div",{children:b("React").jsx(b("MusicStoryCarouselAudioControlsContainer.react"),{extraData:{index:a.carouselIndex,onPause:a.onPause,onPlay:a.onPlay},ftKey:null,loggingData:null,titleUriList:a.titleUrlList,uniqueId:a.uniqueId})})]})}function n(a){switch(a){case l:return"Spotify";case m:return"Apple Music";default:j(0,6060)}}function o(a){return i._("Plays from {application_name}",[i._param("application_name",a)])}function p(a){return a==="Spotify"?b("React").jsx(b("Image.react"),{alt:"Spotify Icon",className:"_6q8r",src:g("506051")}):null}function q(a){switch(a){case"Spotify":return i._("Play on Spotify");case"Apple Music":return i._("Listen on Apple Music");default:j(0,6061)}}function r(a,b){if(a==="Spotify")if(b!==null&&b!=="")return"https://open.spotify.com/track/"+String(b);else return"https://open.spotify.com";return null}e.exports=a}),null);
__d("MusicStoryCarouselContainer.react",["ix","cx","fbt","FluxContainer","Image.react","MusicStoryAudioActions","MusicStoryAudioStore","MusicStoryCarouselAttachment.react","MusicStoryDispatcher","React","XUICarousel.react","XUICarouselAnimator","XUICarouselArrow.react","XUICarouselItem.react","asset"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);c.getStores=function(){return[b("MusicStoryAudioStore")]};function c(c){__p&&__p();var d;d=a.call(this,c)||this;d.state={currentIndex:0,isPlaying:!1};d.$1=b("React").createRef();b("MusicStoryDispatcher").explicitlyRegisterStores([b("MusicStoryAudioStore")]);var e=c.uniqueId;c=c.songList;d.$2=c.map(function(a){return{title:String(a.musicTitle),uri:String(a.audioUrl)}});b("MusicStoryAudioActions").createStream(d.$2,null,e,{},!1);return d}c.calculateState=function(a,c){c=b("MusicStoryAudioStore").getStream(c.uniqueId);var d=c.activeTrack;c=c.isPlaying;a=a?a.currentIndex:0;return{currentIndex:c?d:a,isPlaying:c}};var d=c.prototype;d.componentDidUpdate=function(a,b){b.currentIndex!==this.state.currentIndex&&this.$1.current&&this.$1.current.setIndex(this.state.currentIndex)};d.render=function(){var a=this,c,d=this.props,e=d.className,f=d.songList,h=0;d=f.map(function(c){var d=h++;return b("React").jsx(b("XUICarouselItem.react"),{className:"_2pi7"+(d===0?" _2pit":"")+(d===f.length-1?" _2pij":""),children:b("React").jsx(b("MusicStoryCarouselAttachment.react"),{carouselIndex:d,onPause:a.props.onPause,onPlay:a.props.onPlay,song:c,titleUrlList:a.$2,uniqueId:a.props.uniqueId})},d)});var j=(c=b("React")).jsx(b("XUICarouselArrow.react"),{onClick:function(){return a.$3(a.state.currentIndex-1)},children:c.jsx("div",{className:"_6q9l _6q8w",children:c.jsx(b("Image.react"),{alt:i._("Prev"),src:g("499011")})})}),k=c.jsx(b("XUICarouselArrow.react"),{onClick:function(){return a.$3(a.state.currentIndex+1)},children:c.jsx("div",{className:"_6q9l _6q8y",children:c.jsx(b("Image.react"),{alt:i._("Next"),src:g("495717")})})});return c.jsx("div",{className:e,children:c.jsx(b("XUICarousel.react"),{animator:new(b("XUICarouselAnimator"))({type:"horizontal",centered:!0,firstAndLastAligned:!0}),initialAutoplay:!1,initialIndex:0,resizeViewport:"disabled",onItemClick:function(b){return a.$3(b)},ref:this.$1,arrows:[j,k],wrapAround:!1,children:d})})};d.$3=function(a){if(a===this.state.currentIndex)return;a<this.state.currentIndex?this.props.onNavLeft&&this.props.onNavLeft():a>this.state.currentIndex&&(this.props.onNavRight&&this.props.onNavRight());this.state.isPlaying?b("MusicStoryAudioActions").changeStream(this.props.uniqueId,a,b("MusicStoryAudioStore").getActiveTrackTitle(this.props.uniqueId)):this.setState({currentIndex:a})};return c}(b("React").PureComponent);e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("MusicStoryCarouselLoading.react",["ix","cx","fbt","FBLoadShimmer.react","Image.react","React","XUICard.react","XUICarousel.react","XUICarouselAnimator","XUICarouselArrow.react","XUICarouselItem.react","asset"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a,c=(a=b("React")).jsx(b("XUICarouselArrow.react"),{children:a.jsx("div",{className:"_6q9l _6q8w",children:a.jsx(b("Image.react"),{alt:i._("Prev"),src:g("499011")})})}),d=a.jsx(b("XUICarouselArrow.react"),{children:a.jsx("div",{className:"_6q9l _6q8y",children:a.jsx(b("Image.react"),{alt:i._("Next"),src:g("495717")})})}),e=this.props.className;return a.jsx("div",{className:e,children:a.jsx(b("XUICarousel.react"),{animator:new(b("XUICarouselAnimator"))({type:"horizontal",centered:!0,firstAndLastAligned:!0}),initialAutoplay:!1,initialIndex:0,resizeViewport:"disabled",arrows:[c,d],wrapAround:!1,children:[0,1,2,3,4,5,6,7,8,9].map(function(a){return b("React").jsx(b("XUICarouselItem.react"),{className:"_2pi7"+(a===0?" _2pit":"")+(a===9?" _2pij":""),children:b("React").jsxs(b("XUICard.react"),{className:"_6q8v",children:[b("React").jsxs("div",{className:"_6q8s",children:[b("React").jsx(b("FBLoadShimmer.react"),{height:132,width:132}),b("React").jsxs("div",{className:"_6q8t",children:[b("React").jsx(b("FBLoadShimmer.react"),{height:16,style:{marginBottom:"6px"},width:120}),b("React").jsx(b("FBLoadShimmer.react"),{height:14,style:{marginBottom:"6px"},width:100}),b("React").jsx(b("FBLoadShimmer.react"),{height:14,style:{marginBottom:"12px"},width:100}),b("React").jsx(b("FBLoadShimmer.react"),{height:28,width:140})]})]}),b("React").jsx("div",{className:"_3t1r",children:b("React").jsx(b("FBLoadShimmer.react"),{height:20,width:368})})]})},a)})})})};return c}(b("React").Component);e.exports=a}),null);
__d("EventsArtistTopTracksRenderer.react",["EventActionContext","EventCardWithLogging.react","EventsActionsLogger","MusicStoryCarouselContainer.react","MusicStoryCarouselLoading.react","React","RelayFBEnvironment","RelayModern","EventsArtistTopTracksRendererQuery.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("RelayModern").QueryRenderer;b("RelayModern").graphql;var i=g!==void 0?g:g=b("EventsArtistTopTracksRendererQuery.graphql");function a(a){var c=a.actionContext,d=a.eventID,e={eventID:d},f=a;return b("React").jsx(h,{environment:b("RelayFBEnvironment"),query:i,variables:e,render:function(a){a.error;a=a.props;return a?b("React").jsx(b("EventCardWithLogging.react"),{actionContext:c,actionTarget:b("EventsActionsLogger").Target.PERMALINK_CARD,eventID:d,children:b("React").jsx(b("MusicStoryCarouselContainer.react"),babelHelpers["extends"]({},f,{onNavLeft:function(){return j(c,b("EventsActionsLogger").Type.NAV_LEFT,d)},onNavRight:function(){return j(c,b("EventsActionsLogger").Type.NAV_RIGHT,d)},onPause:function(){return j(c,b("EventsActionsLogger").Type.PAUSE_MUSIC,d)},onPlay:function(){return j(c,b("EventsActionsLogger").Type.PLAY_MUSIC,d)},songList:a.event.topSongs,uniqueId:"EVENT_ARTIST_TOP_TRACKS"}))}):b("React").jsx(b("MusicStoryCarouselLoading.react"),{})}})}function j(a,c,d){b("EventsActionsLogger").log(d,{type:c,target:b("EventsActionsLogger").Target.PERMALINK_CARD,acontext:b("EventActionContext").getFromString(a)})}e.exports=a}),null);
__d("MusicStoryCollectionListItem.react",["ix","cx","Image.react","React","ShimButton.react","XUIText.react","fbglyph"],(function(a,b,c,d,e,f,g,h){a=function(a){var c=a.isPlaying,d=a.isActive,e=a.index,f=a.title,h=a.onTrackClick;c?c=b("React").jsx(b("Image.react"),{className:"_3-_y _3-4s",src:g("141376")}):c=b("React").jsx(b("XUIText.react"),{className:"_3-4s",size:"meta1",weight:"normal",children:e+1+"."});return b("React").jsxs(b("ShimButton.react"),{className:"_3-4r"+(d?" _59j3":""),onClick:function(){return h(a.index)},children:[c,b("React").jsx(b("XUIText.react"),{className:"_3-4p",size:"meta1",weight:"normal",children:f})]})};e.exports=a}),null);
__d("MusicStoryCollectionTrackList.react",["cx","MusicStoryCollectionListItem.react","React","ScrollableArea.react"],(function(a,b,c,d,e,f,g){a=function(a){var c=a.titleUriList.map(function(c,d){return b("React").jsx(b("MusicStoryCollectionListItem.react"),{index:d,title:c.title,uri:c.uri,isPlaying:a.isPlaying&&d===a.activeTrack,isActive:d===a.activeTrack,onTrackClick:a.onTrackClick},d)});return b("React").jsx(b("ScrollableArea.react"),{className:"_3cf2",children:c})};e.exports=a}),null);
__d("MusicStoryTrackListContainer.react",["FluxContainer","MusicStoryAudioActions","MusicStoryAudioStore","MusicStoryBanzaiFeedLogger","MusicStoryBaseContainer.react","MusicStoryCollectionTrackList.react","React"],(function(a,b,c,d,e,f){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(b){b=a.call(this,b)||this;b.$MusicStoryTrackListContainer1=b.onTrackClick.bind(babelHelpers.assertThisInitialized(b));return b}var d=c.prototype;d.onTrackClick=function(a){if(this.state.activeTrack===a)this.state.isPlaying?this.pause():this.play();else{var c=this.props.uniqueId,d=b("MusicStoryAudioStore").getActiveTrackTitle(c);b("MusicStoryBanzaiFeedLogger").logOutboundClick(this.props.ftKey);b("MusicStoryAudioActions").changeStream(c,a,d)}};c.calculateState=function(a,c){a=c.uniqueId;c=b("MusicStoryAudioStore").getStream(a);a=c.activeTrack;var d=c.bufferedPosition,e=c.isMuted,f=c.isPlaying,g=c.playbackPosition,h=c.volume,i=c.isFinished;c=c.duration;a={activeTrack:a,bufferedPosition:d,finishedPlaying:i,isMuted:e,isPlaying:f,playbackDuration:c,playbackPosition:g,volume:h,blockFetches:!1,isDynamicUri:!1};return a};d.componentDidUpdate=function(a,c){__p&&__p();var d=this;if(!c.finishedPlaying&&this.state.finishedPlaying){var e=this.state.activeTrack+1;if(e>=this.props.titleUriList.length)return;setTimeout(function(){if(d.state.activeTrack!==e-1)return;b("MusicStoryAudioActions").changeStream(d.props.uniqueId,e,b("MusicStoryAudioStore").getActiveTrackTitle(d.props.uniqueId))},1500)}};d.render=function(){return b("React").jsx(b("MusicStoryCollectionTrackList.react"),{activeTrack:this.state.activeTrack,isPlaying:this.state.isPlaying,onTrackClick:this.$MusicStoryTrackListContainer1,uniqueId:this.props.uniqueId,titleUriList:this.props.titleUriList})};return c}(b("MusicStoryBaseContainer.react"));e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("SimpleMusicStoryCTA",["fbt","ChannelManager","DOM","MusicStoryAudioStore","MusicStoryBanzaiFeedLogger","MusicStoryEventLogger","URI","throttle"],(function(a,b,c,d,e,f,g){__p&&__p();var h,i=500;b("ChannelManager").startChannelManager();a=function(){"use strict";__p&&__p();function a(a,c,d){__p&&__p();var e=this;this.onSpotifyClick=function(){b("MusicStoryBanzaiFeedLogger").logOutboundClick(e.$12);var a={cta_action:"webview"};e.logEvent("music_cta_click",a);a=new(h||(h=b("URI")))(e.$13);var c=a.getQueryData();c.utm_source||(a=a.addQueryData({utm_source:"Facebook_SimpleMusicStories"}));c.utm_medium||(a=a.addQueryData({utm_medium:"sms"}));window.open(a)};this.onDefaultClick=function(){b("MusicStoryBanzaiFeedLogger").logOutboundClick(e.$12);var a=e.$16?{cta_action:"webview",beacon_url:b("MusicStoryAudioStore").getBeacons(e.$15).ctaClickOpen,clienttime:Date.now()}:{cta_action:"webview"};e.logEvent("music_cta_click",a);window.open(e.$13)};this.$1=d.album;this.$3=a;this.$8=c;this.$13=d.uri;this.$5=d.saved;this.$6=!1;this.$7=d.loggedIn;this.$2=d.appName;this.$10=!1;this.$12=d.ftkey;this.$15=d.uniqueId;this.$16=d.isDynamicUri;c=d.loggingData;c!==null&&(this.$4=new(b("MusicStoryEventLogger"))(c),this.$6=!0);switch(this.$2){case"Spotify":this.$11=g._("Play on {partnerName}",[g._param("partnerName",this.$2)]);this.$14="";this.$9=this.onSpotifyClick;break;case"iTunes":this.$11=g._("Get it on iTunes");this.$14="";this.$9=this.onDefaultClick;break;default:d=this.$2;this.$11=g._("Listen on {partnerName}",[g._param("partnerName",d)]);this.$14="";this.$9=this.onDefaultClick}b("DOM").setContent(this.$8,this.$11);a.addEventListener("click",b("throttle")(this.$9,i))}var c=a.prototype;c.logEvent=function(a,b){this.$6&&this.$4.logEvent(a,b)};return a}();e.exports=a}),null);
__d("MusicStoryAudioControlsContainer.react",["FluxContainer","MusicStoryAudioStore","MusicStoryBaseContainer.react","React","SimpleMusicAudioControls.react"],(function(a,b,c,d,e,f){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}c.calculateState=function(a,c){a=c.uniqueId;c=b("MusicStoryAudioStore").getStream(a);a=c.bufferedPosition;var d=c.isMuted,e=c.isPlaying,f=c.playbackPosition,g=c.volume,h=c.isFinished,i=c.duration,j=c.isDynamicUri;c=c.blockFetches;a={bufferedPosition:a,finishedPlaying:h,isMuted:d,isPlaying:e,playbackDuration:i,playbackPosition:f,volume:g,isDynamicUri:j,blockFetches:c};return a};var d=c.prototype;d.render=function(){return b("React").jsx(b("SimpleMusicAudioControls.react"),babelHelpers["extends"]({onPlay:this.play.bind(this),onPause:this.pause.bind(this),onScrubBegin:this.scrubBegin.bind(this),onScrubEnd:this.scrubEnd.bind(this),onToggleMuted:this.toggleMuted.bind(this),onVolumeChange:this.changeVolume.bind(this)},this.state))};return c}(b("MusicStoryBaseContainer.react"));e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);